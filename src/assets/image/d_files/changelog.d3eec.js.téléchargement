(window.webpackJsonp=window.webpackJsonp||[]).push([[335],{"+FsJ":function(t,e,o){},"/wjt":function(t,e,o){},"7RbT":function(t,e,o){"use strict";o("J7tD")},J7tD:function(t,e,o){var n=o("LboF"),s=o("+FsJ");"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[t.i,s,""]]);var a={insert:"head",singleton:!1};n(s,a);t.exports=s.locals||{}},"XVP+":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t._self._c;return e("i-popup",{staticClass:"changelog-popup",attrs:{"close-button":""},model:{value:t.popupShow,callback:function(e){t.popupShow=e},expression:"popupShow"}},[e("template",{slot:"backButton"},[e("h3",[e("i-icon",{attrs:{icon:"history"}}),t._v(" "+t._s(t.$t("changelog.changes"))+"\n\t\t")],1)]),t._v(" "),e("ChangelogList",t._b({},"ChangelogList",t.$props,!1))],2)};n._withStripped=!0;var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-history-popup"},[t.isLoading?e("i-preloader",{attrs:{center:""}}):t._e(),t._v(" "),t._l(Object.keys(t.dailyGroups),(function(o,n){return e("i-accordion",{key:n,staticClass:"history-accordion",scopedSlots:t._u([{key:"head",fn:function(){return[e("b",[t._v(t._s(t.getDate(o)))]),t._v(" "),e("i-icon",{staticClass:"chevron-down",attrs:{icon:"chevron-down"}})]},proxy:!0}],null,!0)},[t._v(" "),t._l(t.dailyGroups[o],(function(o,n){return e("div",{key:n,staticClass:"folder-history-item"},[e("p",[e("b",[t._v(t._s(t.getTime(o.createDate))+" - "+t._s(o.fullname)+",")]),t._v(" "),e("span",{staticClass:"log-content",domProps:{innerHTML:t._s(t.convertLogMessage(o))}}),t._v(" "),o.isNativeText?t._e():e("b",{staticClass:"action",class:[o.message.action]},[t._v(t._s(t.$t("changelog.actions."+o.message.action)))])])])}))],2)})),t._v(" "),t.totalLogCount>t.currentLogCount?[t.isMoreLoading?e("i-preloader",{attrs:{center:""}}):e("i-button",{staticClass:"load-more",attrs:{naked:""},on:{click:t.loadMore}},[t._v(t._s(t.$t("loadMore")))])]:t._e()],2)};s._withStripped=!0;var a,i,r,c=o("yXPU"),l=o.n(c),u=(o("rB9j"),o("Rm1S"),o("4mDm"),o("3bBZ"),o("UxlC"),o("oCYn")),p=o("mSNy"),g=o("iKgg"),d=Object(g.a)("changelog"),h={getChangelogs(t,e){var o=arguments;return l()((function*(){var n=o.length>2&&void 0!==o[2]?o[2]:0;if(u.default.prototype.$auth.isAuthenticated())return(yield d.get("".concat(t,"/").concat(e,"/").concat(n))).data;u.default.prototype.$swal({title:p.default.t("popups.mustLogin.title"),text:p.default.t("popups.mustRegisterOrLOginPopup.text"),type:"warning"})}))()}},f=o("EP40"),v=o("IWQq"),y=o("ttAG"),m=o("wd/R"),_=o.n(m),C=o("C2zn"),b={components:{IAccordion:v.a},props:{changelogType:String,parentId:String,ownerId:String,folderId:String,parentModel:Object},data:function(){return{isLoading:!1,changelogs:[],page:0,dailyGroups:{},monthNames:C[p.default.locale].monthsAbbr,totalLogCount:0,currentLogCount:0,isMoreLoading:!1}},mounted:(r=l()((function*(){this.dailyGroups={},this.currentLogCount=0,this.page=0,this.isLoading=!0,yield this.getChangelogs(this.page),this.isLoading=!1})),function(){return r.apply(this,arguments)}),methods:{getChangelogs:(i=l()((function*(t){if(this.$root.user&&this.$root.user._id){var e=yield h.getChangelogs(this.changelogType,this.parentId,t);this.totalLogCount=e.count,this.currentLogCount+=e.items.length,f.default.convert(this.parentModel,e.items,this.changelogType).forEach(t=>{var e=y.default.getFormattedTime(t.createDate);this.dailyGroups[e]=this.dailyGroups[e]||[],this.dailyGroups[e].push(t)}),this.changelogs.push(this.dailyGroups)}else setTimeout(()=>{this.getChangelogs(t)},200)})),function(t){return i.apply(this,arguments)}),loadMore:(a=l()((function*(){this.isMoreLoading=!0,yield this.getChangelogs(++this.page),this.isMoreLoading=!1})),function(){return a.apply(this,arguments)}),getTime:function(t){return _()(t).utcOffset(this.$root.user.info.timezone.offset,!0).format("HH:mm")},getDate:function(t){var e=new Date(_()(t,"YYYY-MM-DD").utcOffset(this.$root.user.info.timezone.offset,!0).utc()),o=C[p.default.locale].monthsAbbr[e.getUTCMonth()];return"".concat(o," ").concat(e.getDate(),", ").concat(e.getFullYear())},convertLogMessage:function(t){var e=y.default.clearHtmlTags(t.message.text),o={color:()=>{var t=e.match(/(#[0-9-A-Z-a-z]+)/g);for(var o of t)e=e.replace(o,'<span class="color" style="background: '.concat(o,'" title="').concat(o,'"></span>'))}};return t.valueType&&o[t.valueType]&&o[t.valueType](),e}}},L=(o("7RbT"),o("KHd+")),w={components:{ChangelogList:Object(L.a)(b,s,[],!1,null,"0e196d97",null).exports},props:{changelogType:String,parentId:String,ownerId:String,folderId:String,parentModel:Object},data:function(){return{popupShow:!1}},methods:{open:function(){this.popupShow=!0},close:function(){this.popupShow=!1}}},S=(o("qzna"),Object(L.a)(w,n,[],!1,null,"f0266daa",null));e.default=S.exports},qzna:function(t,e,o){"use strict";o("upKy")},upKy:function(t,e,o){var n=o("LboF"),s=o("/wjt");"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[t.i,s,""]]);var a={insert:"head",singleton:!1};n(s,a);t.exports=s.locals||{}}}]);