(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"1Vx+":function(e,t,i){"use strict";i("BtSn")},"3IDC":function(e,t,i){"use strict";t.a={percentToPx:function(e){return e?750*Number(e)/100:750}}},BtSn:function(e,t,i){var s=i("LboF"),o=i("HsqD");"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var n={insert:"head",singleton:!1};s(o,n);e.exports=o.locals||{}},DEiG:function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{on:{click:function(t){return e.$emit("click")}}},e._l(e.providers,(function(i){return t("".concat(i),{key:i,tag:"component",class:{"step-view":e.form&&e.form.baseSettings.cardDesign},attrs:{data:e.value[i],mediaClass:e.mediaClass,mediaStyle:e.mediaStyle},on:{onInit:function(t){return e.$emit("onInit",t)}}})})),1)};s._withStripped=!0;var o=function(){var e=this._self._c;return this.data?e("img",{class:this.mediaClass,style:this.mediaStyle,attrs:{src:this.data}}):this._e()};o._withStripped=!0;var n={name:"Urlmage",props:["data","mediaClass","mediaStyle"],mounted:function(){this.$emit("onInit",{type:"image",setShowColorPicker:!1})}},a=i("KHd+"),r=Object(a.a)(n,o,[],!1,null,null,null).exports,d=function(){var e=this._self._c;return this.data?e("img",{class:this.mediaClass,style:this.mediaStyle,attrs:{src:this.iconUrl}}):this._e()};d._withStripped=!0;var l=i("NRfZ"),u={name:"NounProjectImage",props:["data","mediaClass","mediaStyle"],mounted:function(){this.$emit("onInit",{type:"icon",setShowColorPicker:!0})},computed:{iconUrl:function(){return"".concat(l.a.fileApi,"/icon/thenounproject/getbyid/").concat(this.data.id)}}},c=Object(a.a)(u,d,[],!1,null,null,null).exports,m=function(){var e=this._self._c;return this.data?e("img",{class:this.mediaClass,style:this.mediaStyle,attrs:{src:this.iconUrl}}):this._e()};m._withStripped=!0;var p={name:"FontawesomeImage",props:["data","mediaClass","mediaStyle"],mounted:function(){this.$emit("onInit",{type:"icon",setShowColorPicker:!0})},computed:{iconUrl:function(){return"".concat(l.a.fileApi,"/icon/fontawesome/getbyid/").concat(this.data.id,"/").concat(this.data.style,"/").concat(this.data.version)}}},h={nounProject:c,url:r,fontawesome:Object(a.a)(p,m,[],!1,null,null,null).exports},f={name:"MediaImage",components:h,props:["value","mediaClass","mediaStyle","form"],computed:{providers:function(){for(var e=[],t=Object.keys(this.value),i=0;i<t.length;i++){var s=t[i];Object.keys(h).indexOf(s)>-1&&e.push(s)}return e}}},v=Object(a.a)(f,s,[],!1,null,null,null);t.a=v.exports},HsqD:function(e,t,i){},"Kp+X":function(e,t,i){var s=i("LboF"),o=i("NHDX");"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var n={insert:"head",singleton:!1};s(o,n);e.exports=o.locals||{}},NHDX:function(e,t,i){},Pn5k:function(e,t,i){"use strict";i("4mDm"),i("5s+n"),i("3bBZ"),i("rB9j"),i("UxlC"),i("4l63"),i("yq1k"),i("JTJg");var s=i("NRfZ"),o=i("3IDC"),n=i("bKjL"),a=i("mckT"),r=i("K/kh").a.getAllQuestionTypes();t.a={name:"QuestionMixin",components:{FormHeader:a.a},props:{questionModel:{type:Object,default:()=>{}},form:Object,answerMap:Object,hideQuestionNumber:Boolean,transparent:Boolean,parentQuestion:{type:Object,default:()=>{}},isSelected:Boolean,hideMedia:Boolean},data:function(){return{excludeQuestionInfo:{wysiwyg:!0,seperator:!0,imagecontent:!0,termsandconditions:!0,hexToCSSFilter:null,pagebreak:!0},isMediaImageTypeIcon:!1}},beforeCreate:function(){i.e(324).then(i.t.bind(null,"j+2b",7)).then(e=>{this.excludeQuestionInfo.hexToCSSFilter=e.hexToCSSFilter})},methods:{onMediaImageInit:function(e){this.isMediaImageTypeIcon=!!e&&"icon"===e.type},getEmbedVideo:function(e){var t,i,s="",o="";return e.indexOf("youtube.com")>-1&&(-1!==(s=(o=e.split("v=")[1]).indexOf("&"))&&(o=o.substring(0,s)),t="https://www.youtube.com/embed/"+o+"?playlist=".concat(o)+"&rel=0&version=3&enablejsapi=1&playerapiid=ytplayer&iv_load_policy=3"),e.indexOf("youtu.be")>-1&&(-1!==(s=(o=e.split("/")[3]).indexOf("&"))&&(o=o.substring(0,s)),t="https://www.youtube.com/embed/"+o+"?playlist=".concat(o)+"&rel=0&version=3&enablejsapi=1&playerapiid=ytplayer&iv_load_policy=3"),e.indexOf("//vimeo.com")>-1&&(-1!==(s=(o=e.split("m/")[1]).indexOf("&"))&&(o=o.substring(0,s)),t="https://player.vimeo.com/video/"+o),t?null!==(i=this.questionModel.media)&&void 0!==i&&i.autoPlay?t+"&controls=0&loop=1&mute=1&muted=1&disablekb=1":t:e},hexToRgb:function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,i,s){return t+t+i+i+s+s}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null}},computed:{classes:function(){var e,t;return{required:this.questionModel.isRequired,transparent:this.transparent,"big-question-media-cover":this.hasQuestionMedia&&this.isCardDesign&&this.questionModel.media.cssClass&&this.questionModel.media.cssClass.includes("media-cover"),[null===(e=this.questionModel.media)||void 0===e?void 0:e.cssClass]:!this.hideMedia&&(null===(t=this.questionModel.media)||void 0===t?void 0:t.cssClass),"media-img":this.questionModel.media,"step-view":this.form.baseSettings.cardDesign,autoplay:this.questionModel.media&&this.questionModel.media.autoPlay,"question-group":"questiongroup"===this.questionModel.questionType,active:this.isSelected}},mediaSizePx:function(){var e=this.questionModel.media?this.questionModel.media.size:null;return o.a.percentToPx(e)},mediaImage:function(){var e={};return this.questionModel.media?this.questionModel.media.fileId&&this.form.formTempFiles&&this.form.formTempFiles[this.questionModel.media.fileId]?(e.url=s.a.fileApi+"/tempfile/"+this.form._id+"/"+this.questionModel.media.fileId,e):this.questionModel.media.fileId?(e.url=s.a.fileApi+"/formfile/"+this.form._id+"/"+this.questionModel.media.fileId,e):this.questionModel.media.imageUrl?(e.url=n.a.checkAndFixUrl(this.questionModel.media.imageUrl,"questionmedia",this.questionModel.media.cssClass),e):this.questionModel.media.videoUrl?null:this.questionModel.media.iconUrl?(e.url=this.questionModel.media.iconUrl,e):this.questionModel.media:null},hasQuestionMedia:function(){var e=r[this.questionType];return(!e||!e.disableQuestionMedia)&&(!(!this.questionModel.media||!(this.mediaImage||this.questionModel.media.iconId||this.questionModel.media.videoUrl))||void 0)},mediaStyle:function(){var e="";if(!this.form.baseSettings.cardDesign||!this.questionModel.media.cssClass||this.questionModel.media.cssClass&&!this.questionModel.media.cssClass.includes("media-cover")){var t=this.questionModel.media?this.questionModel.media.size:null;e+="max-width:"+o.a.percentToPx(t)+"px; width: 100%;"}if(this.questionModel.media.iconColor&&this.excludeQuestionInfo.hexToCSSFilter)e+="filter:"+this.excludeQuestionInfo.hexToCSSFilter(this.questionModel.media.iconColor).filter;else if(this.questionModel.media.brightness){e+="filter: contrast("+(100-(this.questionModel.media.brightness-100))+"%) brightness("+this.questionModel.media.brightness+"%);"}return e},mediaImageClass:function(){var e;return!this.isMediaImageTypeIcon||null!==(e=this.questionModel.media)&&void 0!==e&&e.iconColor?"":"default-icon"},isCardDesign:function(){return this.form&&this.form.baseSettings&&this.form.baseSettings.cardDesign},onFormDesign:function(){return"FormDesign"===this.$root.onSubPage},questionType:function(){var e=this.questionModel.questionType;return(this.questionModel[e]||{}).subType||e}}}},S9E3:function(e,t,i){},Wg8n:function(e,t,i){var s=i("LboF"),o=i("S9E3");"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var n={insert:"head",singleton:!1};s(o,n);e.exports=o.locals||{}},dbYn:function(e,t,i){"use strict";i("Wg8n")},ezhA:function(e,t,i){"use strict";i("4Brf");var s=function(){var e=this,t=e._self._c;return e.questionModel&&Object.keys(e.questionModel).length>0?t("div",{ref:"question",staticClass:"question",class:e.classes,on:{click:function(t){return e.$emit("click",t)}}},[t("div",{staticClass:"question-card-scroll",class:{"form-design":e.onFormDesign,"first-question":0===e.questionModel.displayOrder&&e.isCardDesign,"first-question-column":!e.isMediaInside}},[t("div",{staticClass:"question-card-wrapper"},[t("div",{staticClass:"question-card"},[e.hasQuestionMedia&&e.isMediaInside&&!e.hideMedia?t("div",{staticClass:"question-media-wrapper",class:e.questionModel.media.cssClass?e.questionModel.media.cssClass:""},[t("QuestionMediaView",{attrs:{form:e.form,questionModel:e.questionModel,hideQuestionNumber:e.hideQuestionNumber}})],1):e._e(),e._v(" "),t("div",{staticClass:"question-text-wrapper"},[0===e.questionModel.displayOrder&&e.isCardDesign?t("FormHeader",{attrs:{formModel:e.form}}):e._e(),e._v(" "),t("div",{staticClass:"align-column"},[!e.hasQuestionMedia||e.isMediaInside||e.hideMedia?e._e():t("QuestionMediaView",{attrs:{form:e.form,questionModel:e.questionModel,hideQuestionNumber:e.hideQuestionNumber}}),e._v(" "),t("div",{staticClass:"question-info"},[e.excludeQuestionInfo[e.questionModel.questionType]?e._e():[e.questionModel.viewHelpers&&!0!==e.hideQuestionNumber?t("span",{staticClass:"question-order",class:{"not-digit":e.questionModel.viewHelpers.questionNumber>9}},[e._v(e._s(e.questionModel.viewHelpers.questionNumber)+".")]):e._e(),e._v(" "),t("div",{staticClass:"question-title-wrapper"},[t("div",{staticClass:"question-title"},[t("p",{ref:"questionInput",staticClass:"editable-input view",domProps:{innerHTML:e._s(e.questionTitle)}})]),e._v(" "),e.questionModel.description?t("p",{staticClass:"question-description editable-input view",attrs:{placeholder:e.$t("description")}},[e._v("\n\t\t\t\t\t\t\t\t\t\t"+e._s(e.questionModel.description)+"\n\t\t\t\t\t\t\t\t\t")]):e._e()])]],2),e._v(" "),e._t("default")],2),e._v(" "),0===e.questionModel.displayOrder&&e.isCardDesign?t("div"):e._e()],1)])])])]):e._e()};s._withStripped=!0;i("yq1k"),i("JTJg");var o=i("Pn5k"),n=i("qe/e"),a=i("RuLz"),r=function(){var e,t=this,i=t._self._c;return i("div",{staticClass:"question-media",class:t.mediaClasses,style:{"padding-right":t.hideQuestionNumber&&"0px"}},[t.mediaImage?i("MediaImage",{staticClass:"media-img-wrapper question-media-content",class:t.mediaImageClass,attrs:{form:t.form,value:t.mediaImage,mediaClass:"question-media-content",mediaStyle:t.mediaStyle},on:{onInit:t.onMediaImageInit}}):t.hasVideoTag?i("video",{ref:"video",staticClass:"question-media-video",style:t.mediaStyle,attrs:{loop:"",playsinline:"",muted:"",poster:t.questionModel.media.videoThumbnail,preload:"auto",controls:!t.isCardDesign,autoplay:t.questionModel.media.autoPlay,frameborder:"0"},domProps:{muted:!0}},[i("source",{attrs:{src:t.getEmbedVideo(null===(e=t.questionModel.media)||void 0===e?void 0:e.videoUrl),type:"video/mp4"}})]):t.questionModel.media?i("iframe",{ref:"video",staticClass:"question-media-video",style:"max-width:"+t.mediaSizePx+"px",attrs:{src:t.autoPlayFirstMedia?t.getEmbedVideo(t.questionModel.media.videoUrl)+"&autoplay=1":t.getEmbedVideo(t.questionModel.media.videoUrl),height:"500",frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},on:{load:t.playVideo}}):t._e()],1)};r._withStripped=!0;var d=i("DEiG"),l={name:"QuestionMediaView",mixins:[o.a],components:{MediaImage:d.a},methods:{playVideo:function(){this.autoPlayFirstMedia&&document.getElementsByClassName("question-media-video")[0].contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*")}},computed:{hasVideoTag:function(){var e;return(null===(e=this.questionModel.media)||void 0===e?void 0:e.videoUrl)&&(this.questionModel.media.videoUrl.includes("external")||this.questionModel.media.videoUrl.includes("pexels"))},mediaClasses:function(){var e,t,i=null===(e=this.questionModel.media)||void 0===e?void 0:e.align;return null!==(t=this.questionModel.media)&&void 0!==t&&t.videoUrl&&!this.hasVideoTag&&(i+=" iframe"),i},autoPlayFirstMedia:function(){var e;return 0===this.questionModel.displayOrder&&!this.mediaImage&&(null===(e=this.questionModel.media)||void 0===e?void 0:e.autoPlay)&&this.isCardDesign}}},u=(i("dbYn"),i("KHd+")),c=Object(u.a)(l,r,[],!1,null,"2b7c837d",null).exports,m={name:"QuestionView",mixins:[o.a],components:{QuestionMediaView:c},props:{hideMedia:Boolean},data:function(){return{recallTargetQuestionIds:[]}},mounted:function(){this.recallTargetQuestionIds=n.a.findRecallIds(this.title)},computed:{title:function(){return a.b.bbcodeToHtml(this.questionModel.question)},questionTitle:function(){return n.a.fixRecallQuestionTitle(this.title,this.form.questions,this.recallTargetQuestionIds,this.answerMap||{})},isMediaInside:function(){var e,t,i;return((null===(e=this.questionModel.media)||void 0===e||null===(e=e.cssClass)||void 0===e?void 0:e.includes("left"))||(null===(t=this.questionModel.media)||void 0===t||null===(t=t.cssClass)||void 0===t?void 0:t.includes("right")))&&!this.$root.isMobile||(null===(i=this.questionModel.media)||void 0===i||null===(i=i.cssClass)||void 0===i?void 0:i.includes("background"))}}},p=(i("1Vx+"),Object(u.a)(m,s,[],!1,null,"1ece8eaa",null));t.a=p.exports},mckT:function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"form-header-wrapper",class:{"form-design":e.onFormDesign}},[t("div",{staticClass:"form-title view"},[e.formModel.baseSettings&&!e.formModel.baseSettings.hideFormTitle?t("h1",{staticClass:"form-title break-word"},[e._v(e._s(e.formModel.title))]):e._e()]),e._v(" "),e.$auth.isAuthenticated()&&e.formUrl?t("a",{staticClass:"title-dropdown"},[t("i-icon",{attrs:{icon:"ellipsis-v"}}),e._v(" "),t("i-dropdown",{staticClass:"title-dropdown-content",attrs:{activator:".title-dropdown"}},[t("li",[t("a",{on:{click:e.importForm}},[t("i-icon",{attrs:{icon:"file-import"}}),e._v(" "),t("span",[e._v(e._s(e.$t("importForm")))])],1)])])],1):e._e()])};s._withStripped=!0;var o=i("lSNA"),n=i.n(o),a=i("yXPU"),r=i.n(a),d=i("Mj6V"),l=i.n(d),u=i("OZsM");function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function m(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){n()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var p,h={name:"FormHeader",props:{formModel:Object},beforeDestroy:function(){this.sidebars&&(this.sidebars.design.isOpen=!1)},methods:{importForm:(p=r()((function*(){if(this.$auth.isAuthenticated()&&this.formUrl){l.a.start(),document.body.classList.add("route-loading");var e,t=yield this.createImportTemplate();e=this.$route.query.ignorefileerrors?yield u.a.importFormIgnoreFileErrors(m({},t),"import","afterlogin"):yield u.a.importForm(m({},t),"import","afterlogin"),this.logic(e)}})),function(){return p.apply(this,arguments)}),createImportTemplate:function(){var e=this.formModel;return delete e.quotasSettings,delete e.validationRules,delete e.afterSubmissionSettings,delete e.unpublishDateSettings,delete e.publishDateSettings,delete e.createDate,delete e.reportState,e.url=this.formUrl,e},logic:function(e){if(document.body.classList.remove("route-loading"),l.a.done(),this.$auth.isAuthenticated())if(403===e.status){if("banned"===e.data)return this.$root.logout();e.data&&e.data.length>0&&6===e.data[0].errorCode&&this.$root.upgradePopup("fileSpace",{text:this.$t("accountSettings.quotas.fileSpaceFullForFormCreate"),currentQuota:-1})}else(e=e.data)&&Object.keys(e).length>0?(this.$swal({title:this.$t("popups.formImportSuccess.title"),text:this.$t("popups.formImportSuccess.text"),type:"succes"}),this.$root.setQuotaUsage(1,"formCount")):this.$root.upgradePopup("formCreate")}},computed:{formUrl:function(){return this.$route.params.formUrl},isFormDesign:function(){return"FormDesign"===this.$route.name},onFormDesign:function(){return"FormDesign"===this.$root.onSubPage}}},f=(i("uAFc"),i("KHd+")),v=Object(f.a)(h,s,[],!1,null,"15d68788",null);t.a=v.exports},uAFc:function(e,t,i){"use strict";i("Kp+X")}}]);