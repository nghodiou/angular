(window.webpackJsonp=window.webpackJsonp||[]).push([[254],{"+yMr":function(t,e,i){var n=i("LboF"),s=i("fqr3");"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[t.i,s,""]]);var a={insert:"head",singleton:!1};n(s,a);t.exports=s.locals||{}},"0nKJ":function(t,e,i){"use strict";i("+yMr")},"14yt":function(t,e,i){"use strict";i("fiQv")},"1c7O":function(t,e,i){"use strict";i("vdjZ")},"2lgY":function(t,e,i){var n=i("LboF"),s=i("fvAb");"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[t.i,s,""]]);var a={insert:"head",singleton:!1};n(s,a);t.exports=s.locals||{}},"35S2":function(t,e,i){},"6HAM":function(t,e,i){var n=i("LboF"),s=i("dCVM");"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[t.i,s,""]]);var a={insert:"head",singleton:!1};n(s,a);t.exports=s.locals||{}},"6Wtb":function(t,e,i){},"7pu/":function(t,e,i){},"84q2":function(t,e,i){var n=i("LboF"),s=i("lrFH");"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[t.i,s,""]]);var a={insert:"head",singleton:!1};n(s,a);t.exports=s.locals||{}},"8rs4":function(t,e,i){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"googlesheets-settings-wrapper"},[t.isLoading?e("i-preloader"):e("div",{staticClass:"attribute",class:{disabled:0===t.spreadSheets.length||t.tabPreloader}},[e("h4",[t._v(t._s(t.$t("formSettings.integrationSettings.googleSheets.pleaseSelectSpreadSheets")))]),t._v(" "),e("div",{staticClass:"select-wrapper"},[e("i-select",{attrs:{items:t.spreadSheets,emptyOption:t.$t("formSettings.integrationSettings.googleSheets.createNewSpreadSheet"),"option-text":"name","option-value":"id",onlyDirection:"down",searchable:"",isReloadable:""},on:{change:function(e){return t.getSheetTabs(t.integration.sheetId)},reload:t.loadRelated},model:{value:t.integration.sheetId,callback:function(e){t.$set(t.integration,"sheetId",e)},expression:"integration.sheetId"}})],1),t._v(" "),t.integration.sheetId?e("h4",[t._v(t._s(t.$t("formSettings.integrationSettings.googleSheets.pleaseSelectSheets")))]):t._e(),t._v(" "),t.integration.sheetId?e("i-select",{attrs:{items:t.sheetTabs,emptyOption:t.$t("formSettings.integrationSettings.googleSheets.createNewSheet"),"option-text":"label","option-value":"title",onlyDirection:"down"},model:{value:t.integration.sheetTitle,callback:function(e){t.$set(t.integration,"sheetTitle",e)},expression:"integration.sheetTitle"}}):t._e(),t._v(" "),e("br"),t._v(" "),t.showSyncSwitch?e("i-checkbox",{attrs:{label:t.$t("formSettings.integrationSettings.syncExistingAnswers")},model:{value:t.integration.syncAnswers,callback:function(e){t.$set(t.integration,"syncAnswers",e)},expression:"integration.syncAnswers"}}):t._e(),t._v(" "),e("br"),e("br"),t._v(" "),e("i-button",{on:{click:function(e){return t.$emit("saveSettings",t.integration)}}},[t._v(t._s(t.$t("save")))])],1)],1)};n._withStripped=!0;var s,a,o,r=i("yXPU"),l=i.n(r),c=i("SwtH"),d=i("iKgg"),g=Object(d.a)("integration"),p={getSpreadSheets:t=>l()((function*(){var e=yield g.post("actions/googlesheets/getSpreadSheets",{formId:t});return 200===e.status?e.data.data:"Forbidden"===e.data.message?e.data.message:null}))(),getTabsFromSheet:(t,e)=>l()((function*(){var i=yield g.post("actions/googlesheets/getTabsfromSheet",{formId:t,sheetId:e});return 200===i.status?i.data.tabs:"Forbidden"===i.data.message?i.data.message:null}))()},u={sheetId:"",sheetTitle:"",syncAnswers:!1},f=null,m={name:"Settings",props:{form:Object,integrationId:String,showSyncSwitch:Boolean},data:function(){return{spreadSheets:[],sheetTabs:[],integration:u,isLoading:!0,tabPreloader:!1}},mounted:(o=l()((function*(){this.integration=(yield c.a.getIntegrationById(this.integrationId))||u,yield this.loadRelated(),this.integration.sheetId&&this.getSheetTabs(this.integration.sheetId)})),function(){return o.apply(this,arguments)}),methods:{getSheetTabs:(a=l()((function*(t){var e=this;t?(this.tabPreloader=!0,setTimeout(l()((function*(){var i=(yield p.getTabsFromSheet(e.form._id,t))||[];if("Forbidden"===i)e.$emit("isForbidden");else{e.sheetTabs=[];for(var n=0;n<i.length;n++)e.sheetTabs.push(i[n].properties),e.sheetTabs[n].label=i[n].properties.title;e.sheetTabs.unshift({label:e.$t("formSettings.integrationSettings.googleSheets.createNewSheet"),title:""})}e.tabPreloader=!1})),250)):this.integration.sheetTitle=""})),function(t){return a.apply(this,arguments)}),loadRelated:(s=l()((function*(){var t=this;this.isLoading=!0,clearTimeout(f),f=setTimeout(l()((function*(){var e=(yield p.getSpreadSheets(t.form._id))||[];"Forbidden"===e?t.$emit("isForbidden"):(t.spreadSheets=e,t.spreadSheets.unshift({name:t.$t("formSettings.integrationSettings.googleSheets.createNewSpreadSheet"),id:""})),t.isLoading=!1})),250)})),function(){return s.apply(this,arguments)})}},h=(i("hjK6"),i("KHd+")),v=Object(h.a)(m,n,[],!1,null,"916def10",null).exports,b=i("mSNy"),S=i("lSNA"),y=i.n(S),_=i("NRfZ"),k=(i("rB9j"),i("hByQ"),i("UxlC"),i("JfAA"),i("sjWk"));function w(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function C(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?w(Object(i),!0).forEach((function(e){y()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):w(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var x=(t,e)=>{var i=function(t,e){if(void 0===e||"object"!=typeof e)return e={};var i="?",n=0;for(var s in e){n++;var a=s,o=e[s];i+=1===n?a+"="+o:"&"+a+"="+o}return t+i}(t.baseUrl,t);if(k.a.mobileApp)k.a.openExternalIframe(i),k.a.addEventListener("externalIframeChanged",i=>{var n=c.a.getLoginUrl()+t.provider;O(C(C({},t),i),n,t.redirect_uri,t=>{e(t)}),k.a.removeEventListener("externalIframeChanged")});else var n=window.open(i,"_blank","width=580,height=450"),s=setInterval((function(){n&&!n.closed||(clearInterval(s),s=null);try{(function(t,e,i,n,s){if(e===t.redirect_uri&&(i||n)){var a=D(i.substring(1).replace(/\/$/,"")),o=(n=D(n.substring(1).replace(/[\/$]/,"")),F({},a));(o=F(o,n)).clientId=t.client_id,o=C(C({},o),t);var r=c.a.getLoginUrl()+t.provider;return O(o,r,t.redirect_uri,(function(t){s(t)})),!0}})(t,(i=n.location).protocol+"//"+i.hostname+(/^\//.test(i.pathname)?i.pathname:"/"+i.pathname),n.location.search,n.location.hash,t=>{e(t),n.close()})&&(clearInterval(s),s=null)}catch(t){}var i}),250)};function F(t,e){return null==t||null==e||Object.keys(e).forEach((function(i){"[object Object]"===Object.prototype.toString.call(e[i])?"[object Object]"!==Object.prototype.toString.call(t[i])?t[i]=e[i]:t[i]=F(t[i],e[i]):t[i]=e[i]})),t}function D(t){for(var e,i={},n=(t||"").split("&"),s=0;s<n.length;s++){var a=n[s];a&&(e=a.split("="),i[decodeURIComponent(e[0])]=!e[1]||decodeURIComponent(e[1]))}return i}function O(t,e,i,n){var s=new XMLHttpRequest;s.open("POST",e),s.setRequestHeader("Content-Type","application/json"),t.redirectUri=i,s.onreadystatechange=function(){n(s.status)},s.setRequestHeader("Authorization","Bearer "+localStorage.getItem("authToken")),s.send(JSON.stringify(t))}function q(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var $=window.location.protocol+"//"+window.location.hostname,M=(t,e,i,n)=>{var s=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?q(Object(i),!0).forEach((function(e){y()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):q(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({baseUrl:"https://accounts.google.com/o/oauth2/auth",provider:t,client_id:_.a.integrationAuth.google.clientId,redirect_uri:$+"/auth/google/callback",display:"popup",scope:"openid "+e,response_type:"code",prompt:"consent",access_type:"offline"},i);x(s,n)},N={name:"googlesheets",authName:"Google",displayName:"Google Sheets",description:b.default.t("formSettings.integrationSettings.googleSheets.description"),logo:"/static/img/integrations/googlesheets.svg",settingsView:v,webhookTrigger:!0,explanationHeader:b.default.t("formSettings.integrationSettings.googleSheets.explanationHeader"),explanationOption1:b.default.t("formSettings.integrationSettings.googleSheets.explanationOption1"),explanationOption2:b.default.t("formSettings.integrationSettings.googleSheets.explanationOption2"),explanationFooter1:b.default.t("formSettings.integrationSettings.googleSheets.explanationFooter1"),explanationFooter2:b.default.t("formSettings.integrationSettings.googleSheets.explanationFooter2"),categories:["filemanagement","anr","productivity","all"],helpUrl:"https://forms.app/en/help-center/google-sheets-integration",login:(t,e)=>{M("googlesheets","https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/spreadsheets https://www.googleapis.com/auth/drive.file",{formId:t.formId},e)}},I=function(){var t=this,e=t._self._c;return e("div",{staticClass:"slack-settings-wrapper",class:{disabled:0===t.channels.length}},[t.isLoading?e("i-preloader"):e("div",[e("div",{staticClass:"attribute"},[e("h4",[t._v(t._s(t.$t("formSettings.integrationSettings.slack.pleaseSelectChannel")))]),t._v(" "),e("div",{staticClass:"select-wrapper"},[e("i-select",{attrs:{items:t.channels,emptyOption:t.$t("questionTypes.pleaseSelect"),infiniteScroll:25,"option-text":"name","option-value":"id",onlyDirection:"down",isReloadable:"",searchable:""},on:{nextPage:t.getConversations,reload:t.loadRelated},model:{value:t.integration.channel,callback:function(e){t.$set(t.integration,"channel",e)},expression:"integration.channel"}})],1)])]),t._v(" "),e("div",{staticClass:"attribute"},[e("h4",[t._v(t._s(t.$t("formSettings.integrationSettings.slack.pleaseSelectQuestions")))]),t._v(" "),e("i-select",{ref:"question",staticClass:"question-select",attrs:{items:t.questions,multiple:"","option-text":"question","option-value":"_id",onlyDirection:"down"},on:{change:t.changeQuestionSelect},scopedSlots:t._u([{key:"default",fn:function(i){return[i.item.questionNumber?e("b",[t._v(t._s(t.questionNumber(i.item)))]):t._e(),t._v(" "+t._s(t.BbCode.cleanTextFromBBCode(i.item.question))+"\n\t\t\t")]}},{key:"input",fn:function(i){return[e("div",{staticClass:"f-select"},[i.item.length!==t.questions.length?t._l(i.item,(function(i){return e("div",{key:i},[t.form.questionsMap[i]&&""!==t.form.questionsMap[i].questionNumber?e("span",[e("b",{staticClass:"selected-item"},[t._v(t._s(t.form.questionsMap[i].questionNumber)+".")]),t._v(" "+t._s(t.BbCode.cleanTextFromBBCode(t.form.questionsMap[i].question))+"\n\t\t\t\t\t\t\t")]):t._e()])})):i.item.length===t.questions.length?[t._v("\n\t\t\t\t\t\t"+t._s(t.$t("formSettings.integrationSettings.all"))+"\n\t\t\t\t\t")]:t._e()],2)]}}]),model:{value:t.integration.questions,callback:function(e){t.$set(t.integration,"questions",e)},expression:"integration.questions"}})],1),t._v(" "),e("div",{staticClass:"text-center"},[e("i-button",{on:{click:t.saveSettings}},[t._v(t._s(t.$t("save")))])],1)],1)};I._withStripped=!0;var j,P,T=Object(d.a)("integration"),B={getConversations:(t,e)=>l()((function*(){var i=yield T.post("actions/slack/getConversations",{formId:t,cursor:e});return 200===i.status?i.data.data:null}))()},E=i("RuLz"),L=i("K/kh"),Q=i("qe/e"),A=function(t){var e={questions:[],questionsMap:{}};return t.questions.forEach(t=>{var i=L.a.getQuestionTypeByTypeName(t.questionType.toLowerCase());if(i&&i.answerable){var n=t.question,s=t.questionType;t[s]&&t[s].subType&&(s=t[s].subType);var a=Q.a.findRecallIds(t.question);a&&a.length>0&&a.forEach(t=>{n=Q.a.replaceRecallText(n,t)});var o=t.viewHelpers?t.viewHelpers.questionNumber:e.questions.length+1;e.questions.push({question:n,_id:t._id,questionType:s,questionNumber:o}),e.questionsMap[t._id]={question:n,questionNumber:o}}}),e},V=L.a.getAllQuestionTypes(),R={channel:"",questions:[]},z={name:"Settings",props:{form:Object,integrationId:String},data:function(){return{BbCode:E.b,channels:[],integration:R,questions:[],questionsMap:{},isLoading:!0,nextCursor:null}},created:(P=l()((function*(){var t=A(this.form);if(this.questions=t.questions,this.questionsMap=t.questionsMap,this.integration=(yield c.a.getIntegrationById(this.integrationId))||R,this.integration.questions.length<=0)for(var e=0;e<this.questions.length;e++)this.integration.questions.push(this.questions[e]._id);yield this.getConversations(),this.isLoading=!1})),function(){return P.apply(this,arguments)}),methods:{changeQuestionSelect:function(t){t&&0===t.length&&this.$refs.question.close()},saveSettings:function(){this.integration._id=this.integrationId,this.integration.questions.length===this.questions.length&&(this.integration.questions=[]),this.$emit("saveSettings",this.integration)},getConversations:(j=l()((function*(t){if((!(this.channels.length>0)||this.nextCursor)&&(!t||""!==this.nextCursor)){var e=(yield B.getConversations(this.form._id,this.nextCursor))||{};e&&e.channels&&(this.channels=this.channels.concat(e.channels),this.nextCursor=e.cursor)}})),function(t){return j.apply(this,arguments)}),questionNumber:function(t){var e=V[t.questionType],i=t.questionNumber;return e&&e.fixQuestionNumber&&e.fixQuestionNumber(i,t)===i?"- ":i+"."},loadRelated:function(){var t=l()((function*(){this.isLoading=!0,yield this.getConversations(),this.isLoading=!1}));return function(){return t.apply(this,arguments)}}()}},H=(i("Eo0T"),Object(h.a)(z,I,[],!1,null,"4b50cb92",null).exports),Z=i("ttAG");function W(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var U=window.location.protocol+"//"+window.location.hostname,X=(t,e,i,n)=>{var s=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?W(Object(i),!0).forEach((function(e){y()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):W(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({baseUrl:"https://slack.com/oauth/v2/authorize",provider:t,redirect_uri:U+"/auth/slack/callback",client_id:_.a.integrationAuth.slack.clientId,scope:e},i);x(s,n)},G={name:"slack",authName:"Slack",displayName:"Slack",description:b.default.t("formSettings.integrationSettings.slack.description"),logo:"/static/img/integrations/slack.svg",settingsView:H,webhookTrigger:!0,explanationHeader:b.default.t("formSettings.integrationSettings.slack.explanationHeader"),explanationOption1:b.default.t("formSettings.integrationSettings.slack.explanationOption1"),explanationFooter1:b.default.t("formSettings.integrationSettings.slack.explanationFooter1"),explanationFooter2:b.default.t("formSettings.integrationSettings.slack.explanationFooter2"),helpUrl:"https://forms.app/en/help-center/slack-integration",categories:["marketingautomation","teamcollaboration","all"],login:(t,e)=>{X("slack","chat:write, channels:read, users:read, im:read, im:write, groups:read, channels:join",{formId:t.formId,state:Z.default.randomNumberGenerate(0,9,12).join("")},e)}},K=function(){var t=this,e=t._self._c;return e("div",{staticClass:"googlecalendar-settings-wrapper"},[t.isLoading?e("i-preloader"):e("div",{staticClass:"attribute",class:{disabled:0===t.calendars.length}},[e("h4",[t._v(t._s(t.$t("formSettings.integrationSettings.googleCalendar.pleaseSelectCalendar")))]),t._v(" "),e("div",{staticClass:"select-wrapper"},[e("i-select",{attrs:{items:t.calendars,emptyOption:t.$t("formSettings.integrationSettings.googleCalendar.createNewCalendar"),"option-text":"summary","option-value":"id",onlyDirection:"down",isReloadable:""},on:{reload:t.loadRelated},model:{value:t.calendarId,callback:function(e){t.calendarId=e},expression:"calendarId"}})],1),t._v(" "),e("h4",[t._v(t._s(t.$t("formSettings.integrationSettings.googleCalendar.matchTitle")))]),t._v(" "),e("label",{staticClass:"setting-title",attrs:{for:""}},[t._v(t._s(t.$t("formSettings.integrationSettings.googleCalendar.titleField")))]),t._v(" "),e("TagEditor",{attrs:{form:t.form,singleLine:"",noTextStyle:"",variables:t.questionVariables},model:{value:t.integration.eventTitle,callback:function(e){t.$set(t.integration,"eventTitle",e)},expression:"integration.eventTitle"}}),t._v(" "),e("div",{staticClass:"design-input-wrapper"},[e("div",{staticClass:"design-input"},[e("label",{staticClass:"setting-title",attrs:{for:""}},[t._v(t._s(t.$t("formSettings.integrationSettings.googleCalendar.startTimeField")))]),t._v(" "),e("i-select",{attrs:{items:t.startDateVariables,emptyOption:t.$t("formSettings.integrationSettings.googleCalendar.selectTime"),"option-text":"label","option-value":"value",onlyDirection:"down"},model:{value:t.integration.eventStartDate,callback:function(e){t.$set(t.integration,"eventStartDate",e)},expression:"integration.eventStartDate"}})],1),t._v(" "),e("div",{staticClass:"design-input"},[e("label",{staticClass:"setting-title",attrs:{for:""}},[t._v(t._s(t.$t("formSettings.integrationSettings.googleCalendar.endTimeField")))]),t._v(" "),e("i-select",{attrs:{items:t.endDateVariables,emptyOption:t.$t("formSettings.integrationSettings.googleCalendar.selectTime"),"option-text":"label","option-value":"value",onlyDirection:"down"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1),t._v(" "),t.startDateVariables.length<1?e("i-alert",{attrs:{type:"warning"}},[t._v("\n\t\t\t\t"+t._s(t.$t("formSettings.integrationSettings.googleCalendar.mustHaveDate"))+"\n\t\t\t\t"),e("a",{attrs:{target:"_blank"},on:{click:function(e){return t.addDateField()}}},[t._v(t._s(t.$t("formSettings.integrationSettings.googleCalendar.addDateField")))])]):t._e()],1),t._v(" "),e("label",{staticClass:"setting-title",attrs:{for:""}},[t._v(t._s(t.$t("formSettings.integrationSettings.googleCalendar.locationField")))]),t._v(" "),e("TagEditor",{attrs:{form:t.form,singleLine:"",noTextStyle:"",variables:t.questionVariables},model:{value:t.integration.eventLocation,callback:function(e){t.$set(t.integration,"eventLocation",e)},expression:"integration.eventLocation"}}),t._v(" "),e("label",{staticClass:"setting-title",attrs:{for:""}},[t._v(t._s(t.$t("formSettings.integrationSettings.googleCalendar.descriptionField")))]),t._v(" "),e("TagEditor",{staticClass:"description-field",attrs:{form:t.form,noTextStyle:"",variables:t.questionVariables},model:{value:t.integration.eventDescription,callback:function(e){t.$set(t.integration,"eventDescription",e)},expression:"integration.eventDescription"}}),t._v(" "),e("div",{staticClass:"text-center"},[e("i-button",{class:{disabled:!t.isValid},on:{click:function(e){return t.$emit("saveSettings",t.integration)}}},[t._v(t._s(t.$t("save")))])],1)],1)],1)};K._withStripped=!0;i("4mDm"),i("3bBZ");var J=Object(d.a)("integration"),Y={getCalendars:t=>l()((function*(){var e=yield J.post("actions/googlecalendar/getCalendars",{formId:t});return 200===e.status?e.data.data:"Forbidden"===e.data.message?e.data.message:null}))()},tt=i("RI16"),et=i("Gppw"),it=i.n(et),nt={date:[L.a.getAllQuestionTypes().date]},st=function(t,e,i){var n=!0;return t&&(e||i)||(n=!1),n},at=function(t){var e=nt[t];return e?e[0].name:""},ot={calendarId:"",calendarTimeZone:"",eventTitle:"",eventStartDate:"",eventEndDate:"",eventLocation:"",eventDescription:"",eventDuration:0},rt=null,lt={name:"Settings",components:{TagEditor:tt.a},props:{form:Object,integrationId:String,questionsSaveModel:Object},data:function(){return{calendars:[],integration:ot,isLoading:!0,questionVariables:[],startDateVariables:[],endDateVariables:[],isValid:!1}},mounted:function(){var t=l()((function*(){this.fixQuestions(),this.integration=(yield c.a.getIntegrationById(this.integrationId))||ot,this.loadRelated()}));return function(){return t.apply(this,arguments)}}(),computed:{endDate:{get:function(){return this.integration.eventDuration||this.integration.eventEndDate},set:function(t){"number"==typeof t?(this.integration.eventEndDate="",this.integration.eventDuration=t):(this.integration.eventDuration=0,this.integration.eventEndDate=t)}},calendarId:{get:function(){this.integration.calendarId},set:function(t){for(var e=0;e<this.calendars.length;e++)t===this.calendars[e].id&&(this.integration.calendarId=t,this.integration.calendarTimeZone=this.calendars[e].timeZone)}}},methods:{fixQuestions:function(){for(var t=A(this.form),e=[],i=[5,15,30,45,60,90,120],n=t.questions.filter(t=>{var e=L.a.getQuestionTypeByTypeName(t.questionType);return!(!e||!e.answerable)}).map((t,e)=>({label:"".concat(e+1,". ").concat(E.b.cleanTextFromBBCode(t.question)),value:"q.".concat(t._id,".a")})),s=t.questions.filter(t=>"date"===t.questionType).map((t,e)=>({label:"".concat(e+1,". ").concat(E.b.cleanTextFromBBCode(t.question)),value:"{{q.".concat(t._id,".a}}")})),a=0;a<i.length;a++){var o=i[a];e.push({label:this.$t("formSettings.integrationSettings.googleCalendar.durationText",{duration:o}),value:o})}this.questionVariables=[...n],this.startDateVariables=[...s],this.endDateVariables=[...s,...e]},addDateField:function(){var t=at("date"),e=L.a.getComponentDefaults(t);if(e){var i=this.form.questions;e.displayOrder=i.length,e._id=it()().toHexString(),e.viewHelpers={questionNumber:i.length+1},e.isActive=!0,e.isDeleted=!1,e.isRequired=!0,i.push(e),this.$set(this.questionsSaveModel.A,e._id,e),this.$root.saveForm();var n={label:"".concat(e.displayOrder+1,". ").concat(E.b.cleanTextFromBBCode(e.question)),value:"{{q.".concat(e._id,".a}}")};this.startDateVariables.push(n),this.endDateVariables.unshift(n),this.questionVariables.push(n),this.integration.eventStartDate=n.value}},loadRelated:function(){var t=this;this.isLoading=!0,clearTimeout(rt),rt=setTimeout(l()((function*(){t.calendars=(yield Y.getCalendars(t.form._id))||[],t.calendars.unshift({summary:t.$t("formSettings.integrationSettings.googleCalendar.createNewCalendar"),id:""}),t.isLoading=!1})),1e3)}},watch:{integration:{handler(){this.isValid=st(this.integration.eventStartDate,this.integration.eventEndDate,this.integration.eventDuration)},deep:!0}}},ct=(i("0nKJ"),Object(h.a)(lt,K,[],!1,null,"b43e5e60",null).exports),dt={name:"googlecalendar",authName:"Google",displayName:"Google Calendar",description:b.default.t("formSettings.integrationSettings.googleCalendar.description"),logo:"/static/img/integrations/googlecalendar.svg",settingsView:ct,webhookTrigger:!0,explanationHeader:b.default.t("formSettings.integrationSettings.googleCalendar.explanationHeader"),explanationOption1:b.default.t("formSettings.integrationSettings.googleCalendar.explanationOption1"),explanationOption2:b.default.t("formSettings.integrationSettings.googleCalendar.explanationOption2"),explanationOption3:b.default.t("formSettings.integrationSettings.googleCalendar.explanationOption3"),explanationFooter1:b.default.t("formSettings.integrationSettings.googleCalendar.explanationFooter1"),explanationFooter2:b.default.t("formSettings.integrationSettings.googleCalendar.explanationFooter2"),categories:["productivity","all"],helpUrl:"https://forms.app/en/help-center/google-calendar-integration",login:(t,e)=>{M("googlecalendar","https://www.googleapis.com/auth/calendar",{formId:t.formId},e)}},gt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"microsoftexcel-settings-wrapper"},[t.isLoading?e("i-preloader"):e("div",{staticClass:"attribute",class:{disabled:0===t.workBooks.length}},[e("h4",[t._v(t._s(t.$t("formSettings.integrationSettings.microsoftexcel.pleaseSelectWorkBook")))]),t._v(" "),e("div",{staticClass:"select-wrapper"},[e("i-select",{attrs:{items:t.workBooks,emptyOption:t.$t("formSettings.integrationSettings.microsoftexcel.createNewWorkBook"),"option-text":"name","option-value":"id",onlyDirection:"down",isReloadable:""},on:{reload:t.loadRelated},model:{value:t.integration.workBookId,callback:function(e){t.$set(t.integration,"workBookId",e)},expression:"integration.workBookId"}}),t._v(" "),t.showSyncSwitch?e("div",[e("br"),t._v(" "),e("i-checkbox",{attrs:{label:t.$t("formSettings.integrationSettings.syncExistingAnswers")},model:{value:t.integration.syncAnswers,callback:function(e){t.$set(t.integration,"syncAnswers",e)},expression:"integration.syncAnswers"}}),t._v(" "),e("br"),e("br")],1):t._e()],1),t._v(" "),e("i-button",{on:{click:function(e){return t.$emit("saveSettings",t.integration)}}},[t._v(t._s(t.$t("save")))])],1)],1)};gt._withStripped=!0;var pt=Object(d.a)("integration"),ut={getWorkBooks:t=>l()((function*(){var e=yield pt.post("actions/microsoftexcel/getWorkBooks",{formId:t});return 200===e.status?e.data.data:null}))()},ft={workBookId:"",workSheetId:"",syncAnswers:!1},mt=null,ht={name:"Settings",props:{form:Object,showSyncSwitch:Boolean,integrationId:String},data:function(){return{workBooks:[],workSheets:[],integration:ft,isLoading:!0}},mounted:function(){var t=l()((function*(){this.integration=(yield c.a.getIntegrationById(this.integrationId))||ft,yield this.loadRelated()}));return function(){return t.apply(this,arguments)}}(),methods:{loadRelated:function(){var t=l()((function*(){var t=this;this.isLoading=!0,clearTimeout(mt),mt=setTimeout(l()((function*(){t.workBooks=(yield ut.getWorkBooks(t.form._id))||[],t.workBooks.unshift({name:t.$t("formSettings.integrationSettings.microsoftexcel.createNewWorkBook"),id:""}),t.isLoading=!1})),250)}));return function(){return t.apply(this,arguments)}}()}},vt=(i("PQvI"),Object(h.a)(ht,gt,[],!1,null,"4cf3dc50",null).exports);function bt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var St=window.location.protocol+"//"+window.location.hostname,yt=(t,e,i,n)=>{var s=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?bt(Object(i),!0).forEach((function(e){y()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):bt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({baseUrl:"https://login.microsoftonline.com/common/oauth2/v2.0/authorize",provider:t,client_id:_.a.integrationAuth.microsoft.clientId,redirect_uri:St+"/auth/microsoft/callback",display:"popup",scope:"openid "+e,response_type:"code",prompt:"consent",access_type:"offline"},i);x(s,n)},_t={name:"microsoftexcel",authName:"Microsoft",displayName:"Microsoft Excel",description:b.default.t("formSettings.integrationSettings.microsoftexcel.description"),logo:"/static/img/integrations/microsoftexcel.svg",settingsView:vt,webhookTrigger:!0,explanationHeader:b.default.t("formSettings.integrationSettings.microsoftexcel.explanationHeader"),explanationOption1:b.default.t("formSettings.integrationSettings.microsoftexcel.explanationOption1"),explanationOption2:b.default.t("formSettings.integrationSettings.microsoftexcel.explanationOption2"),explanationFooter1:b.default.t("formSettings.integrationSettings.microsoftexcel.explanationFooter1"),explanationFooter2:b.default.t("formSettings.integrationSettings.microsoftexcel.explanationFooter2"),helpUrl:"https://forms.app/en/help-center/microsoft-excel-integration",categories:["anr","filemanagement","productivity","all"],login:(t,e)=>{yt("microsoftexcel","user.read Files.ReadWrite offline_access",{formId:t.formId},e)}},kt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"settings-wrapper"},[t.isLoading?e("i-preloader"):e("div",{staticClass:"fields-wrapper"},[e("div",{staticClass:"field-category"},[e("h3",[t._v(t._s(t.$t("formSettings.integrationSettings.hubspot.contact")))]),t._v(" "),e("div",{staticClass:"fields"},[e("div",{staticClass:"sub-headers"},[e("h5",[t._v(t._s(t.$t("formSettings.integrationSettings.hubspot.hubspotLabel")))]),t._v(" "),e("div",{staticClass:"ball-wrapper",staticStyle:{opacity:"0"}},[e("div",{staticClass:"ball"}),t._v(" "),e("div",{staticClass:"line"}),t._v(" "),e("div",{staticClass:"ball"})]),t._v(" "),e("h5",[t._v(t._s(t.$t("formSettings.integrationSettings.formsappFields")))])]),t._v(" "),t._l(t.integration.contactsMatches,(function(i,n){return e("div",{key:n,staticClass:"attribute field-matches"},[e("div",{staticClass:"field-matches-item"},[e("i-select",{attrs:{items:t.getSuitableFields(i.field.name,"contacts"),"option-text":"label","option-value":"name",disabled:i.field.required,value:i.field.required?i.field.name:"",onlyDirection:"down",searchable:""},on:{input:function(e){return t.getQuestionsByField(i.field.name,"contacts")},change:function(e){return t.changedFieldMatch(i,"contacts")}},model:{value:i.field.name,callback:function(e){t.$set(i.field,"name",e)},expression:"match.field.name"}}),t._v(" "),e("div",{staticClass:"ball-wrapper"},[e("div",{staticClass:"ball"}),t._v(" "),e("div",{staticClass:"line"}),t._v(" "),e("div",{staticClass:"ball"})]),t._v(" "),e("i-select",{ref:"question",refInFor:!0,staticClass:"question-select",attrs:{items:t.getQuestionsByField(i.field.name,"contacts"),"option-text":"question","option-value":"_id",onlyDirection:"down",searchable:""},on:{change:function(e){return t.changedFieldMatch(i,"contacts")}},scopedSlots:t._u([{key:"default",fn:function(i){return[i.item.viewHelpers?e("b",[t._v(t._s(t.questionNumber(i.item)))]):t._e(),t._v(" "+t._s(t.BbCode.cleanTextFromBBCode(i.item.question))+"\n\t\t\t\t\t\t\t")]}}],null,!0),model:{value:i.question,callback:function(e){t.$set(i,"question",e)},expression:"match.question"}}),t._v(" "),i.field.required?t._e():e("i-icon",{staticClass:"remove-field-mathces",attrs:{icon:"times"},on:{click:function(e){return t.removeFieldMatch(i,"contacts")}}})],1),t._v(" "),t.getQuestionsByField(i.field.name,"contacts").length<1?e("i-alert",{attrs:{type:"warning"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.$t("formSettings.integrationSettings.mustHaveField",{fieldsName:t.getQuestionDisplayNameByTag(i.field.name,"contacts").join(", ")}))+"\n\t\t\t\t\t\t"),e("a",{staticClass:"lime-text text-lighten-3",attrs:{target:"_blank"},on:{click:function(e){return t.addFormField(i.field.type,i,"contacts")}}},[t._v(t._s(t.$t("formSettings.integrationSettings.addField",{displayName:t.getQuestionDisplayNameByTag(i.field.name,"contacts")[0]})))])]):t._e()],1)}))],2),t._v(" "),t.integration&&t.integration.contactsMatches.length<t.contactsFields.length?e("i-button",{staticClass:"add-matches",attrs:{"prepend-icon":"plus"},on:{click:function(e){return t.addNewMatches("contacts")}}},[t._v("\n\t\t\t\t"+t._s(t.$t("formSettings.integrationSettings.addMore"))+"\n\t\t\t")]):t._e(),t._v(" "),e("i-checkbox",{attrs:{label:t.$t("formSettings.integrationSettings.hubspot.updateIfExists")},model:{value:t.integration.updateIfExists,callback:function(e){t.$set(t.integration,"updateIfExists",e)},expression:"integration.updateIfExists"}})],1),t._v(" "),e("hr"),t._v(" "),e("i-checkbox",{class:t.integration.createCompany?"optional-checkbox":"",attrs:{label:t.$t("formSettings.integrationSettings.hubspot.createCompany")},model:{value:t.integration.createCompany,callback:function(e){t.$set(t.integration,"createCompany",e)},expression:"integration.createCompany"}}),t._v(" "),t.integration.createCompany?e("div",{staticClass:"field-category"},[e("h3",[t._v(t._s(t.$t("formSettings.integrationSettings.hubspot.company")))]),t._v(" "),e("div",{staticClass:"fields"},[e("div",{staticClass:"sub-headers"},[e("h5",[t._v(t._s(t.$t("formSettings.integrationSettings.hubspot.hubspotLabel")))]),t._v(" "),e("div",{staticClass:"ball-wrapper",staticStyle:{opacity:"0"}},[e("div",{staticClass:"ball"}),t._v(" "),e("div",{staticClass:"line"}),t._v(" "),e("div",{staticClass:"ball"})]),t._v(" "),e("h5",[t._v(t._s(t.$t("formSettings.integrationSettings.formsappFields")))])]),t._v(" "),t._l(t.integration.companiesMatches,(function(i,n){return e("div",{key:n,staticClass:"attribute field-matches"},[e("div",{staticClass:"field-matches-item"},[e("i-select",{attrs:{items:t.getSuitableFields(i.field.name,"companies"),"option-text":"label","option-value":"name",disabled:i.field.required,value:i.field.required?i.field.name:"",onlyDirection:"down",searchable:""},on:{input:function(e){return t.getQuestionsByField(i.field.name,"companies")},change:function(e){return t.changedFieldMatch(i,"companies")}},model:{value:i.field.name,callback:function(e){t.$set(i.field,"name",e)},expression:"match.field.name"}}),t._v(" "),e("div",{staticClass:"ball-wrapper"},[e("div",{staticClass:"ball"}),t._v(" "),e("div",{staticClass:"line"}),t._v(" "),e("div",{staticClass:"ball"})]),t._v(" "),e("i-select",{ref:"question",refInFor:!0,staticClass:"question-select",attrs:{items:t.getQuestionsByField(i.field.name,"companies"),"option-text":"question","option-value":"_id",onlyDirection:"down",searchable:""},on:{change:function(e){return t.changedFieldMatch(i,"companies")}},scopedSlots:t._u([{key:"default",fn:function(i){return[i.item.viewHelpers?e("b",[t._v(t._s(t.questionNumber(i.item)))]):t._e(),t._v(" "+t._s(t.BbCode.cleanTextFromBBCode(i.item.question))+"\n\t\t\t\t\t\t\t")]}}],null,!0),model:{value:i.question,callback:function(e){t.$set(i,"question",e)},expression:"match.question"}}),t._v(" "),i.field.required?t._e():e("i-icon",{staticClass:"remove-field-mathces",attrs:{icon:"times"},on:{click:function(e){return t.removeFieldMatch(i,"companies")}}})],1),t._v(" "),t.getQuestionsByField(i.field.name,"companies").length<1?e("i-alert",{attrs:{type:"warning"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.$t("formSettings.integrationSettings.mustHaveField",{fieldsName:t.getQuestionDisplayNameByTag(i.field.name,"companies").join(", ")}))+"\n\t\t\t\t\t\t"),e("a",{staticClass:"lime-text text-lighten-3",attrs:{target:"_blank"},on:{click:function(e){return t.addFormField(i.field.type,i,"companies")}}},[t._v(t._s(t.$t("formSettings.integrationSettings.addField",{displayName:t.getQuestionDisplayNameByTag(i.field.name,"companies")[0]})))])]):t._e()],1)}))],2),t._v(" "),t.integration&&t.integration.companiesMatches.length<t.companiesFields.length?e("i-button",{staticClass:"add-matches",attrs:{"prepend-icon":"plus"},on:{click:function(e){return t.addNewMatches("companies")}}},[t._v("\n\t\t\t\t"+t._s(t.$t("formSettings.integrationSettings.addMore"))+"\n\t\t\t")]):t._e()],1):t._e(),t._v(" "),e("hr"),t._v(" "),e("i-checkbox",{class:t.integration.createDeal?"optional-checkbox":"",attrs:{label:t.$t("formSettings.integrationSettings.hubspot.createDeal")},model:{value:t.integration.createDeal,callback:function(e){t.$set(t.integration,"createDeal",e)},expression:"integration.createDeal"}}),t._v(" "),e("div",{staticClass:"field-category"},[t.integration.createDeal?e("h3",[t._v(t._s(t.$t("formSettings.integrationSettings.hubspot.deal")))]):t._e(),t._v(" "),t.integration.createDeal?e("div",{staticClass:"attribute"},[e("h4",[t._v(t._s(t.$t("formSettings.integrationSettings.hubspot.selectPipeline")))]),t._v(" "),e("i-select",{staticClass:"select-list",attrs:{items:t.dealPipelines,"option-text":"label","option-value":"id",emptyOption:t.$t("formSettings.integrationSettings.hubspot.selectPipeline"),onlyDirection:"down"},on:{input:function(e){return t.getStages()}},model:{value:t.integration.pipelineId,callback:function(e){t.$set(t.integration,"pipelineId",e)},expression:"integration.pipelineId"}})],1):t._e(),t._v(" "),t.integration.createDeal&&t.integration.pipelineId?e("div",{staticClass:"attribute"},[e("h4",[t._v(t._s(t.$t("formSettings.integrationSettings.hubspot.selectStage")))]),t._v(" "),e("i-select",{staticClass:"select-list",attrs:{items:t.stages,"option-text":"label",emptyOption:t.$t("formSettings.integrationSettings.hubspot.selectStage"),"option-value":"id",onlyDirection:"down"},model:{value:t.integration.stageId,callback:function(e){t.$set(t.integration,"stageId",e)},expression:"integration.stageId"}})],1):t._e(),t._v(" "),t.integration.createDeal&&t.integration.stageId?e("div",{staticClass:"fields"},[e("div",{staticClass:"sub-headers"},[e("h5",[t._v(t._s(t.$t("formSettings.integrationSettings.hubspot.hubspotLabel")))]),t._v(" "),e("div",{staticClass:"ball-wrapper",staticStyle:{opacity:"0"}},[e("div",{staticClass:"ball"}),t._v(" "),e("div",{staticClass:"line"}),t._v(" "),e("div",{staticClass:"ball"})]),t._v(" "),e("h5",[t._v(t._s(t.$t("formSettings.integrationSettings.formsappFields")))])]),t._v(" "),t._l(t.integration.dealsMatches,(function(i,n){return e("div",{key:n,staticClass:"attribute field-matches"},[e("div",{staticClass:"field-matches-item"},[e("i-select",{attrs:{items:t.getSuitableFields(i.field.name,"deals"),"option-text":"label","option-value":"name",disabled:i.field.required,value:i.field.required?i.field.name:"",onlyDirection:"down",searchable:""},on:{input:function(e){return t.getQuestionsByField(i.field.name,"deals")},change:function(e){return t.changedFieldMatch(i,"deals")}},model:{value:i.field.name,callback:function(e){t.$set(i.field,"name",e)},expression:"match.field.name"}}),t._v(" "),e("div",{staticClass:"ball-wrapper"},[e("div",{staticClass:"ball"}),t._v(" "),e("div",{staticClass:"line"}),t._v(" "),e("div",{staticClass:"ball"})]),t._v(" "),e("i-select",{ref:"question",refInFor:!0,staticClass:"question-select",attrs:{items:t.getQuestionsByField(i.field.name,"deals"),"option-text":"question","option-value":"_id",onlyDirection:"down",searchable:""},on:{change:function(e){return t.changedFieldMatch(i,"deals")}},scopedSlots:t._u([{key:"default",fn:function(i){return[i.item.viewHelpers?e("b",[t._v(t._s(t.questionNumber(i.item)))]):t._e(),t._v(" "+t._s(t.BbCode.cleanTextFromBBCode(i.item.question))+"\n\t\t\t\t\t\t\t")]}}],null,!0),model:{value:i.question,callback:function(e){t.$set(i,"question",e)},expression:"match.question"}}),t._v(" "),i.field.required?t._e():e("i-icon",{staticClass:"remove-field-mathces",attrs:{icon:"times"},on:{click:function(e){return t.removeFieldMatch(i,"deals")}}})],1),t._v(" "),t.getQuestionsByField(i.field.name,"deals").length<1?e("i-alert",{attrs:{type:"warning"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.$t("formSettings.integrationSettings.mustHaveField",{fieldsName:t.getQuestionDisplayNameByTag(i.field.name,"deals").join(", ")}))+"\n\t\t\t\t\t\t"),e("a",{staticClass:"lime-text text-lighten-3",attrs:{target:"_blank"},on:{click:function(e){return t.addFormField(i.field.type,i,"deals")}}},[t._v(t._s(t.$t("formSettings.integrationSettings.addField",{displayName:t.getQuestionDisplayNameByTag(i.field.name,"deals")[0]})))])]):t._e()],1)}))],2):t._e(),t._v(" "),t.integration&&t.integration.dealsMatches.length<t.dealsFields.length&&t.integration.stageId&&t.integration.createDeal?e("i-button",{staticClass:"add-matches",attrs:{"prepend-icon":"plus"},on:{click:function(e){return t.addNewMatches("deals")}}},[t._v("\n\t\t\t\t"+t._s(t.$t("formSettings.integrationSettings.addMore"))+"\n\t\t\t")]):t._e()],1),t._v(" "),e("hr"),t._v(" "),e("i-checkbox",{class:t.integration.createTicket?"optional-checkbox":"",attrs:{label:t.$t("formSettings.integrationSettings.hubspot.createTicket")},model:{value:t.integration.createTicket,callback:function(e){t.$set(t.integration,"createTicket",e)},expression:"integration.createTicket"}}),t._v(" "),t.integration.createTicket?e("i-select",{staticClass:"select-list",attrs:{items:t.ticketPipelines,"option-text":"label","option-value":"id",emptyOption:t.$t("formSettings.integrationSettings.hubspot.selectPipeline"),onlyDirection:"down"},model:{value:t.integration.ticketPipelineId,callback:function(e){t.$set(t.integration,"ticketPipelineId",e)},expression:"integration.ticketPipelineId"}}):t._e(),t._v(" "),t.integration.createTicket&&t.integration.ticketPipelineId?e("div",{staticClass:"field-category"},[e("h3",[t._v(t._s(t.$t("formSettings.integrationSettings.hubspot.ticket")))]),t._v(" "),e("div",{staticClass:"fields"},[e("div",{staticClass:"sub-headers"},[e("h5",[t._v(t._s(t.$t("formSettings.integrationSettings.hubspot.hubspotLabel")))]),t._v(" "),e("div",{staticClass:"ball-wrapper",staticStyle:{opacity:"0"}},[e("div",{staticClass:"ball"}),t._v(" "),e("div",{staticClass:"line"}),t._v(" "),e("div",{staticClass:"ball"})]),t._v(" "),e("h5",[t._v(t._s(t.$t("formSettings.integrationSettings.formsappFields")))])]),t._v(" "),t._l(t.integration.ticketsMatches,(function(i,n){return e("div",{key:n,staticClass:"attribute field-matches"},[e("div",{staticClass:"field-matches-item"},[e("i-select",{attrs:{items:t.getSuitableFields(i.field.name,"tickets"),"option-text":"label","option-value":"name",disabled:i.field.required,value:i.field.required?i.field.name:"",onlyDirection:"down",searchable:""},on:{input:function(e){return t.getQuestionsByField(i.field.name,"tickets")},change:function(e){return t.changedFieldMatch(i,"tickets")}},model:{value:i.field.name,callback:function(e){t.$set(i.field,"name",e)},expression:"match.field.name"}}),t._v(" "),e("div",{staticClass:"ball-wrapper"},[e("div",{staticClass:"ball"}),t._v(" "),e("div",{staticClass:"line"}),t._v(" "),e("div",{staticClass:"ball"})]),t._v(" "),e("i-select",{ref:"question",refInFor:!0,staticClass:"question-select",attrs:{items:t.getQuestionsByField(i.field.name,"tickets"),"option-text":"question","option-value":"_id",onlyDirection:"down",searchable:""},on:{change:function(e){return t.changedFieldMatch(i,"tickets")}},scopedSlots:t._u([{key:"default",fn:function(i){return[i.item.viewHelpers?e("b",[t._v(t._s(t.questionNumber(i.item)))]):t._e(),t._v(" "+t._s(t.BbCode.cleanTextFromBBCode(i.item.question))+"\n\t\t\t\t\t\t\t")]}}],null,!0),model:{value:i.question,callback:function(e){t.$set(i,"question",e)},expression:"match.question"}}),t._v(" "),i.field.required?t._e():e("i-icon",{staticClass:"remove-field-mathces",attrs:{icon:"times"},on:{click:function(e){return t.removeFieldMatch(i,"tickets")}}})],1),t._v(" "),t.getQuestionsByField(i.field.name,"tickets").length<1?e("i-alert",{attrs:{type:"warning"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.$t("formSettings.integrationSettings.mustHaveField",{fieldsName:t.getQuestionDisplayNameByTag(i.field.name,"tickets").join(", ")}))+"\n\t\t\t\t\t\t"),e("a",{staticClass:"lime-text text-lighten-3",attrs:{target:"_blank"},on:{click:function(e){return t.addFormField(i.field.type,i,"tickets")}}},[t._v(t._s(t.$t("formSettings.integrationSettings.addField",{displayName:t.getQuestionDisplayNameByTag(i.field.name,"tickets")[0]})))])]):t._e()],1)}))],2),t._v(" "),t.integration&&t.integration.ticketsMatches.length<t.ticketsFields.length?e("i-button",{staticClass:"add-matches",attrs:{"prepend-icon":"plus"},on:{click:function(e){return t.addNewMatches("tickets")}}},[t._v("\n\t\t\t\t"+t._s(t.$t("formSettings.integrationSettings.addMore"))+"\n\t\t\t")]):t._e()],1):t._e()],1),t._v(" "),t.isLoading?t._e():e("div",{staticClass:"text-center"},[e("i-button",{class:{disabled:!t.isValid},on:{click:function(e){return t.$emit("saveSettings",t.integration)}}},[t._v(t._s(t.$t("save")))])],1)],1)};kt._withStripped=!0;var wt,Ct=Object(d.a)("integration"),xt={getProperties:(t,e)=>l()((function*(){var i=yield Ct.post("actions/hubspot/getProperties",{formId:t,type:e});return 200===i.status?i.data.data:null}))(),getPipelines:(t,e)=>l()((function*(){var i=yield Ct.post("actions/hubspot/getPipelines",{formId:t,type:e});return 200===i.status?i.data.data:null}))()},Ft=L.a.getAllQuestionTypes(),Dt={string:[Ft.shorttext,Ft.longtext,Ft.maskedtext,Ft.fullname,Ft.email,Ft.address,Ft.phone,Ft.imageupload,Ft.signature,Ft.drawing,Ft.fileupload,Ft.dropdown,Ft.singlechoice,Ft.yesno,Ft.address,Ft.number,Ft.date],number:[Ft.number],bool:[Ft.singlechoice,Ft.yesno,Ft.dropdown],date:[Ft.date],dateTime:[Ft.date],enumeration:[Ft.singlechoice,Ft.multiplechoice,Ft.grid,Ft.shorttext,Ft.dropdown,Ft.yesno]},Ot=function(t,e){return e.filter(e=>{var i=e.questionType;return e[i]&&e[i].subType&&(i=e[i].subType),!!Dt[t].find(t=>t.name===i.toLowerCase())})},qt=function(t){var e=Ft[t.questionType],i=t.questionNumber;return e&&e.fixQuestionNumber&&e.fixQuestionNumber(i,t)===i?"- ":i+"."},$t=function(t,e){var i=!0;if(!t||!e)return i=!1;if(t.length<0)return i=!1;for(var n,s=function(){var n=t[a];return n.question&&n.field&&n.field.name&&n.field.type&&n.field.label?void(e.find(t=>t.name===n.field.name)&&(i=!0)):{v:i=!1}},a=0;a<t.length;a++)if(n=s())return n.v;return i},Mt=function(t){for(var e=[],i=Dt[t],n=0;n<i.length;n++)e.push(i[n].displayName);return e},Nt=function(t){var e=Dt[t];return e?e[0].name:""},It={contactsMatches:[],companiesMatches:[],dealsMatches:[],ticketsMatches:[],pipelineId:"",stageId:"",ticketPipelineId:"",updateIfExists:!1,createCompany:!1,createDeal:!1,createTicket:!1},jt={name:"Settings",props:{form:Object,saveModel:Object,questionsSaveModel:Object,integrationId:String},data:function(){return{BbCode:E.b,lists:[],contactsFields:[],companiesFields:[],dealsFields:[],ticketsFields:[],dealPipelines:[],ticketPipelines:[],stages:[],integration:It,isLoading:!0,isValid:!1,questions:[]}},created:function(){var t=l()((function*(){this.fixQuestions(),this.integration=(yield c.a.getIntegrationById(this.integrationId))||It,yield this.getFields("contacts"),yield this.getFields("companies"),yield this.getFields("deals"),yield this.getFields("tickets"),this.dealPipelines=(yield xt.getPipelines(this.form._id,"deals"))||[],this.ticketPipelines=(yield xt.getPipelines(this.form._id,"tickets"))||[],this.getStages(),this.isLoading=!1}));return function(){return t.apply(this,arguments)}}(),methods:{fixQuestions:function(){var t=A(this.form);this.questions=t.questions},getFields:(wt=l()((function*(t){if(this[t+"Fields"]=(yield xt.getProperties(this.form._id,t))||[],this.integration[t+"Matches"].length<1&&(this.integration[t+"Matches"]=[],this[t+"Fields"]&&this[t+"Fields"].length>0))for(var e=0;e<this[t+"Fields"].length;e++){var i=this[t+"Fields"][e];if("email"===i.name){var n=this.getQuestionsByField(i.name,t)||[];this.integration[t+"Matches"].push({field:{type:i.type,label:i.label,name:i.name,required:!0},question:n[0]?n[0]._id:""})}}})),function(t){return wt.apply(this,arguments)}),getQuestionsByField:function(t,e){if(this[e+"Fields"]&&this[e+"Fields"].length>0){var i=this[e+"Fields"].find(e=>e.name===t);if(i)return Ot(i.type,this.questions)}return[]},getStages:function(){if(this.integration.pipelineId){var t=this.dealPipelines.find(t=>t.id===this.integration.pipelineId);this.stages=t.stages}},getSuitableFields:function(t,e){return this[e+"Fields"].filter(i=>{if(!this.integration[e+"Matches"].find(t=>t.field.name===i.name)||i.name===t)return!0})},removeFieldMatch:function(t,e){var i=this.integration[e+"Matches"].findIndex(e=>e.field.name===t.field.name);i>-1&&this.integration[e+"Matches"].splice(i,1)},changedFieldMatch:function(t,e){if(this[e+"Fields"]&&this[e+"Fields"].length>0){var i=this[e+"Fields"].find(e=>e.name===t.field.name);t.field.label=i.label,t.field.name=i.name,t.field.type=i.type}},addNewMatches:function(t){var e=JSON.parse(JSON.stringify(this.getSuitableFields("",t)));e&&this.integration[t+"Matches"].push({field:{label:e[0].label,name:e[0].name,type:e[0].type},question:""})},questionNumber:function(t){return qt(t)},saveSettings:function(){$t(this.integration.contactsMatches,this.contactsFields)&&(this.integration._id=this.integrationId,this.$emit("saveSettings",this.integration))},getQuestionDisplayNameByTag:function(t,e){if(this[e+"Fields"]&&this[e+"Fields"].length>0){var i=this[e+"Fields"].find(e=>e.name===t);if(i)return Mt(i.type)}return[]},addFormField:function(t,e,i){var n=Nt(t),s=L.a.getComponentDefaults(n);if(s){var a=this.form.questions;s.displayOrder=a.length,s.viewHelpers={questionNumber:a.length+1},s._id=it()().toHexString(),s.isActive=!0,s.isDeleted=!1,s.isRequired=!0,a.push(s),this.$set(this.questionsSaveModel.A,s._id,s),this.$root.saveForm(),e.question=s._id,this.fixQuestions(),this.getQuestionsByField(e.field.name,i)}}},watch:{integration:{handler(){this.isValid=$t(this.integration.contactsMatches,this.contactsFields),this.integration.createCompany&&(this.isValid=$t(this.integration.companiesMatches,this.companiesFields)),this.integration.createDeal&&(this.isValid=$t(this.integration.dealsMatches,this.dealsFields)),this.integration.createTicket&&(this.isValid=$t(this.integration.ticketsMatches,this.ticketsFields))},deep:!0},"integration.createDeal":{handler(){var t=this;return l()((function*(){t.integration.createDeal&&(t.integration.pipelineId||(t.dealPipelines=(yield xt.getPipelines(t.form._id,"deals"))||[],t.integration.dealsMatches.length<1&&t.addNewMatches("deals")))}))()}},"integration.createCompany":{handler(){var t=this;return l()((function*(){t.integration.createCompany&&t.integration.companiesMatches.length<1&&t.addNewMatches("companies")}))()}},"integration.createTicket":{handler(){var t=this;return l()((function*(){t.integration.createTicket&&(t.integration.pipelineId||(t.ticketPipelines=(yield xt.getPipelines(t.form._id,"tickets"))||[],t.integration.ticketsMatches.length<1&&t.addNewMatches("tickets")))}))()}}}},Pt=(i("HR9P"),Object(h.a)(jt,kt,[],!1,null,"4b9fcd62",null).exports);function Tt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var Bt=window.location.protocol+"//"+window.location.hostname,Et=(t,e,i,n)=>{var s=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Tt(Object(i),!0).forEach((function(e){y()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Tt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({baseUrl:"https://app.hubspot.com/oauth/authorize",provider:t,redirect_uri:Bt+"/auth/hubspot/callback",client_id:_.a.integrationAuth.hubspot.clientId,scope:e},i);x(s,n)},Lt={name:"hubspot",authName:"HubSpot",displayName:"HubSpot",description:b.default.t("formSettings.integrationSettings.hubspot.description"),logo:"/static/img/integrations/hubspot.svg",settingsView:Pt,webhookTrigger:!0,explanationHeader:b.default.t("formSettings.integrationSettings.hubspot.explanationHeader"),explanationOption1:b.default.t("formSettings.integrationSettings.hubspot.explanationOption1"),explanationFooter1:b.default.t("formSettings.integrationSettings.hubspot.explanationFooter1"),explanationFooter2:b.default.t("formSettings.integrationSettings.hubspot.explanationFooter2"),helpUrl:"https://forms.app/en/help-center/hubspot-integration",categories:["customersupport","cms","crm","leadgeneration","marketingautomation","all","emailmarketing"],login:(t,e)=>{Et("hubspot","crm.objects.contacts.read crm.objects.contacts.write crm.schemas.contacts.read crm.schemas.contacts.write crm.objects.companies.read crm.objects.companies.write crm.schemas.companies.read crm.schemas.companies.write crm.objects.deals.read crm.objects.deals.write crm.schemas.deals.read crm.schemas.deals.write tickets",{formId:t.formId},e)}},Qt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"discord-settings-wrapper"},[t.isLoading?e("i-preloader"):e("div",{staticClass:"attribute",class:{disabled:0===t.channels.length}},[e("h4",[t._v(t._s(t.$t("formSettings.integrationSettings.discord.pleaseSelectChannel")))]),t._v(" "),e("div",{staticClass:"select-wrapper"},[e("i-select",{attrs:{items:t.channels,emptyOption:t.$t("formSettings.integrationSettings.discord.createNewChannel"),"option-text":"name","option-value":"id",onlyDirection:"down",isReloadable:""},on:{reload:t.loadRelated},model:{value:t.integration.channelId,callback:function(e){t.$set(t.integration,"channelId",e)},expression:"integration.channelId"}})],1),t._v(" "),e("h4",[t._v(t._s(t.$t("formSettings.integrationSettings.discord.pleaseSelectQuestions")))]),t._v(" "),e("i-select",{ref:"question",staticClass:"question-select",attrs:{multiple:"",maxSelectSize:t.questionLimit,items:t.questions,"option-text":"question","option-value":"_id",onlyDirection:"down"},scopedSlots:t._u([{key:"default",fn:function(i){return[i.item.questionNumber?e("b",[t._v(t._s(t.questionNumber(i.item)))]):t._e(),t._v(" "+t._s(t.BbCode.cleanTextFromBBCode(i.item.question))+"\n\t\t\t")]}},{key:"input",fn:function(i){return[e("div",{staticClass:"f-select"},[0===i.item.length?[t._v("\n\t\t\t\t\t\t"+t._s(t.$t("formSettings.integrationSettings.selectFields"))+"\n\t\t\t\t\t")]:i.item.length!==t.questions.length?t._l(i.item,(function(i){return e("div",{key:i},[""!==t.questionsMap[i].questionNumber?e("b",{staticClass:"selected-item"},[t._v(t._s(t.questionsMap[i].questionNumber)+".")]):t._e(),t._v(" "+t._s(t.BbCode.cleanTextFromBBCode(t.questionsMap[i].question))+"\n\t\t\t\t\t\t")])})):i.item.length===t.questions.length?[t._v("\n\t\t\t\t\t\t"+t._s(t.$t("formSettings.integrationSettings.all"))+"\n\t\t\t\t\t")]:t._e()],2)]}}]),model:{value:t.integration.questions,callback:function(e){t.$set(t.integration,"questions",e)},expression:"integration.questions"}}),t._v(" "),t.questions.length>t.questionLimit?e("i-alert",{attrs:{type:"info"}},[t._v(t._s(t.$t("formSettings.integrationSettings.questionLimit")))]):t._e(),t._v(" "),e("i-button",{on:{click:function(e){return t.$emit("saveSettings",t.integration)}}},[t._v(t._s(t.$t("save")))])],1)],1)};Qt._withStripped=!0;var At=Object(d.a)("integration"),Vt={getChannels:t=>l()((function*(){var e=yield At.post("actions/discord/getChannels",{formId:t});return 200===e.status?e.data.data:null}))()},Rt=L.a.getAllQuestionTypes(),zt={channelId:"",questions:[]},Ht=null,Zt={name:"Settings",props:{form:Object,integrationId:String},data:function(){return{BbCode:E.b,channels:[],questions:[],questionsMap:{},integration:zt,isLoading:!0,questionLimit:_.a.discordQuestionLimit}},created:function(){var t=l()((function*(){var t=A(this.form);if(this.questions=t.questions,this.questionsMap=t.questionsMap,this.integration=(yield c.a.getIntegrationById(this.integrationId))||zt,this.integration.questions.length<=0&&this.questions.length<=this.questionLimit)for(var e=0;e<this.questions.length;e++)this.integration.questions.push(this.questions[e]._id);this.loadRelated()}));return function(){return t.apply(this,arguments)}}(),methods:{questionNumber:function(t){var e=Rt[t.questionType],i=t.questionNumber;return e&&e.fixQuestionNumber&&e.fixQuestionNumber(i,t)===i?"- ":i+"."},loadRelated:function(){var t=this;this.isLoading=!0,clearTimeout(Ht),Ht=setTimeout(l()((function*(){t.channels=(yield Vt.getChannels(t.form._id))||[],t.channels.unshift({name:t.$t("formSettings.integrationSettings.discord.createNewChannel"),id:""}),t.isLoading=!1})),250)}}},Wt=(i("yIN+"),Object(h.a)(Zt,Qt,[],!1,null,"00005791",null).exports);function Ut(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var Xt=window.location.protocol+"//"+window.location.hostname,Gt=(t,e,i,n)=>{var s=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ut(Object(i),!0).forEach((function(e){y()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ut(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({baseUrl:"https://discord.com/api/v8/oauth2/authorize",provider:t,client_id:_.a.integrationAuth.discord.clientId,permissions:"3088",redirect_uri:Xt+"/auth/discord/callback",display:"popup",scope:e,response_type:"code"},i);x(s,n)},Kt={name:"discord",authName:"Discord",displayName:"Discord",description:b.default.t("formSettings.integrationSettings.discord.description"),logo:"/static/img/integrations/discord.svg",settingsView:Wt,helpUrl:"https://forms.app/en/help-center/discord-integration",webhookTrigger:!0,explanationHeader:b.default.t("formSettings.integrationSettings.discord.explanationHeader"),explanationOption1:b.default.t("formSettings.integrationSettings.discord.explanationOption1"),explanationOption2:b.default.t("formSettings.integrationSettings.discord.explanationOption2"),explanationFooter1:b.default.t("formSettings.integrationSettings.discord.explanationFooter1"),explanationFooter2:b.default.t("formSettings.integrationSettings.discord.explanationFooter2"),categories:["marketingautomation","teamcollaboration","all"],login:(t,e)=>{Gt("discord","bot",{formId:t.formId},e)}},Jt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mailchimp-settings-wrapper"},[t.isLoading?e("i-preloader"):e("div",{staticClass:"fields-wrapper"},[e("div",{staticClass:"attribute"},[e("h4",[t._v(t._s(t.$t("formSettings.integrationSettings.mailchimp.selectList")))]),t._v(" "),e("div",{staticClass:"select-wrapper"},[e("i-select",{staticClass:"select-list",attrs:{items:t.lists,"option-text":"name","option-value":"id",onlyDirection:"down",isReloadable:""},on:{input:t.getFieldsByList,reload:t.loadRelated},model:{value:t.integration.listId,callback:function(e){t.$set(t.integration,"listId",e)},expression:"integration.listId"}})],1)]),t._v(" "),!t.isLoading&&t.integration.listId&&t.mailchimpFields?e("div",[e("div",{staticClass:"fields"},[e("div",{staticClass:"sub-headers"},[e("h5",[t._v(t._s(t.$t("formSettings.integrationSettings.mailchimp.mailchimpFields")))]),t._v(" "),e("div",{staticClass:"ball-wrapper",staticStyle:{opacity:"0"}},[e("div",{staticClass:"ball"}),t._v(" "),e("div",{staticClass:"line"}),t._v(" "),e("div",{staticClass:"ball"})]),t._v(" "),e("h5",[t._v(t._s(t.$t("formSettings.integrationSettings.formsappFields")))])]),t._v(" "),t._l(t.integration.fieldMatches,(function(i,n){return e("div",{key:n,staticClass:"attribute mailchimp-field-matches"},[e("div",{staticClass:"mailchimp-field-matches-item"},[e("i-select",{attrs:{items:t.getSuitableMailchimpFields(i.field.tag),"option-text":"name","option-value":"tag",disabled:i.field.required,value:i.field.required?i.field.tag:"",onlyDirection:"down"},on:{input:function(e){return t.getQuestionsByField(i.field.tag)},change:function(e){return t.changedFieldMatch(i)}},model:{value:i.field.tag,callback:function(e){t.$set(i.field,"tag",e)},expression:"match.field.tag"}}),t._v(" "),e("div",{staticClass:"ball-wrapper"},[e("div",{staticClass:"ball"}),t._v(" "),e("div",{staticClass:"line"}),t._v(" "),e("div",{staticClass:"ball"})]),t._v(" "),e("i-select",{ref:"question",refInFor:!0,staticClass:"question-select",attrs:{items:t.getQuestionsByField(i.field.tag),"option-text":"question","option-value":"_id",onlyDirection:"down"},on:{change:function(e){return t.changedFieldMatch(i)}},scopedSlots:t._u([{key:"default",fn:function(i){return[i.item.viewHelpers?e("b",[t._v(t._s(t.questionNumber(i.item)))]):t._e(),t._v(" "+t._s(t.BbCode.cleanTextFromBBCode(i.item.question))+"\n\t\t\t\t\t\t\t")]}}],null,!0),model:{value:i.question,callback:function(e){t.$set(i,"question",e)},expression:"match.question"}}),t._v(" "),i.field.required?t._e():e("i-icon",{staticClass:"remove-field-mathces",attrs:{icon:"times"},on:{click:function(e){return t.removeFieldMatch(i)}}})],1),t._v(" "),t.getQuestionsByField(i.field.tag).length<1?e("i-alert",{attrs:{type:"warning"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.$t("formSettings.integrationSettings.mustHaveField",{fieldsName:t.getQuestionDisplayNameByTag(i.field.tag).join(", ")}))+"\n\t\t\t\t\t\t"),e("a",{staticClass:"lime-text text-lighten-3",attrs:{target:"_blank"},on:{click:function(e){return t.addFormField(i.field.type,i)}}},[t._v(t._s(t.$t("formSettings.integrationSettings.addField",{displayName:t.getQuestionDisplayNameByTag(i.field.tag)[0]})))])]):t._e()],1)}))],2)]):t._e(),t._v(" "),t.integration&&t.integration.fieldMatches.length<t.mailchimpFields.length?e("i-button",{staticClass:"add-matches",attrs:{"prepend-icon":"plus"},on:{click:function(e){return t.addNewMatches()}}},[t._v("\n\t\t\t"+t._s(t.$t("formSettings.integrationSettings.addMore"))+"\n\t\t")]):t._e()],1),t._v(" "),t.lists.length>0?e("div",{staticClass:"text-center"},[e("i-button",{class:{disabled:!t.isValid},on:{click:t.saveSettings}},[t._v(t._s(t.$t("save")))])],1):t._e()],1)};Jt._withStripped=!0;var Yt,te,ee=Object(d.a)("integration"),ie={getLists:t=>l()((function*(){var e=yield ee.post("actions/mailchimp/getLists",{formId:t});return 200===e.status?e.data.data:null}))(),getFieldsByList:(t,e)=>l()((function*(){var i=yield ee.post("actions/mailchimp/getFieldsByList",{formId:t,listId:e});return 200===i.status?i.data.data:null}))()},ne=L.a.getAllQuestionTypes(),se={text:[ne.longtext,ne.maskedtext,ne.shorttext,ne.fullname,ne.email,ne.address,ne.phone],number:[ne.number],radio:[ne.singlechoice,ne.yesno],dropdown:[ne.picturechoice,ne.multiplechoice,ne.opinionscale,ne.rating],date:[ne.date],birthday:[ne.date],address:[ne.address],zip:[ne.address],phone:[ne.phone],url:[ne.maskedtext,ne.shorttext],imageurl:[ne.imageupload,ne.signature,ne.drawing,ne.fileupload],email:[ne.email]},ae=function(t,e){return e.filter(e=>{var i=e.questionType;return e[i]&&e[i].subType&&(i=e[i].subType),!!se[t].find(t=>t.name===i.toLowerCase())})},oe=function(t){var e=ne[t.questionType],i=t.questionNumber;return e&&e.fixQuestionNumber&&e.fixQuestionNumber(i,t)===i?"- ":i+"."},re=function(t,e){var i=!0;if(!t||!e)return i=!1;if(!t.listId||t.fieldMatches.length<0)return i=!1;for(var n,s=function(){var n=t.fieldMatches[a];return n.question&&n.field&&n.field.tag&&n.field.type&&n.field.name?void(e.find(t=>t.tag===n.field.tag)&&(i=!0)):{v:i=!1}},a=0;a<t.fieldMatches.length;a++)if(n=s())return n.v;return i},le=function(t){for(var e=[],i=se[t],n=0;n<i.length;n++)e.push(i[n].displayName);return e},ce=function(t){var e=se[t];return e?e[0].name:""},de={listId:"",fieldMatches:[]},ge={name:"Settings",props:{form:Object,integrationId:String},data:function(){return{BbCode:E.b,lists:[],mailchimpFields:[],integration:de,isLoading:!0,isValid:!1,questions:[]}},created:function(){var t=l()((function*(){this.fixQuestions(),this.integration=(yield c.a.getIntegrationById(this.integrationId))||de,yield this.getLists(),yield this.getFieldsByList(),this.isLoading=!1,this.isValid=re(this.integration,this.mailchimpFields)}));return function(){return t.apply(this,arguments)}}(),methods:{fixQuestions:function(){var t=A(this.form);this.questions=t.questions},removeFieldMatch:function(t){var e=this.integration.fieldMatches.findIndex(e=>e.field.tag===t.field.tag);e>-1&&this.integration.fieldMatches.splice(e,1)},changedFieldMatch:function(t){if(this.mailchimpFields&&this.mailchimpFields.length>0){var e=this.mailchimpFields.find(e=>e.tag===t.field.tag);t.field.tag=e.tag,t.field.name=e.name,t.field.type=e.type}},addNewMatches:function(){var t=JSON.parse(JSON.stringify(this.getSuitableMailchimpFields()));t&&this.integration.fieldMatches.push({field:t[0],question:""})},questionNumber:function(t){return oe(t)},changeQuestionSelect:function(t){t&&0===t.length&&this.$refs.question.close()},saveSettings:function(){re(this.integration,this.mailchimpFields)&&(this.integration._id=this.integrationId,this.$emit("saveSettings",this.integration))},getLists:(te=l()((function*(){this.lists=(yield ie.getLists(this.form._id))||[]})),function(){return te.apply(this,arguments)}),getFieldsByList:(Yt=l()((function*(){if(this.integration.listId&&(this.mailchimpFields=(yield ie.getFieldsByList(this.form._id,this.integration.listId))||[],this.integration.fieldMatches.length<1&&(this.integration.fieldMatches=[],this.mailchimpFields&&this.mailchimpFields.length>0)))for(var t=0;t<this.mailchimpFields.length;t++){var e=this.mailchimpFields[t];if(e.required){var i=this.getQuestionsByField(e.tag)||[];this.integration.fieldMatches.push({field:{type:e.type,tag:e.tag,name:e.name,required:e.required},question:i[0]?i[0]._id:""})}}})),function(){return Yt.apply(this,arguments)}),getQuestionsByField:function(t){if(this.mailchimpFields&&this.mailchimpFields.length>0){var e=this.mailchimpFields.find(e=>e.tag===t);if(e)return ae(e.type,this.questions)}return[]},getQuestionDisplayNameByTag:function(t){if(this.mailchimpFields&&this.mailchimpFields.length>0){var e=this.mailchimpFields.find(e=>e.tag===t);if(e)return le(e.type)}return[]},addFormField:function(t,e){var i=ce(t),n=L.a.getComponentDefaults(i);if(n){var s=this.form.questions;n.displayOrder=s.length,n.viewHelpers={questionNumber:s.length+1},n._id=it()().toHexString(),n.isRequired=e.required,s.push(n),this.$set(this.form,"questions",s),this.getFieldsByList(),this.$root.saveForm(),e.question=n._id,this.fixQuestions(),this.getQuestionsByField(e.field.tag)}},getSuitableMailchimpFields(t){return this.mailchimpFields.filter(e=>{if(!this.integration.fieldMatches.find(t=>t.field.tag===e.tag)||e.tag===t)return!0})},loadRelated:function(){var t=l()((function*(){this.isLoading=!0,yield this.getLists(),this.isLoading=!1}));return function(){return t.apply(this,arguments)}}()},watch:{integration:{handler(){this.isValid=re(this.integration,this.mailchimpFields)},deep:!0}}},pe=(i("buZ9"),Object(h.a)(ge,Jt,[],!1,null,"37153f20",null).exports);function ue(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var fe=window.location.protocol+"//"+window.location.hostname,me=(t,e,i)=>{var n=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ue(Object(i),!0).forEach((function(e){y()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ue(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({baseUrl:"https://login.mailchimp.com/oauth2/authorize",provider:t,redirect_uri:fe+"/auth/mailchimp/callback",client_id:_.a.integrationAuth.mailchimp.clientId,response_type:"code"},e);x(n,i)},he={name:"mailchimp",displayName:"Mailchimp",description:b.default.t("formSettings.integrationSettings.mailchimp.description"),logo:"/static/img/integrations/mailchimp.svg",settingsView:pe,webhookTrigger:!0,explanationHeader:b.default.t("formSettings.integrationSettings.mailchimp.explanationHeader"),explanationOption1:b.default.t("formSettings.integrationSettings.mailchimp.explanationOption1"),explanationOption2:b.default.t("formSettings.integrationSettings.mailchimp.explanationOption2"),explanationOption3:b.default.t("formSettings.integrationSettings.mailchimp.explanationOption3"),explanationOption4:b.default.t("formSettings.integrationSettings.mailchimp.explanationOption4"),explanationFooter1:b.default.t("formSettings.integrationSettings.mailchimp.explanationFooter1"),explanationFooter2:b.default.t("formSettings.integrationSettings.mailchimp.explanationFooter2"),authName:"Mailchimp",helpUrl:"https://forms.app/en/help-center/mailchimp-integration",categories:["leadgeneration","marketingautomation","all"],login:(t,e)=>{me("mailchimp",{formId:t.formId},e)}},ve=function(){var t=this,e=t._self._c;return e("div",{staticClass:"settings-wrapper"},[t.isLoading?e("i-preloader"):t.isEnabled?e("div",[e("div",{staticClass:"fields-wrapper"},[e("h3",[t._v(t._s(t.$t("formSettings.integrationSettings.activecampaign.createContact")))]),t._v(" "),e("div",{staticClass:"field-category"},[e("div",{staticClass:"fields"},[e("div",{staticClass:"sub-headers"},[e("h5",[t._v(t._s(t.$t("formSettings.integrationSettings.activecampaign.activecampaignLabel")))]),t._v(" "),e("h5",[t._v(t._s(t.$t("formSettings.integrationSettings.formsappFields")))])]),t._v(" "),t._l(t.integration.contactMatches,(function(i,n){return e("div",{key:n,staticClass:"attribute field-matches"},[e("div",{staticClass:"field-matches-item"},[e("i-select",{attrs:{items:t.getSuitableFields(i.field.id),"option-text":"title",disabled:i.field.required,onlyDirection:"down",searchable:""},on:{input:function(e){return t.getQuestionsByField(i.field.id)},change:function(e){return t.changedFieldMatch(i)}},model:{value:i.field,callback:function(e){t.$set(i,"field",e)},expression:"match.field"}}),t._v(" "),e("div",{staticClass:"ball-wrapper"},[e("div",{staticClass:"ball"}),t._v(" "),e("div",{staticClass:"line"}),t._v(" "),e("div",{staticClass:"ball"})]),t._v(" "),e("i-select",{ref:"question",refInFor:!0,staticClass:"question-select",attrs:{items:t.getQuestionsByField(i.field.id),"option-text":"question","option-value":"_id",onlyDirection:"down",searchable:""},on:{change:function(e){return t.changedFieldMatch(i)}},scopedSlots:t._u([{key:"default",fn:function(i){return[i.item.viewHelpers?e("b",[t._v(t._s(t.questionNumber(i.item)))]):t._e(),t._v(" "+t._s(t.BbCode.cleanTextFromBBCode(i.item.question))+"\n\t\t\t\t\t\t\t\t")]}}],null,!0),model:{value:i.question,callback:function(e){t.$set(i,"question",e)},expression:"match.question"}}),t._v(" "),i.field.required?t._e():e("i-icon",{staticClass:"remove-field-mathces",attrs:{icon:"times"},on:{click:function(e){return t.removeFieldMatch(i)}}})],1),t._v(" "),t.getQuestionsByField(i.field.id).length<1?e("i-alert",{attrs:{type:"warning"}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.$t("formSettings.integrationSettings.mustHaveField",{fieldsName:t.getQuestionDisplayNameByTag(i.field.id).join(", ")}))+"\n\t\t\t\t\t\t\t"),e("a",{staticClass:"lime-text text-lighten-3",attrs:{target:"_blank"},on:{click:function(e){return t.addFormField(i.field.type,i)}}},[t._v(t._s(t.$t("formSettings.integrationSettings.addField",{displayName:t.getQuestionDisplayNameByTag(i.field.id)[0]})))])]):t._e()],1)}))],2),t._v(" "),t.integration&&t.integration.contactMatches.length<t.contactFields.length?e("i-button",{staticClass:"add-matches",attrs:{"prepend-icon":"plus"},on:{click:function(e){return t.addNewMatches()}}},[t._v("\n\t\t\t\t\t"+t._s(t.$t("formSettings.integrationSettings.addMore"))+"\n\t\t\t\t")]):t._e(),t._v(" "),t.lists&&t.lists.length>0?e("div",[e("h4",[t._v(t._s(t.$t("formSettings.integrationSettings.activecampaign.selectListTitle")))]),t._v(" "),e("i-select",{attrs:{items:t.lists,emptyOption:t.$t("formSettings.integrationSettings.activecampaign.selectList"),"option-text":"name","option-value":"id",onlyDirection:"down"},model:{value:t.integration.listId,callback:function(e){t.$set(t.integration,"listId",e)},expression:"integration.listId"}})],1):t._e(),t._v(" "),t.tags&&t.tags.length>0?e("div",[e("h4",[t._v(t._s(t.$t("formSettings.integrationSettings.activecampaign.selectTags")))]),t._v(" "),e("i-select",{staticClass:"tag-select",attrs:{multiple:"",items:t.tags,"option-text":"tag","option-value":"id",onlyDirection:"down"},scopedSlots:t._u([{key:"input",fn:function(i){return[e("div",{staticClass:"f-select"},[0===i.item.length?[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.$t("formSettings.integrationSettings.activecampaign.selectTags"))+"\n\t\t\t\t\t\t\t\t")]:i.item.length!==t.tags.length?t._l(i.item,(function(i,n){return e("div",{key:i},[e("span",[e("b",{staticClass:"selected-item"}),t._v(" "+t._s(t.tags[n].tag)+"\n\t\t\t\t\t\t\t\t\t\t")])])})):[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.$t("formSettings.integrationSettings.all"))+"\n\t\t\t\t\t\t\t\t")]],2)]}}],null,!1,1754181132),model:{value:t.integration.tags,callback:function(e){t.$set(t.integration,"tags",e)},expression:"integration.tags"}})],1):t._e(),t._v(" "),e("div",{staticClass:"text-center"},[e("i-button",{class:{disabled:!t.isValid},on:{click:function(e){return t.$emit("saveSettings",t.integration)}}},[t._v(t._s(t.$t("save")))])],1)],1)])]):e("div",{staticClass:"api-login"},[e("h4",[t._v(t._s(t.$t("formSettings.integrationSettings.activecampaign.enterInfo")))]),t._v(" "),e("label",[t._v(t._s(t.$t("formSettings.integrationSettings.activecampaign.apiUrl")))]),t._v(" "),e("div",{staticClass:"input-with-link"},[e("i-text",{model:{value:t.apiUrl,callback:function(e){t.apiUrl=e},expression:"apiUrl"}}),t._v(" "),t.apiUrl?t._e():e("a",{staticClass:"f-focus code-help-button",attrs:{href:"https://forms.app/en/help-center/activecampaign-integration",target:"_blank"}},[e("i-icon",{attrs:{icon:"info"}})],1)],1),t._v(" "),e("label",[t._v(t._s(t.$t("formSettings.integrationSettings.activecampaign.apiKey")))]),t._v(" "),e("i-text",{model:{value:t.apiKey,callback:function(e){t.apiKey=e},expression:"apiKey"}}),t._v(" "),t.showErrorMessage?e("i-alert",{attrs:{type:"error"}},[t._v(t._s(t.$t("formSettings.integrationSettings.validationFailed")))]):t._e(),t._v(" "),e("div",{staticClass:"text-center"},[e("i-button",{class:{disabled:!(t.apiKey&&t.apiUrl)},on:{click:function(e){return t.validateApiKey(t.apiKey,t.apiUrl)}}},[t._v(t._s(t.$t("formSettings.integrationSettings.connect")))])],1)],1)],1)};ve._withStripped=!0;var be=Object(d.a)("integration"),Se={getInitialData:t=>l()((function*(){var e=yield be.post("actions/activecampaign/getInitialData",{formId:t});return 200===e.status?e.data.data:null}))()},ye=L.a.getAllQuestionTypes(),_e={text:[ye.shorttext,ye.longtext,ye.maskedtext,ye.fullname,ye.address,ye.phone,ye.date,ye.singlechoice,ye.multiplechoice,ye.dropdown],textarea:[ye.longtext],dropdown:[ye.dropdown,ye.singlechoice,ye.yesno],date:[ye.date],datetime:[ye.date],listbox:[ye.singlechoice,ye.dropdown,ye.yesno],radio:[ye.singlechoice,ye.dropdown,ye.yesno],email:[ye.email],checkbox:[ye.multiplechoice,ye.singlechoice,ye.dropdown,ye.yesno],hidden:[ye.longtext,ye.maskedtext,ye.shorttext,ye.fullname,ye.email,ye.address,ye.phone]},ke=function(t,e){return e.questions.filter(e=>{var i=e.questionType;return e[i]&&e[i].subType&&(i=e[i].subType),!!_e[t].find(t=>t.name===i.toLowerCase())})},we=function(t){var e=ye[t.questionType],i=t.viewHelpers.questionNumber;return e&&e.fixQuestionNumber&&e.fixQuestionNumber(i,t)===i?"- ":i+"."},Ce=function(t){if(!t)return["Short Text"];for(var e=[],i=_e[t],n=0;n<i.length;n++)e.push(i[n].displayName);return e},xe=function(t){var e=_e[t];return e&&e[0]?e[0].name:""},Fe=function(t,e){if(!t||!e)return!1;for(var i=0;i<t.length;i++){if(!t[i].question)return!1}return!0};function De(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var Oe,qe,$e,Me={listId:"",contactMatches:[],tags:[]},Ne=[{title:"Name",type:"text",id:"firstName"},{title:"Email",type:"email",id:"email",required:!0},{title:"Phone",type:"text",id:"phone"}],Ie={name:"Settings",props:{form:Object,integrationId:String,saveModel:Object,questionsSaveModel:Object},data:function(){return{BbCode:E.b,integration:{},apiKey:"",apiUrl:"",validationSuccess:null,showErrorMessage:!1,isLoading:!1,lists:[],contactFields:[...Ne],tags:[],isValid:!1,isEnabled:!1}},created:function(){var t=l()((function*(){yield this.getIntegration()}));return function(){return t.apply(this,arguments)}}(),methods:{getIntegration:($e=l()((function*(){this.integration=yield c.a.getIntegrationById(this.integrationId),this.integration?(this.isEnabled=!0,this.isLoading=!0,yield this.getInitialData()):this.integration=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?De(Object(i),!0).forEach((function(e){y()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):De(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},Me)})),function(){return $e.apply(this,arguments)}),validateApiKey:(qe=l()((function*(){this.apiKey&&this.apiUrl&&(this.isLoading=!0,this.showErrorMessage=!1,(yield c.a.login("activecampaign",{formId:this.form._id,apiKey:this.apiKey,apiUrl:this.apiUrl}))?(this.isEnabled=!0,yield this.getInitialData()):(this.showErrorMessage=!0,this.isLoading=!1))})),function(){return qe.apply(this,arguments)}),getInitialData:(Oe=l()((function*(){var t=(yield Se.getInitialData(this.form._id))||{};if(this.lists=t.lists||[],t.customFields&&t.customFields.length>0&&t.customFields.map(t=>{this.contactFields.push({title:t.title,type:t.type,id:t.id,isCustomField:!0})}),this.integration.contactMatches&&this.integration.contactMatches.length<1)for(var e of(this.integration.contactMatches=[],this.contactFields))if(e.required){var i=this.getQuestionsByField(e.id)||[];this.integration.contactMatches.push({field:e,question:i[0]?i[0]._id:""})}this.tags=t.tags||[],this.isLoading=!1})),function(){return Oe.apply(this,arguments)}),getSuitableFields:function(t){return this.contactFields.filter(e=>{if(!this.integration.contactMatches.find(t=>t.field.id===e.id)||e.id===t)return!0})},getQuestionsByField:function(t){if(this.contactFields&&this.contactFields.length>0){var e=this.contactFields.find(e=>e.id===t);if(e)return ke(e.type,this.form)}return[]},changedFieldMatch:function(t){var e=this.contactFields.find(e=>e.id===t.field.id);t.field.title=e.title,t.field.id=e.id,t.field.type=e.type},questionNumber:function(t){return we(t)},removeFieldMatch:function(t){var e=this.integration.contactMatches.findIndex(e=>e.field.id===t.field.id);e>-1&&this.integration.contactMatches.splice(e,1)},getQuestionDisplayNameByTag:function(t){var e=this.contactFields.find(e=>e.id===t);return Ce(e.type)},addFormField:function(t,e){t||(t="text");var i=xe(t);if(i){var n=L.a.getComponentDefaults(i);if(n){var s=this.form.questions;n.displayOrder=s.length,n._id=it()().str,n.isActive=!0,n.isDeleted=!1,n.isRequired=!0,s.push(n),this.$set(this.questionsSaveModel.A,n._id,n),this.$root.saveForm(),e.question=n._id}}},addNewMatches:function(){var t=this.getSuitableFields();if(t[0]){var e=t[0];this.integration.contactMatches.push({field:e,question:""})}}},watch:{integration:{handler(){this.isValid=Fe(this.integration.contactMatches,this.contactFields)},deep:!0}}},je=(i("14yt"),{name:"activecampaign",authName:"ActiveCampaign",displayName:"ActiveCampaign",logo:"/static/img/integrations/activecampaign.svg",settingsView:Object(h.a)(Ie,ve,[],!1,null,"b33ab476",null).exports,webhookTrigger:!0,description:b.default.t("formSettings.integrationSettings.activecampaign.description"),explanationHeader:b.default.t("formSettings.integrationSettings.activecampaign.explanationHeader"),explanationOption1:b.default.t("formSettings.integrationSettings.activecampaign.explanationOption1"),explanationOption2:b.default.t("formSettings.integrationSettings.activecampaign.explanationOption2"),explanationFooter1:b.default.t("formSettings.integrationSettings.activecampaign.explanationFooter1"),categories:["leadgeneration","all"],login:(t,e)=>{e(200)}}),Pe=function(){var t=this,e=t._self._c;return e("div",{staticClass:"notion-settings-wrapper"},[t.isLoading?e("i-preloader"):e("div",{staticClass:"fields-wrapper"},[e("div",{staticClass:"attribute"},[e("h4",[t._v(t._s(t.$t("formSettings.integrationSettings.notion.selectList")))]),t._v(" "),e("div",{staticClass:"select-wrapper"},[e("i-select",{staticClass:"select-list",attrs:{items:t.databases,emptyOption:t.$t("formSettings.integrationSettings.notion.selectDatabase"),"option-text":"title","option-value":"id",onlyDirection:"down",isReloadable:""},on:{input:function(e){return t.getProperties()},reload:t.loadRelated},model:{value:t.integration.databaseId,callback:function(e){t.$set(t.integration,"databaseId",e)},expression:"integration.databaseId"}})],1)]),t._v(" "),!t.isLoading&&t.integration.databaseId&&t.properties?e("div",[e("div",{staticClass:"fields"},[e("div",{staticClass:"sub-headers"},[e("h5",[t._v(t._s(t.$t("formSettings.integrationSettings.notion.notionProperty")))]),t._v(" "),e("div",{staticClass:"ball-wrapper",staticStyle:{opacity:"0"}},[e("div",{staticClass:"ball"}),t._v(" "),e("div",{staticClass:"line"}),t._v(" "),e("div",{staticClass:"ball"})]),t._v(" "),e("h5",[t._v(t._s(t.$t("formSettings.integrationSettings.formsappFields")))])]),t._v(" "),t._l(t.integration.fieldMatches,(function(i,n){return e("div",{key:n,staticClass:"attribute notion-fields"},[e("div",{staticClass:"notion-fields-item"},[e("i-select",{attrs:{items:t.properties,"option-text":"name","option-value":"id",searchable:"",disabled:i.field.required,value:i.field.required?i.field.id:"",onlyDirection:"down"},on:{input:function(e){return t.getQuestionsByField(i.field.id)},change:function(e){return t.changedFieldMatch(i)}},model:{value:i.field.id,callback:function(e){t.$set(i.field,"id",e)},expression:"match.field.id"}}),t._v(" "),e("div",{staticClass:"ball-wrapper"},[e("div",{staticClass:"ball"}),t._v(" "),e("div",{staticClass:"line"}),t._v(" "),e("div",{staticClass:"ball"})]),t._v(" "),e("i-select",{ref:"question",refInFor:!0,staticClass:"question-select",attrs:{items:t.getQuestionsByField(i.field.id),"option-text":"question","option-value":"_id",onlyDirection:"down"},on:{change:function(e){return t.changedFieldMatch(i)}},scopedSlots:t._u([{key:"default",fn:function(i){return[i.item.viewHelpers?e("b",[t._v(t._s(t.questionNumber(i.item)))]):t._e(),t._v(" "+t._s(t.BbCode.cleanTextFromBBCode(i.item.question))+"\n\t\t\t\t\t\t\t")]}}],null,!0),model:{value:i.question,callback:function(e){t.$set(i,"question",e)},expression:"match.question"}}),t._v(" "),0!==n?e("i-icon",{staticClass:"remove-field-matches",attrs:{icon:"times"},on:{click:function(e){return t.removeFieldMatch(i)}}}):t._e()],1),t._v(" "),i.field.id&&t.getQuestionsByField(i.field.id).length<1?e("i-alert",{attrs:{type:"warning"}},[e("span",{staticClass:"warning-span"},[t._v(t._s(t.$t("formSettings.integrationSettings.mustHaveField",{fieldsName:t.getQuestionDisplayNameByTag(i.field.id).join(", ")})))]),t._v(" "),e("a",{staticClass:"lime-text text-lighten-3",attrs:{target:"_blank"},on:{click:function(e){return t.addFormField(i.field.type,i)}}},[t._v(t._s(t.$t("formSettings.integrationSettings.addField",{displayName:t.getQuestionDisplayNameByTag(i.field.id)[0]})))])]):t._e()],1)}))],2)]):t._e(),t._v(" "),t.integration&&t.integration.fieldMatches.length<t.properties.length?e("i-button",{staticClass:"add-matches",attrs:{"prepend-icon":"plus"},on:{click:function(e){return t.addNewMatches()}}},[t._v("\n\t\t\t"+t._s(t.$t("formSettings.integrationSettings.intercom.addLabel"))+"\n\t\t")]):t._e()],1),t._v(" "),e("br"),t._v(" "),t.showSyncSwitch?e("i-checkbox",{attrs:{label:t.$t("formSettings.integrationSettings.syncExistingAnswers")},model:{value:t.integration.syncAnswers,callback:function(e){t.$set(t.integration,"syncAnswers",e)},expression:"integration.syncAnswers"}}):t._e(),t._v(" "),e("br"),e("br"),t._v(" "),t.databases.length>0?e("div",{staticClass:"text-center"},[e("i-button",{class:{disabled:!t.isValid},on:{click:t.saveSettings}},[t._v(t._s(t.$t("save")))])],1):t._e()],1)};Pe._withStripped=!0;var Te=Object(d.a)("integration"),Be={getDatabases:t=>l()((function*(){var e=yield Te.post("actions/notion/getDatabases",{formId:t});return 200===e.status?e.data.data:null}))()},Ee=L.a.getAllQuestionTypes(),Le={rich_text:[Ee.shorttext,Ee.longtext,Ee.maskedtext,Ee.fullname,Ee.email,Ee.address,Ee.phone],title:[Ee.shorttext,Ee.longtext,Ee.maskedtext,Ee.fullname,Ee.email,Ee.address,Ee.phone],number:[Ee.number,Ee.rating,Ee.opinionscale],select:[Ee.singlechoice,Ee.yesno,Ee.dropdown,Ee.rating,Ee.opinionscale],multi_select:[Ee.multiplechoice],date:[Ee.date],files:[Ee.fileupload,Ee.imageupload],checkbox:[Ee.termsandconditions,Ee.yesno],url:[Ee.shorttext,Ee.maskedtext],email:[Ee.email],phone_number:[Ee.phone]},Qe={notionFieldTypes:Le,getQuestionsByFieldType:function(t,e){var i=e.filter(e=>{var i=e.questionType;return e[i]&&e[i].subType&&(i=e[i].subType),!!Le[t].find(t=>t.name===i.toLowerCase())});for(var n of i)n.question=E.b.cleanTextFromBBCode(n.question);return i},questionNumber:function(t){var e=Ee[t.questionType],i=t.questionNumber;return e&&e.fixQuestionNumber&&e.fixQuestionNumber(i,t)===i?"- ":i+"."},integrationValidation:function(t,e){var i=!0;if(!t||!e)return i=!1;if(!t.databaseId||t.fieldMatches.length<0)return i=!1;for(var n,s=function(){var n=t.fieldMatches[a];return n.question&&n.field&&n.field.id&&n.field.type&&n.field.name?void(e.find(t=>t.id===n.field.id)&&(i=!0)):{v:i=!1}},a=0;a<t.fieldMatches.length;a++)if(n=s())return n.v;return i},getQuestionDisplayNamesByTag:function(t){var e=[],i=Le[t];if(i)for(var n=0;n<i.length;n++)e.push(i[n].displayName);return e},getFirstQuestionTypeOfType:function(t){var e=Le[t];return e?e[0].name:""}};function Ae(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Ve(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ae(Object(i),!0).forEach((function(e){y()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ae(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var Re={databaseId:"",fieldMatches:[],syncAnswers:!1},ze=null,He={name:"Settings",props:{form:Object,integrationId:String,questionsSaveModel:Object,showSyncSwitch:Boolean},data:function(){return{BbCode:E.b,databases:[],integration:Ve({},Re),isLoading:!0,properties:[],isValid:!1,questions:[]}},mounted:function(){var t=l()((function*(){this.fixQuestions(),this.integration=(yield c.a.getIntegrationById(this.integrationId))||Ve({},Re),this.databases=(yield Be.getDatabases(this.form._id))||[],this.getProperties()}));return function(){return t.apply(this,arguments)}}(),methods:{fixQuestions:function(){var t=A(this.form);this.questions=t.questions},getProperties:function(){if(this.integration&&this.integration.databaseId){var t=this.databases.find(t=>t.id===this.integration.databaseId);if(t&&t.properties&&(this.properties=Object.values(t.properties),this.properties=this.properties.filter(t=>Qe.notionFieldTypes[t.type]),this.integration.fieldMatches.length<1&&(this.integration.fieldMatches=[],this.properties&&this.properties.length>0))){var e=this.getQuestionsByField(this.properties[0].id)||[];this.integration.fieldMatches.push({field:{type:this.properties[0].type,id:this.properties[0].id,name:this.properties[0].name},question:e[0]?e[0]._id:""})}}this.isLoading=!1},getQuestionsByField:function(t){if(this.properties&&this.properties.length>0){var e=this.properties.find(e=>e.id===t);if(e)return Qe.getQuestionsByFieldType(e.type,this.questions)}return[]},addNewMatches:function(){var t=JSON.parse(JSON.stringify(this.getSuitableFields()));t&&this.integration.fieldMatches.push({field:t[0],question:""})},questionNumber:function(t){return Qe.questionNumber(t)},changeQuestionSelect:function(t){t&&0===t.length&&this.$refs.question.close()},saveSettings:function(){Qe.integrationValidation(this.integration,this.properties)&&(this.integration._id=this.integrationId,this.$emit("saveSettings",this.integration))},addFormField:function(t,e){var i=Qe.getFirstQuestionTypeOfType(t),n=L.a.getComponentDefaults(i);if(n){var s=this.form.questions;n.displayOrder=s.length,n.viewHelpers={questionNumber:s.length+1},n._id=it()().toHexString(),n.isActive=!0,n.isDeleted=!1,n.isRequired=!0,s.push(n),this.$set(this.questionsSaveModel.A,n._id,n),this.$root.saveForm(),e.question=n._id,this.fixQuestions(),this.getQuestionsByField(e.field.tag)}},removeFieldMatch:function(t){var e=this.integration.fieldMatches.findIndex(e=>e.field.id===t.field.id);e>-1&&this.integration.fieldMatches.splice(e,1)},changedFieldMatch:function(t){if(this.properties&&this.properties.length>0){var e=this.properties.find(e=>e.id===t.field.id);t.field.id=e.id,t.field.name=e.name,t.field.type=e.type}},getSuitableFields(t){return this.properties.filter(e=>{if(!this.integration.fieldMatches.find(t=>t.field.id===e.id)||e.id===t)return!0})},getQuestionDisplayNameByTag:function(t){if(this.properties&&this.properties.length>0){var e=this.properties.find(e=>e.id===t);if(e)return Qe.getQuestionDisplayNamesByTag(e.type)}return[]},loadRelated:function(){var t=l()((function*(){var t=this;this.isLoading=!0,clearTimeout(ze),ze=setTimeout(l()((function*(){t.databases=(yield Be.getDatabases(t.form._id))||[],t.isLoading=!1})),250)}));return function(){return t.apply(this,arguments)}}()},watch:{integration:{handler(){this.isValid=Qe.integrationValidation(this.integration,this.properties)},deep:!0}}},Ze=(i("1c7O"),Object(h.a)(He,Pe,[],!1,null,"2e245210",null).exports);function We(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var Ue=window.location.protocol+"//"+window.location.hostname,Xe=(t,e,i,n)=>{var s=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?We(Object(i),!0).forEach((function(e){y()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):We(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({baseUrl:"https://api.notion.com/v1/oauth/authorize",provider:t,client_id:_.a.integrationAuth.notion.clientId,redirect_uri:Ue+"/auth/notion/callback",display:"popup",scope:"openid "+e,response_type:"code",prompt:"consent",owner:"user"},i);x(s,n)},Ge={name:"notion",authName:"Notion",displayName:"Notion",description:b.default.t("formSettings.integrationSettings.notion.description"),logo:"/static/img/integrations/notion.svg",darkLogo:"/static/img/integrations/notion-white.svg",helpUrl:"https://forms.app/en/help-center/notion-integration",settingsView:Ze,webhookTrigger:!0,explanationHeader:b.default.t("formSettings.integrationSettings.notion.explanationHeader"),explanationOption1:b.default.t("formSettings.integrationSettings.notion.explanationOption1"),explanationFooter1:b.default.t("formSettings.integrationSettings.notion.explanationFooter1"),explanationFooter2:b.default.t("formSettings.integrationSettings.notion.explanationFooter2"),categories:["anr","filemanagement","productivity","all"],login:(t,e)=>{Xe("notion","",{formId:t.formId},e)}},Ke=function(){var t,e=this,i=e._self._c;return i("div",{staticClass:"settings-wrapper"},[e.isLoading?i("i-preloader"):i("div",{staticClass:"fields-wrapper"},[i("div",{staticClass:"field-category"},[i("div",{staticClass:"fields"},[i("div",{staticClass:"field-headers"},[i("h5",[e._v(e._s(e.$t("formSettings.integrationSettings.intercom.email")))])]),e._v(" "),i("i-select",{attrs:{items:e.getQuestionsByField("email"),emptyOption:e.$t("formSettings.integrationSettings.intercom.selectProperty"),"option-text":"question","option-value":"_id",onlyDirection:"down",searchable:""},model:{value:e.integration.email.question,callback:function(t){e.$set(e.integration.email,"question",t)},expression:"integration.email.question"}}),e._v(" "),e.getQuestionsByField("email").length<1?i("i-alert",{attrs:{type:"warning"}},[e._v("\n\t\t\t\t\t"+e._s(e.$t("formSettings.integrationSettings.intercom.mustHaveEmail"))+"\n\t\t\t\t\t"),i("a",{attrs:{target:"_blank"},on:{click:function(t){return e.addFormField("email",e.integration.email)}}},[e._v(e._s(e.$t("formSettings.integrationSettings.intercom.addEmailField")))])]):e._e(),e._v(" "),i("div",{staticClass:"field-headers"},[i("h5",[e._v(e._s(e.$t("formSettings.integrationSettings.intercom.message")))])]),e._v(" "),i("TagEditor",{staticClass:"description-field",attrs:{form:e.form,variables:e.questions,allowedEditorExtensions:{Bold:!0,Italic:!0,Link:!0,Underline:!0,Heading:!0}},model:{value:e.integration.message.messageContent,callback:function(t){e.$set(e.integration.message,"messageContent",t)},expression:"integration.message.messageContent"}}),e._v(" "),e._l(e.integration.contactMatches,(function(t,n){return i("div",{key:n,staticClass:"attribute field-matches"},[i("div",{staticClass:"field-matches-item"},[i("i-select",{attrs:{items:e.getSuitableFields(t.field.name,"contact"),"option-text":"label","option-value":"name",disabled:t.field.required,value:t.field.required?t.field.name:"",onlyDirection:"down",searchable:""},on:{input:function(i){return e.getQuestionsByField(t.field.name,"contact")},change:function(i){return e.changedFieldMatch(t,"contact")}},model:{value:t.field.name,callback:function(i){e.$set(t.field,"name",i)},expression:"match.field.name"}}),e._v(" "),i("div",{staticClass:"ball-wrapper"},[i("div",{staticClass:"ball"}),e._v(" "),i("div",{staticClass:"line"}),e._v(" "),i("div",{staticClass:"ball"})]),e._v(" "),i("i-select",{ref:"question",refInFor:!0,staticClass:"question-select",attrs:{items:e.getQuestionsByField(t.field.name,"contact"),"option-text":"question","option-value":"_id",onlyDirection:"down",searchable:""},on:{change:function(i){return e.changedFieldMatch(t,"contact")}},scopedSlots:e._u([{key:"default",fn:function(t){return[t.item.viewHelpers?i("b",[e._v(e._s(e.questionNumber(t.item)))]):e._e(),e._v(" "+e._s(e.BbCode.cleanTextFromBBCode(t.item.question))+"\n\t\t\t\t\t\t\t")]}}],null,!0),model:{value:t.question,callback:function(i){e.$set(t,"question",i)},expression:"match.question"}}),e._v(" "),t.field.required?e._e():i("i-icon",{staticClass:"remove-field-mathces",attrs:{icon:"times"},on:{click:function(i){return e.removeFieldMatch(t,"contact")}}})],1),e._v(" "),e.getQuestionsByField(t.field.name,"contact").length<1?i("i-alert",{attrs:{type:"warning"}},[e._v("\n\t\t\t\t\t\t"+e._s(e.$t("formSettings.integrationSettings.mustHaveField",{fieldsName:e.getQuestionDisplayNameByTag(t.field.name,"contact").join(", ")}))+"\n\t\t\t\t\t\t"),i("a",{staticClass:"lime-text text-lighten-3",attrs:{target:"_blank"},on:{click:function(i){return e.addFormField(t.field.type,t)}}},[e._v(e._s(e.$t("formSettings.integrationSettings.addField",{displayName:e.getQuestionDisplayNameByTag(t.field.name,"contact")[0]})))])]):e._e()],1)}))],2),e._v(" "),e.integration&&e.integration.contactMatches.length<e.contactFields.length?i("i-button",{staticClass:"add-matches",attrs:{"prepend-icon":"plus"},on:{click:function(t){return e.addNewMatches("contact")}}},[e._v("\n\t\t\t\t"+e._s(e.$t("formSettings.integrationSettings.addMore"))+"\n\t\t\t")]):e._e(),e._v(" "),i("i-checkbox",{attrs:{label:e.$t("formSettings.integrationSettings.hubspot.updateIfExists")},model:{value:e.integration.updateIfExists,callback:function(t){e.$set(e.integration,"updateIfExists",t)},expression:"integration.updateIfExists"}})],1),e._v(" "),i("hr"),e._v(" "),i("i-checkbox",{class:e.integration.createCompany?"optional-checkbox":"",attrs:{label:e.$t("formSettings.integrationSettings.hubspot.createCompany")},model:{value:e.integration.createCompany,callback:function(t){e.$set(e.integration,"createCompany",t)},expression:"integration.createCompany"}}),e._v(" "),e.integration.createCompany?i("div",{staticClass:"field-category"},[i("h3",[e._v(e._s(e.$t("formSettings.integrationSettings.hubspot.company")))]),e._v(" "),i("div",{staticClass:"fields"},[i("div",{staticClass:"sub-headers"},[i("h5",[e._v(e._s(e.$t("formSettings.integrationSettings.intercom.intercomLabel")))]),e._v(" "),i("div",{staticClass:"ball-wrapper",staticStyle:{opacity:"0"}},[i("div",{staticClass:"ball"}),e._v(" "),i("div",{staticClass:"line"}),e._v(" "),i("div",{staticClass:"ball"})]),e._v(" "),i("h5",[e._v(e._s(e.$t("formSettings.integrationSettings.formsappFields")))])]),e._v(" "),e._l(e.integration.companyMatches,(function(t,n){return i("div",{key:n,staticClass:"attribute field-matches"},[i("div",{staticClass:"field-matches-item"},[i("i-select",{attrs:{items:e.getSuitableFields(t.field.name,"company"),"option-text":"label","option-value":"name",disabled:t.field.required,value:t.field.required?t.field.name:"",onlyDirection:"down",searchable:""},on:{input:function(i){return e.getQuestionsByField(t.field.name,"company")},change:function(i){return e.changedFieldMatch(t,"company")}},model:{value:t.field.name,callback:function(i){e.$set(t.field,"name",i)},expression:"match.field.name"}}),e._v(" "),i("div",{staticClass:"ball-wrapper"},[i("div",{staticClass:"ball"}),e._v(" "),i("div",{staticClass:"line"}),e._v(" "),i("div",{staticClass:"ball"})]),e._v(" "),i("i-select",{ref:"question",refInFor:!0,staticClass:"question-select",attrs:{items:e.getQuestionsByField(t.field.name,"company"),"option-text":"question","option-value":"_id",onlyDirection:"down",searchable:""},on:{change:function(i){return e.changedFieldMatch(t,"company")}},scopedSlots:e._u([{key:"default",fn:function(t){return[t.item.viewHelpers?i("b",[e._v(e._s(e.questionNumber(t.item)))]):e._e(),e._v(" "+e._s(e.BbCode.cleanTextFromBBCode(t.item.question))+"\n\t\t\t\t\t\t\t")]}}],null,!0),model:{value:t.question,callback:function(i){e.$set(t,"question",i)},expression:"match.question"}}),e._v(" "),t.field.required?e._e():i("i-icon",{staticClass:"remove-field-mathces",attrs:{icon:"times"},on:{click:function(i){return e.removeFieldMatch(t,"company")}}})],1),e._v(" "),e.getQuestionsByField(t.field.name,"company").length<1?i("i-alert",{attrs:{type:"warning"}},[e._v("\n\t\t\t\t\t\t"+e._s(e.$t("formSettings.integrationSettings.mustHaveField",{fieldsName:e.getQuestionDisplayNameByTag(t.field.name,"company").join(", ")}))+"\n\t\t\t\t\t\t"),i("a",{staticClass:"lime-text text-lighten-3",attrs:{target:"_blank"},on:{click:function(i){return e.addFormField(t.field.type,t)}}},[e._v(e._s(e.$t("formSettings.integrationSettings.addField",{displayName:e.getQuestionDisplayNameByTag(t.field.name,"company")[0]})))])]):e._e()],1)}))],2),e._v(" "),e.integration&&(null===(t=e.integration)||void 0===t?void 0:t.companyMatches.length)<e.companyFields.length?i("i-button",{staticClass:"add-matches",attrs:{"prepend-icon":"plus"},on:{click:function(t){return e.addNewMatches("company")}}},[e._v("\n\t\t\t\t"+e._s(e.$t("formSettings.integrationSettings.addMore"))+"\n\t\t\t")]):e._e()],1):e._e()],1),e._v(" "),e.isLoading?e._e():i("div",{staticClass:"text-center"},[i("i-button",{class:{disabled:!e.isValid},on:{click:function(t){return e.$emit("saveSettings",e.integration)}}},[e._v(e._s(e.$t("save")))])],1)],1)};Ke._withStripped=!0;var Je=L.a.getAllQuestionTypes(),Ye={string:[Je.shorttext,Je.longtext,Je.maskedtext,Je.fullname,Je.email,Je.address,Je.phone,Je.imageupload,Je.signature,Je.drawing,Je.fileupload],integer:[Je.number],boolean:[Je.singlechoice,Je.yesno],date:[Je.date],email:[Je.email],float:[Je.number]},ti=function(t,e){return e.filter(e=>{var i=e.questionType;return e[i]&&e[i].subType&&(i=e[i].subType),!!Ye[t].find(t=>t.name===i.toLowerCase())})},ei=function(t){var e=Je[t.questionType],i=t.questionNumber;return e&&e.fixQuestionNumber&&e.fixQuestionNumber(i,t)===i?"- ":i+"."},ii=function(t,e){var i=!0;if(!t||!e)return i=!1;if(t.length<0)return i=!1;for(var n,s=function(){var n=t[a];return n.question&&n.field&&n.field.name&&n.field.type&&n.field.label?void(e.find(t=>t.name===n.field.name)&&(i=!0)):{v:i=!1}},a=0;a<t.length;a++)if(n=s())return n.v;return i},ni=function(t){for(var e=[],i=Ye[t],n=0;n<i.length;n++)e.push(i[n].displayName);return e},si=function(t){var e=Ye[t];return e?e[0].name:""},ai=i("P0qE"),oi={getAttributes:(t,e)=>l()((function*(){var i=yield ai.a.post("integration/actions/intercom/getAttributes",{formId:t,type:e});return 200===i.status||204===i.status?i.data.data:null}))()};function ri(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var li={email:{property:"email",question:""},message:{property:"message",messageContent:""},contactMatches:[],companyMatches:[],updateIfExists:!1,createCompany:!1,questions:[]},ci={name:"Settings",components:{TagEditor:tt.a},props:{form:Object,saveModel:Object,questionsSaveModel:Object,integrationId:String},data:function(){return{BbCode:E.b,contactFields:[],companyFields:[],questions:[],integration:li,isLoading:!0,isValid:!1}},created:function(){var t=l()((function*(){this.fixQuestions(),this.integration=(yield c.a.getIntegrationById(this.integrationId))||li,yield this.getFields("contact"),yield this.getFields("company"),this.isLoading=!1}));return function(){return t.apply(this,arguments)}}(),methods:{fixQuestions:function(){var t=A(this.form);this.questions=t.questions.map((t,e)=>function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ri(Object(i),!0).forEach((function(e){y()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ri(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({label:"".concat(e+1,". ").concat(E.b.cleanTextFromBBCode(t.question)),value:"q.".concat(t._id)},t))},getFields:function(){var t=l()((function*(t){this[t+"Fields"]=(yield oi.getAttributes(this.form._id,t))||[];var e=this[t+"Fields"].findIndex(t=>"email"===t.name);this[t+"Fields"].splice(e,1),this.integration[t+"Matches"].length<1&&(this.integration[t+"Matches"]=[])}));return function(e){return t.apply(this,arguments)}}(),getQuestionsByField:function(t,e){if(this[e+"Fields"]&&this[e+"Fields"].length>0){var i=this[e+"Fields"].find(e=>e.name===t);if(i)return ti(i.data_type,this.questions)}else if(!e)return ti(t,this.questions);return[]},getSuitableFields:function(t,e){return this[e+"Fields"].filter(i=>{if(!this.integration[e+"Matches"].find(t=>t.field.name===i.name)||i.name===t)return!0})},removeFieldMatch:function(t,e){var i=this.integration[e+"Matches"].findIndex(e=>e.field.name===t.field.name);i>-1&&this.integration[e+"Matches"].splice(i,1)},changedFieldMatch:function(t,e){if(this[e+"Fields"]&&this[e+"Fields"].length>0){var i=this[e+"Fields"].find(e=>e.name===t.field.name);t.field.label=i.label,t.field.name=i.name,t.field.type=i.data_type}},addNewMatches:function(t){var e=JSON.parse(JSON.stringify(this.getSuitableFields("",t)));e&&e.length>0&&this.integration[t+"Matches"].push({field:{label:e[0].label,name:e[0].name,type:e[0].data_type},question:""})},questionNumber:function(t){return ei(t)},saveSettings:function(){ii(this.integration.contactMatches,this.contactFields)&&(this.integration._id=this.integrationId,this.$emit("saveSettings",this.integration))},getQuestionDisplayNameByTag:function(t,e){if(this[e+"Fields"]&&this[e+"Fields"].length>0){var i=this[e+"Fields"].find(e=>e.name===t);if(i)return ni(i.data_type)}return[]},addFormField:function(t,e){var i=si(t),n=L.a.getComponentDefaults(i);if(n){var s,a=this.form.questions;n.displayOrder=a.length,n.viewHelpers={questionNumber:a.length+1},n._id=it()().toHexString(),n.isActive=!0,n.isDeleted=!1,n.isRequired=!0,a.push(n),this.$set(this.questionsSaveModel.A,n._id,n),this.$root.saveForm(),e.question=n._id,this.fixQuestions(),this.getQuestionsByField((null===(s=e.field)||void 0===s?void 0:s.type)||e.property)}}},watch:{integration:{handler(){this.isValid=ii(this.integration.contactMatches,this.contactFields)},deep:!0},"integration.createCompany":{handler(){var t=this;return l()((function*(){t.integration.createCompany&&t.integration.companyMatches.length<1&&t.addNewMatches("company")}))()}}}},di=(i("Il/B"),Object(h.a)(ci,Ke,[],!1,null,"ee79ac54",null).exports);function gi(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var pi=window.location.protocol+"//"+window.location.hostname,ui=(t,e,i,n)=>{var s=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?gi(Object(i),!0).forEach((function(e){y()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):gi(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({baseUrl:"https://app.intercom.com/oauth",provider:t,client_id:_.a.integrationAuth.intercom.clientId,state:"",redirect_uri:pi+"/auth/intercom/callback",display:"popup",scope:e,response_type:"code",prompt:"consent",access_type:"offline"},i);x(s,n)},fi={name:"intercom",authName:"Intercom",displayName:"Intercom",description:b.default.t("formSettings.integrationSettings.intercom.description"),logo:"/static/img/integrations/intercom.svg",darkLogo:"/static/img/integrations/intercom-white.svg",settingsView:di,webhookTrigger:!0,explanationHeader:b.default.t("formSettings.integrationSettings.intercom.explanationHeader"),explanationOption1:b.default.t("formSettings.integrationSettings.intercom.explanationOption1"),explanationOption2:b.default.t("formSettings.integrationSettings.intercom.explanationOption2"),explanationFooter1:b.default.t("formSettings.integrationSettings.intercom.explanationFooter1"),explanationFooter2:b.default.t("formSettings.integrationSettings.intercom.explanationFooter2"),helpUrl:"https://forms.app/en/help-center/intercom-integration",categories:["customersupport","marketingautomation","all"],login:(t,e)=>{ui("intercom","",{formId:t.formId},e)}},mi=(i("LKBx"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"integrations-conversion-wrapper"},[t.provider.mustCustomDomian?e("IntegrationCustomDomainInfo",{attrs:{hasCustomDomain:t.hasCustomDomain,formUrl:t.form.url},on:{changeDefaultDomain:t.changeDefaultDomain}}):t._e(),t._v(" "),e("i-form",{ref:"form",attrs:{disableScroll:""}},[e("div",{staticClass:"attribute"},[e("div",{staticClass:"input-with-link",class:{disabled:t.saveDisableInput}},[e("label",{staticClass:"label"},[t._v(t._s(t.$t(t.provider.codeLabel)))]),t._v(" "),e("i-text",{staticClass:"provider-code",attrs:{disabled:t.saveDisableInput,rules:t.rules,placeholder:t.provider.placeholder?t.provider.placeholder:""},on:{change:t.onChange},model:{value:t.remarketing.code,callback:function(e){t.$set(t.remarketing,"code",e)},expression:"remarketing.code"}}),t._v(" "),!t.remarketing.code&&t.provider.helpPageUrl?e("a",{staticClass:"f-focus code-help-button",attrs:{href:t.provider.helpPageUrl,target:"_blank"}},[e("i-icon",{attrs:{icon:"info"}})],1):t._e()],1),t._v(" "),!t.provider.hideEventName&&t.remarketing.code?e("div",[e("h4",[t._v(t._s(t.$t("formSettings.conversionCodes.googleAnalyticsEventName")))]),t._v(" "),e("i-text",{staticClass:"provider-code",attrs:{disabled:t.saveDisable,rules:t.remarketing.provider?t.eventNameRules:[]},model:{value:t.remarketing.eventName,callback:function(e){t.$set(t.remarketing,"eventName",e)},expression:"remarketing.eventName"}})],1):t._e()]),t._v(" "),t.error?e("i-alert",{attrs:{type:"error"}},[t._v("\n\t\t\t"+t._s(t.error.errorMessage)+"\n\t\t")]):t._e()],1),t._v(" "),t.provider.mustCustomDomian&&t.hasCustomDomain&&t.provider.hasExternalServiceDomainVerificationSettings?e("ExternalServiceDomainVerifications",{attrs:{selectedProviderName:t.provider.name},on:{change:t.externalServiceDomainVerificationSettingsOnChange}}):t._e(),t._v(" "),t.saveDisable?t._e():e("CookieConsentSwitch",{attrs:{form:t.form},model:{value:t.consentEnable,callback:function(e){t.consentEnable=e},expression:"consentEnable"}}),t._v(" "),e("div",{staticClass:"popup-bottom integration-save-button text-center"},[e("i-button",{staticClass:"button",attrs:{disabled:t.saveDisable},on:{click:function(e){return t.updateConversion(t.provider.displayName)}}},[e("span",[t._v(t._s(t.$t("save")))])])],1)],1)});mi._withStripped=!0;var hi=i("NcpN"),vi=i("EZuM"),bi=i("jVB3"),Si=function(){var t=this,e=t._self._c;return e("div",[t.hasCustomDomain?t._e():e("i-alert",{staticClass:"domain-alert",attrs:{type:"warning"}},[t._v("\n\t\t"+t._s(t.$t("formSettings.integrationSettings.customDomainMustUsage"))+"\n\t\t"),t.$root.ownerInfo._id===t.$root.user._id?e("a",{staticClass:"domain-link",on:{click:function(e){t.openDomainSettings=!0}}},[t._v("\n\t\t\t"+t._s(t.$t("customizeDomain"))+"\n\t\t")]):t._e()]),t._v(" "),e("i-popup",{staticClass:"domain-settings-form",attrs:{closeButton:"",fullscreen:""},model:{value:t.openDomainSettings,callback:function(e){t.openDomainSettings=e},expression:"openDomainSettings"}},[e("DomainSettings",{attrs:{formUrl:t.formUrl},on:{changeDefaultDomain:t.changeDefaultDomain}})],1)],1)};Si._withStripped=!0;var yi={name:"IntegrationCustomDomainInfo",components:{DomainSettings:i("dhWl").default},props:{formUrl:String,hasCustomDomain:Boolean},data:function(){return{openDomainSettings:!1}},methods:{changeDefaultDomain:function(t){this.$emit("changeDefaultDomain",t)}}},_i=(i("Hl7L"),Object(h.a)(yi,Si,[],!1,null,"f295bf86",null).exports),ki=function(){var t=this,e=t._self._c;return t.lastCustomDomain&&"active"===t.lastCustomDomain.status?e("div",{staticClass:"domain-item external-service-domain-verifications"},[t.selectedProviderName&&t.externalServiceDomainVerificationProviders&&t.externalServiceDomainVerificationProviders[t.selectedProviderName]?e("div",{staticClass:"domain-item-body"},[t.showTitleOnSettings?e("h4",{staticClass:"row"},[t._v(t._s(t.selectedProviderName))]):t._e(),t._v(" "),e("div",{staticClass:"row"},[e("".concat(t.selectedProviderName,"DomainVerifitacionSettings"),{tag:"component",attrs:{externalServiceDomainVerification:t.selectedExternalServiceDomainVerification,customDomain:t.lastCustomDomain},on:{change:t.selectedProviderSettingsOnChange}})],1)]):t._e()]):t._e()};ki._withStripped=!0;var wi=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row domain-verification-info-wrapper"},[e("i-alert",{attrs:{type:"info",hideIcon:!0}},[e("div",{staticClass:"integrations-conversion-more-info"},[e("p",[e("b",[t._v(t._s(t.$t("formSettings.integrationSettings.metapixel.moreInfo.title")))])]),t._v(" "),e("ol",[e("li",[t._v(t._s(t.$t("formSettings.integrationSettings.metapixel.moreInfo.step1")))]),t._v(" "),e("li",[t._v("\n\t\t\t\t\t"+t._s(t.$t("formSettings.integrationSettings.metapixel.moreInfo.step2"))+"\n\t\t\t\t\t"),e("p",{staticClass:"domain-full-path"},[t._v("\n\t\t\t\t\t\t"+t._s(t.domainFullPath)+"\n\t\t\t\t\t")])]),t._v(" "),e("li",[t._v(t._s(t.$t("formSettings.integrationSettings.metapixel.moreInfo.step3")))]),t._v(" "),e("li",[t._v(t._s(t.$t("formSettings.integrationSettings.metapixel.moreInfo.step4")))])])])]),t._v(" "),e("i-text",{staticClass:"domain-verification-url",attrs:{placeholder:t.domainFullPath+"/xxxxxxx.html"},model:{value:t.domainVerification,callback:function(e){t.domainVerification=e},expression:"domainVerification"}}),t._v(" "),e("i-alert",{attrs:{type:"info",hideIcon:!0}},[e("div",{staticClass:"integrations-conversion-more-info"},[e("p",[t._v(t._s(t.$t("formSettings.integrationSettings.metapixel.moreInfo.more"))+": "),e("a",{attrs:{href:"https://forms.app/en/help-center/meta-pixel",target:"_blank"}},[t._v("https://forms.app/en/help-center/meta-pixel")])])])])],1)};wi._withStripped=!0;i("yq1k"),i("JTJg");var Ci={name:"MetaPixelDomainVerificationSettings",props:{externalServiceDomainVerification:String,customDomain:Object},data:function(){return{domainVerification:null}},mounted:function(){this.externalServiceDomainVerification&&(this.domainVerification="".concat(this.domainFullPath,"/").concat(this.externalServiceDomainVerification))},computed:{baseCustomDomain:function(){return"".concat(this.customDomain.subdomain,".").concat(this.customDomain.maindomain)},domainFullPath:function(){return"https://".concat(this.baseCustomDomain)}},watch:{domainVerification:function(){var t="";if(this.domainVerification.includes("//")){var e=this.domainVerification.split("//");e[1]&&(t=e[1].replace(this.baseCustomDomain,""))}else t=this.domainVerification.replace(this.baseCustomDomain,"");t&&("/"===t[0]&&(t=t.replace("/","")),t=t.replace(/ /g,"")),this.externalServiceDomainVerification!==t&&this.$emit("change",this.customDomain._id,"meta-pixel",t)}}},xi=(i("e1l1"),Object(h.a)(Ci,wi,[],!1,null,"3174f132",null).exports),Fi={name:"ExternalServiceDomainVerifications",props:{selectedProviderName:String,showTitleOnSettings:Boolean},components:{MetaPixelDomainVerifitacionSettings:xi},data:function(){return{externalServiceDomainVerifications:null,lastExternalServiceDomainVerifications:null,lastCustomDomain:null,externalServiceDomainVerificationProviders:{"meta-pixel":"meta-pixel"},selectedExternalServiceDomainVerification:null}},mounted:function(){var t=l()((function*(){var t=yield hi.a.getCustomDomains();for(var e of t)e.maindomain!==_.a.mainBaseHostName&&(e.externalServiceDomainVerifications&&(this.externalServiceDomainVerifications=e.externalServiceDomainVerifications),this.lastCustomDomain={_id:e._id,subdomain:e.subdomain,maindomain:e.maindomain,settings:e.settings,status:e.status});this.selectedProviderName&&this.externalServiceDomainVerifications&&(this.selectedExternalServiceDomainVerification=this.externalServiceDomainVerifications[this.selectedProviderName])}));return function(){return t.apply(this,arguments)}}(),methods:{selectedProviderSettingsOnChange:function(t,e,i){this.$emit("change",t,e,i)}}},Di=Object(h.a)(Fi,ki,[],!1,null,null,null).exports,Oi=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cookie-consent-wrapper"},[e("a-switch",{attrs:{value:t.value,label:t.$t("formSettings.baseSettings.cookieConsent")},on:{change:function(e){return t.onChange(e)}}}),t._v(" "),t.value?t._e():e("i-alert",{attrs:{type:"info"}},[t._v("\n\t\t"+t._s(t.$t("cookieConsentAlert"))+"\n\t")])],1)};Oi._withStripped=!0;var qi,$i={name:"CookieConsentSwitch",props:{value:Boolean},methods:{onChange(t){this.$emit("input",t)}}},Mi=(i("y1+3"),Object(h.a)($i,Oi,[],!1,null,null,null).exports),Ni=i("bRvd"),Ii={name:"ConversionSettings",props:{form:Object,provider:Object},components:{IntegrationCustomDomainInfo:_i,ExternalServiceDomainVerifications:Di,CookieConsentSwitch:Mi},data:function(){return{remarketing:{provider:this.provider.name,eventName:this.provider.defaultEventName},hasCustomDomain:!1,error:null,eventNameRules:[t=>!!t||this.$t("isRequired"),t=>t.length>2||this.$t("formSettings.conversionCodes.googleAnalyticsEventRule")],rules:this.provider.createRules(this),externalServiceDomainVerificationModel:null,consentEnable:this.form.baseSettings.isShouldShowCookieModal}},mounted:function(){this.init()},methods:{init:function(){if(this.form.conversionCodes&&Array.isArray(this.form.conversionCodes.remarketing))for(var t=0;t<this.form.conversionCodes.remarketing.length;t++){var e=this.form.conversionCodes.remarketing[t];e?e.provider===this.provider.name&&(this.remarketing=JSON.parse(JSON.stringify(e))):this.form.conversionCodes.remarketing.splice(t,1)}this.$root.setUser(t=>{this.checkCustomDomain(t.info)})},updateConversion:(qi=l()((function*(t){if(this.error=null,this.$refs.form&&this.$refs.form.validate()){this.form.conversionCodes&&Array.isArray(this.form.conversionCodes.remarketing)||this.$set(this.form,"conversionCodes",{remarketing:[]});var e=this.form.conversionCodes.remarketing.findIndex(t=>t.provider===this.remarketing.provider);if(e>-1?this.$set(this.form.conversionCodes.remarketing,e,this.remarketing):this.form.conversionCodes.remarketing.push(this.remarketing),this.consentEnable!==this.form.baseSettings.isShouldShowCookieModal){var i={eventName:"form_actions",category:"form_integration",formId:this.form._id,label:"is_show_cookie_modal",s_value:this.provider.name,userId:this.form.userId,value:this.consentEnable?1:-1};Ni.a.fireFormsappAnalyticsEvent(i)}var n=yield this.$root.specificSaveForm({formModel:{conversionCodes:this.form.conversionCodes,baseSettings:{isShouldShowCookieModal:this.consentEnable}},changelogs:[{action:e>-1?"E":"A",path:"formModel.integrations",value:t},{action:"E",oldValue:this.form.baseSettings.isShouldShowCookieModal,value:this.consentEnable,path:"form.baseSettings.isShouldShowCookieModal"}]},t=>{t.$set(t.form.baseSettings,"isShouldShowCookieModal",this.consentEnable),t.$set(t.oldSaveModel.formModel.baseSettings,"isShouldShowCookieModal",this.consentEnable),t.$set(t.saveModel.formModel.baseSettings,"isShouldShowCookieModal",this.consentEnable),t.$set(t.$root.save,"isDirty",!1)});if(200===n.status)return this.externalServiceDomainVerificationModel&&(yield hi.a.saveExternalServiceDomainVerification(this.externalServiceDomainVerificationModel),this.externalServiceDomainVerificationModel=null),this.provider.isEnabled=!0,void this.$emit("closeDetail",this.provider.isEnabled);this.error=bi.a.errorToLocalization(this.$t("errorEnums.anErrorOccurred"),n)}})),function(t){return qi.apply(this,arguments)}),onChange:function(){this.error=null},changeDefaultDomain:function(){this.checkCustomDomain(this.$root.user.info)},checkCustomDomain:function(t){var e=vi.a.parseDomainFromUserInfo(_.a.mainBaseHostName,t);e&&(this.hasCustomDomain="customDomain"===e)},externalServiceDomainVerificationSettingsOnChange:function(t,e,i){this.externalServiceDomainVerificationModel={domainId:t,providerName:e,providerModel:i}}},computed:{saveDisable:function(){return this.saveDisableInput||!this.remarketing.code},saveDisableInput:function(){return this.provider&&this.provider.mustCustomDomian?!this.remarketing.provider||!this.hasCustomDomain:!this.remarketing.provider}}},ji=(i("nn+H"),Object(h.a)(Ii,mi,[],!1,null,"4394fbd2",null).exports),Pi={getEnable:(t,e)=>!!(t.conversionCodes&&t.conversionCodes.remarketing&&t.conversionCodes.remarketing.find(t=>t.provider===e)),remove:(t,e)=>{var i=t.conversionCodes.remarketing.findIndex(t=>t.provider===e);if(i>-1)return t.conversionCodes.remarketing.splice(i,1),{conversionCodes:t.conversionCodes}},checkQuota:t=>!(t.customDomain&&t.customDomain.quota>=1)},Ti={name:"google-analytics-4",displayName:"Google Analytics",description:b.default.t("formSettings.integrationSettings.googleanalytics.description"),logo:"/static/img/integrations/google-analytics.svg",settingsView:ji,categories:["anr","all"],codeLabel:"formSettings.integrationSettings.googleanalytics.codeLabel",placeholder:"G-XXXXXXX",defaultEventName:"form_submission",createRules:function(t){return[e=>!!e||t.$t("isRequired"),e=>e.startsWith("G-")||t.$t("formSettings.conversionCodes.validationErrors.googleAnalytics4IdStartsWith")]},helpPageUrl:"https://forms.app/en/help-center/google-analytics-integration",getEnable:t=>Pi.getEnable(t,"google-analytics-4"),remove:t=>Pi.remove(t,"google-analytics-4")},Bi={name:"google-conversion",displayName:"Google Ads",description:b.default.t("formSettings.integrationSettings.googleads.description"),logo:"/static/img/integrations/google-conversion.svg",settingsView:ji,categories:["anr","all"],codeLabel:"formSettings.integrationSettings.googleads.codeLabel",placeholder:"AW-XXXXXXXXXXXX/YYYYYYYYYYYYYYYYYYYY",createRules:function(t){return[e=>!!e||t.$t("isRequired"),e=>e.startsWith("AW-")||t.$t("formSettings.conversionCodes.validationErrors.googleAdwordsIdStartsWith")]},hideEventName:!0,getEnable:t=>Pi.getEnable(t,"google-conversion"),remove:t=>Pi.remove(t,"google-conversion")},Ei=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"form-settings-content"},[e("div",{staticClass:"design-input-wrapper"},[e("div",{staticClass:"design-input"},[e("label",[t._v(t._s(t.$t("formSettings.directMessageSettings.facebook.pageId")))]),t._v(" "),e("i-text",{ref:"facebookPageId",attrs:{rules:t.facebookPageIdValidationRules},model:{value:t.facebookMessengerPageId,callback:function(e){t.facebookMessengerPageId=e},expression:"facebookMessengerPageId"}})],1),t._v(" "),e("div",{staticClass:"design-input"},[e("label",[t._v(t._s(t.$t("formSettings.directMessageSettings.facebook.appId")))]),t._v(" "),e("i-text",{ref:"facebookAppId",attrs:{rules:t.facebookAppIdValidationRules},model:{value:t.facebookMessengerAppId,callback:function(e){t.facebookMessengerAppId=e},expression:"facebookMessengerAppId"}})],1)])]),t._v(" "),e("i-alert",{attrs:{type:"info"}},[t._v("\n\t\t"+t._s(t.$t("formSettings.directMessageSettings.facebook.alertLabel"))+"\n\t\t"),e("a",{attrs:{href:"https://forms.app/en/help-center/facebook-messenger-integration",target:"_blank"}},[t._v(t._s(t.$t("formSettings.directMessageSettings.facebook.alertButton")))])]),t._v(" "),e("div",{staticClass:"popup-bottom"},[e("i-button",{staticClass:"button",class:{disabled:!t.facebookMessengerPageId||!t.facebookMessengerAppId},on:{click:t.saveSettings}},[e("span",[t._v(t._s(t.$t("save")))])])],1)],1)};Ei._withStripped=!0;var Li={name:"Settings",props:["provider","form"],data:function(){return{facebookMessengerPageId:"",facebookMessengerAppId:"",facebookPageIdValidationRules:[t=>!!t||this.$t("isRequired")],facebookAppIdValidationRules:[t=>!!t||this.$t("isRequired")]}},mounted:function(){this.init()},methods:{init:function(){this.form.directMessageSettings&&this.form.directMessageSettings.facebook&&this.form.directMessageSettings.facebook.isEnable&&(this.facebookMessengerPageId=this.form.directMessageSettings.facebook.pageId,this.facebookMessengerAppId=this.form.directMessageSettings.facebook.appId)},saveSettings:function(){if(this.$refs.facebookPageId.validate()||this.$refs.facebookAppId.validate()){this.form.directMessageSettings||(this.form.directMessageSettings={});var t=!1;this.facebookMessengerPageId&&this.facebookMessengerAppId&&(t=!0),this.$set(this.form.directMessageSettings,"facebook",{isEnable:t,pageId:this.facebookMessengerPageId,appId:this.facebookMessengerAppId}),this.$root.specificSaveForm({formModel:{directMessageSettings:this.form.directMessageSettings},changelogs:[{action:t?"E":"D",path:"formModel.integrations",value:"Facebook"}]}),this.provider.isEnabled=t,this.$emit("closeDetail",t)}}},watch:{"form.directMessageSettings.whatsapp":function(){this.init()}}},Qi=(i("tjed"),Object(h.a)(Li,Ei,[],!1,null,"7c4c38ee",null).exports),Ai={name:"facebook",displayName:"Facebook Messenger",description:b.default.t("formSettings.integrationSettings.facebookmessenger.description"),logo:"/static/img/integrations/facebook.svg",settingsView:Qi,categories:["customersupport","all"],getEnable:t=>t.directMessageSettings&&t.directMessageSettings.facebook&&t.directMessageSettings.facebook.isEnable,remove:t=>(t.directMessageSettings.facebook.isEnable=!1,t.directMessageSettings.facebook.pageId="",t.directMessageSettings.facebook.appId="",{directMessageSettings:t.directMessageSettings})},Vi=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"form-settings-content"},[e("div",{staticClass:"control-sub-wrapper"},[e("div",{staticClass:"design-input"},[e("label",[t._v(t._s(t.$t("formSettings.directMessageSettings.whatsapp.phoneNumber")))]),t._v(" "),e("i-text",{ref:"whatsappPhoneNumber",model:{value:t.whatsappPhoneNumber,callback:function(e){t.whatsappPhoneNumber=e},expression:"whatsappPhoneNumber"}}),t._v(" "),e("div",{staticClass:"phone-format-info"},[e("span",[t._v(t._s(t.$t("formSettings.directMessageSettings.whatsapp.phoneNumberFormatWarning")))])])],1)])]),t._v(" "),e("div",{staticClass:"popup-bottom"},[e("i-button",{staticClass:"button",class:{disabled:!t.whatsappPhoneNumber},on:{click:t.saveSettings}},[e("span",[t._v(t._s(t.$t("save")))])])],1)])};Vi._withStripped=!0;var Ri={name:"Settings",props:["provider","form"],data:function(){return{whatsappPhoneNumber:""}},mounted:function(){this.init()},methods:{init:function(){this.form.directMessageSettings&&this.form.directMessageSettings.whatsapp&&this.form.directMessageSettings.whatsapp.isEnable&&(this.whatsappPhoneNumber=this.form.directMessageSettings.whatsapp.phone)},saveSettings:function(){if(this.$refs.whatsappPhoneNumber.validate()){this.form.directMessageSettings||(this.form.directMessageSettings={});var t=!1;this.whatsappPhoneNumber&&(t=!0),this.$set(this.form.directMessageSettings,"whatsapp",{isEnable:t,phone:this.whatsappPhoneNumber}),this.$root.specificSaveForm({formModel:{directMessageSettings:this.form.directMessageSettings},changelogs:[{action:t?"E":"D",path:"formModel.integrations",value:"Whatsapp"}]}),this.provider.isEnabled=t,this.$emit("closeDetail",t)}}},watch:{"form.directMessageSettings.whatsapp":function(){this.init()}}},zi=(i("eboO"),Object(h.a)(Ri,Vi,[],!1,null,"c4df644a",null).exports),Hi={name:"whatsapp",displayName:"WhatsApp",description:b.default.t("formSettings.integrationSettings.whatsapp.description"),logo:"/static/img/integrations/whatsapp.svg",settingsView:zi,categories:["customersupport","all"],getEnable:t=>t.directMessageSettings&&t.directMessageSettings.whatsapp&&t.directMessageSettings.whatsapp.isEnable,remove:t=>(t.directMessageSettings.whatsapp.isEnable=!1,t.directMessageSettings.whatsapp.phone="",{directMessageSettings:t.directMessageSettings})},Zi={name:"airtable",displayName:"Airtable",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.airtable"),logo:"https://file.forms.app/sitefile/Airtable.png",isZapier:!0,categories:["anr","all"]},Wi={name:"coda",displayName:"Coda",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.coda"),logo:"https://file.forms.app/sitefile/Coda.png",isZapier:!0,categories:["anr","all"]},Ui={name:"zoho-analytics",displayName:"Zoho Analytics",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.zohoanalytics"),logo:"https://file.forms.app/sitefile/Zoho Analytics.png",isZapier:!0,categories:["anr","all"]},Xi={name:"freshdesk",displayName:"Freshdesk",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.freshdesk"),logo:"https://file.forms.app/sitefile/freshdesk.png",isZapier:!0,categories:["customersupport","all"]},Gi={name:"zendesk",displayName:"Zendesk",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.zendesk"),logo:"https://file.forms.app/sitefile/zendesk.png",isZapier:!0,categories:["customersupport","all"]},Ki={name:"zoho-desk",displayName:"Zoho Desk",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.zohodesk"),logo:"/static/img/integrations/zoho-desk.png",isZapier:!0,categories:["customersupport","all"]},Ji={name:"wordpress",displayName:"Wordpress",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.wordpress"),logo:"https://file.forms.app/sitefile/wordpress.png",isZapier:!0,categories:["cms","all"]},Yi={name:"webflow",displayName:"Webflow",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.webflow"),logo:"https://file.forms.app/sitefile/webflow.png",isZapier:!0,categories:["cms","all"]},tn={name:"pipedrive",displayName:"Pipedrive",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.pipedrive"),logo:"/static/img/integrations/pipedrive-light.png",darkLogo:"/static/img/integrations/pipedrive-dark.png",isZapier:!0,categories:["crm","leadgeneration","all","emailmarketing"]},en={name:"zoho-crm",displayName:"Zoho CRM",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.zohocrm"),logo:"https://file.forms.app/sitefile/zoho-crm.png",isZapier:!0,categories:["crm","marketingautomation","all","emailmarketing"]},nn={name:"salesforce",displayName:"Salesforce",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.salesforce"),logo:"https://file.forms.app/sitefile/Salesforce.png",isZapier:!0,categories:["crm","all","emailmarketing"]},sn=function(){var t=this._self._c;return t("div",[t("WebhookList",{attrs:{form:this.form},on:{onChangeSettings:this.onChangeSettings}})],1)};sn._withStripped=!0;var an={name:"Settings",components:{WebhookList:i("LE3X").a},props:["provider","form"],data:function(){return{webhooks:[]}},methods:{onChangeSettings:function(t){this.form.hasWebhookTrigger=!1,t.webhooks&&(this.webhooks=t.webhooks),this.webhooks.length>0&&(this.form.hasWebhookTrigger=!0),this.$root.specificSaveForm({formModel:{hasWebhookTrigger:this.form.hasWebhookTrigger},changelogs:t.changelogs})}}},on=(i("sbI3"),Object(h.a)(an,sn,[],!1,null,"d992d29a",null).exports),rn={name:"webhook",displayName:"Webhook",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.webhook"),logo:"https://file.forms.app/sitefile/webhook.png",categories:["developertools","webhook","all"],settingsView:on},ln={name:"github",displayName:"Github",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.github"),logo:"/static/img/integrations/github-light.png",darkLogo:"/static/img/integrations/github-dark.png",isZapier:!0,categories:["developertools","all"]},cn={name:"lucidchart",displayName:"Lucidchart",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.lucidchart"),logo:"https://file.forms.app/sitefile/Lucidchart 1.png",isZapier:!0,categories:["developertools","all"]},dn={name:"jira",displayName:"Jira",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.jira"),logo:"https://file.forms.app/sitefile/Jira_(2).png",isZapier:!0,categories:["developertools","teamcollaboration","all"]},gn={name:"azure-devops",displayName:"Azure DevOps",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.azuredevops"),logo:"https://file.forms.app/sitefile/Azure Devops.png",isZapier:!0,categories:["developertools","all"]},pn={name:"evernote",displayName:"Evernote",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.evernote"),logo:"https://file.forms.app/sitefile/Evernote.png",isZapier:!0,categories:["filemanagement","all"]},un={name:"dropbox",displayName:"DropBox",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.dropbox"),logo:"https://file.forms.app/sitefile/dropbox.png",isZapier:!0,categories:["filemanagement","all"]},fn=function(){var t=this,e=t._self._c;return e("div",{staticClass:"googledrive-settings-wrapper"},[t.isLoading?e("i-preloader"):e("div",{staticClass:"attribute"},[e("h4",[t._v(t._s(t.$t("formSettings.integrationSettings.googledrive.folderChoice")))]),t._v(" "),e("i-select",{attrs:{items:t.selectGoogleDriveFolderPathOptions,"option-text":"name","option-value":"value",onlyDirection:"down"},on:{change:t.changeGoogleFolderOption},model:{value:t.createFolderInDrive,callback:function(e){t.createFolderInDrive=e},expression:"createFolderInDrive"}}),t._v(" "),"0"!==t.createFolderInDrive||t.integration.folderName&&t.integration.folderId?t._e():e("div",{staticClass:"google-drive-button",on:{click:t.signInAndPickFile}},[e("img",{attrs:{src:"https://file.forms.app/sitefile/Google-drive.png"}}),t._v(" "),e("span",[t._v(t._s(t.$t("formSettings.integrationSettings.googledrive.gdriveFolderSelect")))]),t._v(" "),e("i-icon",{staticClass:"icon-right",attrs:{icon:"arrow-right"}})],1),t._v(" "),t.integration.folderName&&t.integration.folderId?e("h4",[t._v(t._s(t.$t("formSettings.integrationSettings.googledrive.selectedFolder")))]):t._e(),t._v(" "),t.integration.folderName&&t.integration.folderId?e("div",{staticClass:"google-drive-button",on:{click:t.deletePickedFolder}},[e("img",{attrs:{src:"https://file.forms.app/sitefile/Google-drive.png"}}),t._v(" "),e("i-icon",{staticClass:"folder",attrs:{regular:"",icon:"folder"}}),t._v(" "),e("span",[t._v(t._s(t.integration.folderName))]),t._v(" "),e("i-icon",{staticClass:"icon-right",attrs:{regular:"",icon:"xmark"}})],1):t._e(),t._v(" "),"1"===t.createFolderInDrive?e("div",{staticClass:"design-input"},[e("label",{staticClass:"setting-title"},[e("h4",[t._v(t._s(t.$t("formSettings.integrationSettings.googledrive.folderName")))])]),t._v(" "),e("TagEditor",{ref:"subject",attrs:{singleLine:"",noTextStyle:"",form:t.form,variables:t.variablesFields},model:{value:t.integration.folderName,callback:function(e){t.$set(t.integration,"folderName",e)},expression:"integration.folderName"}})],1):t._e(),t._v(" "),e("h4",{staticClass:"bottom-content-header"},[t._v(t._s(t.$t("formSettings.integrationSettings.googledrive.storageMethodChoice")))]),t._v(" "),e("i-select",{attrs:{items:t.selectCreateFolderForRecordOptions,emptyOption:t.$t("formSettings.integrationSettings.googledrive.storageMethodChoice"),"option-text":"name","option-value":"value",onlyDirection:"down"},on:{change:t.changeCreateFolderForRecordOption},model:{value:t.selectCreateFolderForRecordOption,callback:function(e){t.selectCreateFolderForRecordOption=e},expression:"selectCreateFolderForRecordOption"}}),t._v(" "),e("div",{staticClass:"design-input"},[e("label",{staticClass:"setting-title"},[e("h4",[t._v(t._s(t.$t("formSettings.integrationSettings.googledrive.docName")))])]),t._v(" "),e("TagEditor",{ref:"subject",attrs:{singleLine:"",noTextStyle:"",form:t.form,variables:t.variablesFieldsForRecord},model:{value:t.integration.fileName,callback:function(e){t.$set(t.integration,"fileName",e)},expression:"integration.fileName"}})],1),t._v(" "),e("div",{staticClass:"design-input"},[e("label",{staticClass:"setting-title"},[e("h4",[t._v(t._s(t.$t("formSettings.integrationSettings.googledrive.formFields")))])]),t._v(" "),e("i-select",{attrs:{items:t.questions,emptyOption:t.$t("formSettings.notificationSettings.customNotifications.labels.formAnswers"),allOptionSelectedText:t.$t("formSettings.notificationSettings.customNotifications.labels.formAnswers"),allOptionSelected:t.allFieldSelected,"option-text":"label",multiple:"","option-value":"value",onlyDirection:"down"},on:{change:t.changeFields},model:{value:t.selectedFields,callback:function(e){t.selectedFields=e},expression:"selectedFields"}})],1),t._v(" "),e("div",{staticClass:"text-center integration-save-btn"},[e("i-button",{on:{click:function(e){return t.$emit("saveSettings",t.integration)}}},[t._v(t._s(t.$t("save")))])],1)],1)],1)};fn._withStripped=!0;i("5s+n");var mn=Object(d.a)("integration"),hn={getAccessToken:t=>l()((function*(){var e=yield mn.post("actions/googledrive/getAccessToken",{formId:t});return 200===e.status?e.data.data:null}))()};function vn(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function bn(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?vn(Object(i),!0).forEach((function(e){y()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):vn(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var Sn,yn,_n={folderId:"",folderName:"",createFolderForRecord:!0,fileName:"",fields:""},kn={name:"Settings",props:{form:Object,integrationId:String},components:{ITags:()=>Promise.all([i.e(26),i.e(148)]).then(i.bind(null,"aNEy")),UpgradePopup:()=>Promise.all([i.e(105),i.e(4),i.e(255),i.e(339),i.e(265)]).then(i.bind(null,"s3eO")),TagEditor:tt.a},data:function(){var t=A(this.form).questions.filter(t=>{var e=L.a.getQuestionTypeByTypeName(t.questionType.toLowerCase());return!(!e||!e.answerable)}).map((t,e)=>({label:"".concat(e+1,". ").concat(E.b.cleanTextFromBBCode(t.question).replace(/{{q\.(.*?)\}}/g,"_ ")),value:"q.".concat(t._id,".a")}));return{integration:bn({},_n),isLoading:!0,tabPreloader:!1,selectedFields:[],allFieldSelected:!1,selectGoogleDriveFolderPathOptions:[{name:this.$t("formSettings.integrationSettings.googledrive.existingFolderSelect"),value:"0"},{name:this.$t("formSettings.integrationSettings.googledrive.newFolderCreate"),value:"1"}],selectCreateFolderForRecordOptions:[{name:this.$t("formSettings.integrationSettings.googledrive.subfoldersCreate"),value:"1"},{name:this.$t("formSettings.integrationSettings.googledrive.mainFolderStore"),value:"0"}],selectCreateFolderForRecordOption:"1",createFolderInDrive:"",folderPath:"",variablesFields:[{label:this.$t("formSettings.notificationSettings.customNotifications.labels.u.un"),value:"u.un"},{label:this.$t("formSettings.notificationSettings.customNotifications.labels.f.t"),value:"f.t"},{label:this.$t("formSettings.notificationSettings.customNotifications.labels.f.u"),value:"f.u"}],variablesFieldsForRecord:[{label:this.$t("formSettings.notificationSettings.customNotifications.labels.u.un"),value:"u.un"},{label:this.$t("formSettings.notificationSettings.customNotifications.labels.f.t"),value:"f.t"},{label:this.$t("formSettings.notificationSettings.customNotifications.labels.f.u"),value:"f.u"},{label:this.$t("formSettings.notificationSettings.customNotifications.labels.a.sid"),value:"a.sid"},{label:this.$t("formSettings.notificationSettings.customNotifications.labels.a.sd"),value:"a.sd"},...t],questions:t}},mounted:function(){var t=l()((function*(){var t=this;if(this.integration=(yield c.a.getIntegrationById(this.integrationId))||bn({},_n),this.integration.accessToken||(this.integration.accessToken=yield hn.getAccessToken(this.form._id)),this.integration.folderName&&!this.integration.folderId?this.createFolderInDrive="1":(this.integration.folderName||this.integration.folderId||(this.integration.fileName="{{f.t}} - {{a.sd}}"),this.createFolderInDrive="0"),this.integration.fields)for(var e,i=/\{{([^{}]+)\}}/g;null!=(e=i.exec(this.integration.fields));)this.selectedFields.push(e[1]);this.selectCreateFolderForRecordOption=this.integration.createFolderForRecord?"1":"0",this.changeFields(),setTimeout(l()((function*(){t.isLoading=!1})),250)}));return function(){return t.apply(this,arguments)}}(),methods:{signInAndPickFile:(yn=l()((function*(){if(yield this.loadGapi(),this.integration.accessToken){var t=this.integration.accessToken.split(" ")[1];this.oauthToken=t,this.openPicker(this.oauthToken)}else window.gapi.load("auth2",()=>{window.gapi.auth2.init({client_id:_.a.integrationAuth.google.clientId,scope:_.a.integrationAuth.google.googleDriveFileScope}).signIn().then(t=>{this.oauthToken=t.getAuthResponse().access_token,this.openPicker(this.oauthToken)})})})),function(){return yn.apply(this,arguments)}),changeFields:function(){this.allFieldSelected=this.selectedFields.length===this.questions.length,this.integration.fields="";for(var t=0;t<this.selectedFields.length;t++){var e=this.selectedFields[t];this.integration.fields=this.integration.fields+"{{"+e+"}}"}},loadGapi:function(){try{if(!window.gapi)return new Promise((t,e)=>{if(!document.getElementById("gapi-script")){var i=document.createElement("script");i.id="gapi-script",i.src="https://apis.google.com/js/api.js",i.onload=()=>{window.gapi.load("auth",{callback:function(){t()},onerror:function(){this.$swal({title:this.$t("popups.errorOccurredPopup.title"),text:this.$t("popups.oopsPopup.text"),icon:"error"})},timeout:5e3,ontimeout:function(){this.$swal({title:this.$t("popups.errorOccurredPopup.title"),text:this.$t("popups.oopsPopup.text"),icon:"error"})}})},i.onerror=function(t){this.$swal({title:this.$t("popups.errorOccurredPopup.title"),text:this.$t("popups.oopsPopup.text"),icon:"error"})},document.body.appendChild(i)}})}catch(t){this.$swal({title:this.$t("popups.errorOccurredPopup.title"),text:this.$t("popups.oopsPopup.text"),icon:"error"})}},openPicker:(Sn=l()((function*(t){yield this.loadGapi(),window.gapi.load("picker",{callback:()=>{if(this.pickerApiLoaded=!0,t){var e=new window.google.picker.DocsView(window.google.picker.ViewId.FOLDERS);e.setSelectFolderEnabled(!0),this.pickerApiLoaded&&t&&(new window.google.picker.PickerBuilder).addView(e).setOAuthToken(t).setDeveloperKey(_.a.integrationAuth.google.developerKey).setCallback(this.pickerCallback).build().setVisible(!0)}}})})),function(t){return Sn.apply(this,arguments)}),pickerCallback:function(t){t.action===window.google.picker.Action.PICKED&&(this.integration.folderId=t.docs[0].id,this.integration.folderName=t.docs[0].name)},deletePickedFolder:function(){this.integration.folderId="",this.integration.folderName=""},changeGoogleFolderOption:function(){"0"===this.createFolderInDrive?this.integration.folderName="":(this.integration.folderId="",this.integration.folderName="{{f.t}}")},changeCreateFolderForRecordOption:function(){this.integration.createFolderForRecord="1"===this.selectCreateFolderForRecordOption}}},wn=(i("xMXQ"),Object(h.a)(kn,fn,[],!1,null,"1ef23625",null).exports),Cn={name:"googledrive",authName:"Google",displayName:"Google Drive",description:b.default.t("formSettings.integrationSettings.googledrive.connectText"),logo:"https://file.forms.app/sitefile/Google-drive.png",settingsView:wn,webhookTrigger:!0,explanationHeader:b.default.t("formSettings.integrationSettings.googledrive.description"),explanationOption1:b.default.t("formSettings.integrationSettings.googledrive.explanationOption1"),explanationOption2:b.default.t("formSettings.integrationSettings.googledrive.explanationOption2"),explanationFooter1:b.default.t("formSettings.integrationSettings.googledrive.explanationFooter1"),categories:["filemanagement","all"],helpUrl:"https://forms.app/en/help-center/google-drive-integration",login:(t,e)=>{M("googledrive","https://www.googleapis.com/auth/drive",{formId:t.formId},e)}},xn={name:"onedrive",displayName:"OneDrive",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.onedrive"),logo:"https://file.forms.app/sitefile/OneDrive.png",isZapier:!0,categories:["filemanagement","all"]},Fn={name:"office-365",displayName:"Microsoft Office 365",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.office365"),logo:"https://file.forms.app/sitefile/Office 365.png",isZapier:!0,categories:["filemanagement","all"]},Dn={name:"box",displayName:"Box",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.box"),logo:"https://file.forms.app/sitefile/box.png",isZapier:!0,categories:["filemanagement","all"]},On={name:"convertkit",displayName:"ConvertKit",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.convertkit"),logo:"https://file.forms.app/sitefile/ConvertKit.png",isZapier:!0,categories:["leadgeneration","marketingautomation","all"]},qn={name:"asana",displayName:"Asana",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.asana"),logo:"https://file.forms.app/sitefile/asana.png",isZapier:!0,categories:["leadgeneration","productivity","teamcollaboration","all"]},$n={name:"trello",displayName:"Trello",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.trello"),logo:"https://file.forms.app/sitefile/Trello.png",isZapier:!0,categories:["marketingautomation","teamcollaboration","all"]},Mn={name:"clickup",displayName:"ClickUp",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.clickup"),logo:"/static/img/integrations/clickup.png",isZapier:!0,categories:["marketingautomation","all"]},Nn={name:"monday",displayName:"monday.com",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.monday"),logo:"https://file.forms.app/sitefile/Monday.com.png",isZapier:!0,categories:["marketingautomation","all"]},In={name:"miro",displayName:"Miro",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.miro"),logo:"https://file.forms.app/sitefile/Miro.png",isZapier:!0,categories:["marketingautomation","all","projectmanagement"]},jn={name:"mailerlite",displayName:"MailerLite",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.mailerlite"),logo:"https://file.forms.app/sitefile/Mailer lite.png",isZapier:!0,categories:["marketingautomation","all"]},Pn={name:"shopify",displayName:"Shopify",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.shopify"),logo:"https://file.forms.app/sitefile/shopify.png",isZapier:!0,categories:["marketingautomation","all"]},Tn={name:"microsoft-teams",displayName:"Microsoft Teams",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.microsoftteams"),logo:"https://file.forms.app/sitefile/Microsoft-Teams.png",isZapier:!0,categories:["productivity","all"]},Bn={name:"productboard",displayName:"productboard",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.productboard"),logo:"https://file.forms.app/sitefile/Productboard.png",isZapier:!0,categories:["productivity","all","productmanagementintegrations"]},En={name:"clinked",displayName:"Clinked",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.clinked"),logo:"https://file.forms.app/sitefile/Clinked.png",isZapier:!0,categories:["projectmanagement","all"]},Ln={name:"linear",displayName:"Linear",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.linear"),logo:"https://file.forms.app/sitefile/Linear.png",isZapier:!0,categories:["projectmanagement","all"]},Qn={name:"fellow",displayName:"Fellow",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.fellow"),logo:"https://file.forms.app/sitefile/Fellow.png",isZapier:!0,categories:["projectmanagement","all"]},An={name:"frameio",displayName:"Frame.io",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.frameio"),logo:"https://file.forms.app/sitefile/Frame.png",isZapier:!0,categories:["projectmanagement","all"]},Vn={name:"hive",displayName:"Hive",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.hive"),logo:"https://file.forms.app/sitefile/Hive.png",isZapier:!0,categories:["projectmanagement","all"]},Rn={name:"guru",displayName:"Guru",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.guru"),logo:"https://file.forms.app/sitefile/Guru.png",isZapier:!0,categories:["projectmanagement","all"]},zn={name:"podio",displayName:"Podio",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.podio"),logo:"https://file.forms.app/sitefile/Podio.png",isZapier:!0,categories:["projectmanagement","all","productmanagementintegrations"]},Hn={name:"spoke",displayName:"Spoke",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.spoke"),logo:"https://file.forms.app/sitefile/Spoke.png",isZapier:!0,categories:["projectmanagement","all"]},Zn={name:"knack",displayName:"Knack",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.knack"),logo:"https://file.forms.app/sitefile/Knack.png",isZapier:!0,categories:["projectmanagement","all"]},Wn={name:"sendgrid",displayName:"SendGrid",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.sendgrid"),logo:"https://file.forms.app/sitefile/SendGrid.png",isZapier:!0,categories:["all","emailmarketing"]},Un={name:"platformly",displayName:"Platform.ly",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.platformly"),logo:"https://file.forms.app/sitefile/Platform.ly.png",isZapier:!0,categories:["all","emailmarketing"]},Xn={name:"insightly",displayName:"Insightly",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.insightly"),logo:"https://file.forms.app/sitefile/Insightly.jpg",isZapier:!0,categories:["all","emailmarketing"]},Gn={name:"marketo",displayName:"Marketo",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.marketo"),logo:"https://file.forms.app/sitefile/Marketo.jpg",isZapier:!0,categories:["all","emailmarketing"]},Kn={name:"encharge",displayName:"Encharge",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.encharge"),logo:"https://file.forms.app/sitefile/Encharge.jpg",isZapier:!0,categories:["all","emailmarketing"]},Jn={name:"clientify",displayName:"Clientify",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.clientify"),logo:"https://file.forms.app/sitefile/Clientify.jpg",isZapier:!0,categories:["all","emailmarketing"]},Yn={name:"opencrm",displayName:"Open CRM",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.opencrm"),logo:"https://file.forms.app/sitefile/OpenCRM.png",isZapier:!0,categories:["all","emailmarketing"]},ts={name:"solve360",displayName:"Solve CRM",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.solvecrm"),logo:"https://file.forms.app/sitefile/Solve-CRM.png",isZapier:!0,categories:["all","emailmarketing"]},es={name:"crowdin",displayName:"Crowdin",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.crowdin"),logo:"https://file.forms.app/sitefile/Crowdin.png",isZapier:!0,categories:["all","productmanagementintegrations"]},is={name:"thinkific",displayName:"Thinkific",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.thinkific"),logo:"https://file.forms.app/sitefile/Thinkific.png",isZapier:!0,categories:["all","productmanagementintegrations"]},ns={name:"callingly",displayName:"Callingly",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.callingly"),logo:"https://file.forms.app/sitefile/Callingly.png",isZapier:!0,categories:["all","helpdesk"]},ss={name:"justclick",displayName:"Justclick",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.justclick"),logo:"https://file.forms.app/sitefile/Justclick.png",isZapier:!0,categories:["all","helpdesk"]},as={name:"leadowl",displayName:"LeadOwl",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.leadowl"),logo:"https://file.forms.app/sitefile/LeadOwl.png",isZapier:!0,categories:["all","helpdesk"]},os={name:"klaviyo",displayName:"Klaviyo",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.klaviyo"),logo:"https://file.forms.app/sitefile/Klaviyo.png",isZapier:!0,categories:["all","helpdesk"]},rs={name:"nocrm-io",displayName:"noCRM.io",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.nocrmio"),logo:"https://file.forms.app/sitefile/noCRM.png",isZapier:!0,categories:["all","helpdesk"]},ls={name:"crmble",displayName:"Crmble",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.crmble"),logo:"https://file.forms.app/sitefile/Crmble.png",isZapier:!0,categories:["all","helpdesk"]},cs={name:"manychat",displayName:"ManyChat",description:b.default.t("formSettings.integrationSettings.zapierDescriptions.manychat"),logo:"https://file.forms.app/sitefile/Manychat.jpg",isZapier:!0,categories:["all","helpdesk"]},ds={name:"google-tag-manager",displayName:"Google Tag Manager",description:b.default.t("formSettings.integrationSettings.googletagmanager.description"),logo:"/static/img/integrations/google-tag-manager.svg",loginDetail:!0,settingsView:ji,categories:["anr","all"],codeLabel:"formSettings.integrationSettings.googletagmanager.codeLabel",placeholder:"GTM-XXXXXX",defaultEventName:"form_submission",mustCustomDomian:!0,createRules:function(t){return[e=>!!e||t.$t("isRequired"),e=>e.startsWith("GTM-")||t.$t("formSettings.conversionCodes.validationErrors.googleTagManagerIdStartsWith")]},checkQuota:Pi.checkQuota,getEnable:t=>Pi.getEnable(t,"google-tag-manager"),remove:t=>Pi.remove(t,"google-tag-manager")},gs={name:"meta-pixel",displayName:"Meta Pixel",description:b.default.t("formSettings.integrationSettings.metapixel.description"),logo:"/static/img/integrations/meta-pixel.svg",settingsView:ji,categories:["anr","all"],codeLabel:"formSettings.integrationSettings.metapixel.codeLabel",placeholder:"XXXXXXXXXXXXXXX",defaultEventName:"form_submission",mustCustomDomian:!0,hasExternalServiceDomainVerificationSettings:!0,createRules:function(t){return[e=>!!e||t.$t("isRequired"),e=>e.length<99||t.$t("formSettings.conversionCodes.validationErrors.metaPixelIdLength",{length:99})]},checkQuota:Pi.checkQuota,getEnable:t=>Pi.getEnable(t,"meta-pixel"),remove:t=>Pi.remove(t,"meta-pixel")};e.a={googlesheets:N,"google-tag-manager":ds,"meta-pixel":gs,slack:G,activecampaign:je,mailchimp:he,"google-analytics-4":Ti,googledrive:Cn,hubspot:Lt,intercom:fi,notion:Ge,microsoftexcel:_t,discord:Kt,googlecalendar:dt,"google-conversion":Bi,facebook:Ai,whatsapp:Hi,webhook:rn,airtable:Zi,coda:Wi,"zoho-analytics":Ui,freshdesk:Xi,zendesk:Gi,"zoho-desk":Ki,wordpress:Ji,webflow:Yi,pipedrive:tn,"zoho-crm":en,salesforce:nn,github:ln,lucidchart:cn,jira:dn,"azure-devops":gn,evernote:pn,dropbox:un,onedrive:xn,"office-365":Fn,box:Dn,convertkit:On,asana:qn,trello:$n,clickup:Mn,mondaycom:Nn,miro:In,mailerlite:jn,shopify:Pn,"microsoft-teams":Tn,productboard:Bn,clinked:En,linear:Ln,fellow:Qn,frameio:An,hive:Vn,guru:Rn,podio:zn,spoke:Hn,knack:Zn,sendgrid:Wn,platformly:Un,insightly:Xn,marketo:Gn,encharge:Kn,clientify:Jn,opencrm:Yn,solvecrm:ts,crowdin:es,thinkific:is,callingly:ns,justclick:ss,leadowl:as,klaviyo:os,nocrmio:rs,crmble:ls,manychat:cs}},"9lfq":function(t,e,i){var n=i("LboF"),s=i("w92j");"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[t.i,s,""]]);var a={insert:"head",singleton:!1};n(s,a);t.exports=s.locals||{}},A7Ge:function(t,e,i){var n=i("LboF"),s=i("Jg9o");"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[t.i,s,""]]);var a={insert:"head",singleton:!1};n(s,a);t.exports=s.locals||{}},DvbW:function(t,e,i){var n=i("LboF"),s=i("mZQ3");"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[t.i,s,""]]);var a={insert:"head",singleton:!1};n(s,a);t.exports=s.locals||{}},ECvp:function(t,e,i){},Eo0T:function(t,e,i){"use strict";i("2lgY")},HR9P:function(t,e,i){"use strict";i("DvbW")},HfzJ:function(t,e,i){var n=i("LboF"),s=i("ECvp");"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[t.i,s,""]]);var a={insert:"head",singleton:!1};n(s,a);t.exports=s.locals||{}},Hl7L:function(t,e,i){"use strict";i("A7Ge")},"IP/s":function(t,e,i){},"Il/B":function(t,e,i){"use strict";i("u8GI")},Jg9o:function(t,e,i){},Ktew:function(t,e,i){},LE3X:function(t,e,i){"use strict";var n=function(){var t=this,e=t._self._c;return t.loading?e("i-preloader",{staticClass:"loading",attrs:{center:""}}):e("div",[e("WebhookDetailPopup",{ref:"webhookDetailPopup",attrs:{form:t.form},on:{update:t.updateWebhook}}),t._v(" "),e("WebhookDeliveriesPopup",{ref:"webhookDeliveriesPopup"}),t._v(" "),e("div",{staticClass:"webhook-table"},[t._l(t.webhooks,(function(i,n){return e("div",{key:n,staticClass:"webhook-item"},[e("div",{staticClass:"webhook-item-url"},[t._v("\n\t\t\t\t"+t._s(i.url)+"\n\t\t\t")]),t._v(" "),e("div",{staticClass:"webhook-item-right"},[e("i-button",{on:{click:function(e){return t.$refs.webhookDeliveriesPopup.show(i)}}},[t._v("Recent Deliveries")]),t._v(" "),e("i-button",{staticClass:"edit-webhook",on:{click:function(e){return t.$refs.webhookDetailPopup.show(i)}}},[t._v("Edit")]),t._v(" "),e("i-switch",{on:{input:function(e){return t.toggleEnableWebhook(i._id,e)},change:function(t){i.isEnabled=t}},model:{value:i.isEnabled,callback:function(e){t.$set(i,"isEnabled",e)},expression:"webhook.isEnabled"}}),t._v(" "),e("i-button",{staticClass:"remove-webhook",attrs:{naked:"","prepend-icon":"trash"},on:{click:function(e){return t.removeWebhook(i._id)}}})],1)])})),t._v(" "),t.webhooks&&0!==t.webhooks.length?t._e():e("div",{staticClass:"no-webhooks-wrapper"},[e("img",{attrs:{src:"/static/img/webhook.png"}}),t._v(" "),e("h4",[t._v("Webhooks")]),t._v(" "),e("span",[t._v(t._s(t.$t("formbuilder.webhook.noWebhookDesc")))])])],2),t._v(" "),e("div",{staticClass:"text-center"},[t.$can("integration-edit")?e("i-button",{staticClass:"create-webhook",on:{click:function(e){return t.$refs.webhookDetailPopup.show()}}},[t._v(t._s(t.$t("formbuilder.webhook.add")))]):t._e()],1)],1)};n._withStripped=!0;var s=i("yXPU"),a=i.n(s),o=(i("5s+n"),i("p532"),function(){var t=this,e=t._self._c;return e("i-popup",{attrs:{"close-button":""},model:{value:t.showPopup,callback:function(e){t.showPopup=e},expression:"showPopup"}},[t.errors&&t.errors.length>0?e("i-alert",{attrs:{type:"error"}},t._l(t.errors,(function(i,n){return e("span",{key:n},[t._v("\n\t\t\t"+t._s(i)),e("br")])})),0):t._e(),t._v(" "),e("div",[e("div",{staticClass:"webhook-attributes"},[e("ExternalUrlInput",{attrs:{label:"URL *"},on:{input:t.onInputRedirectUrl},model:{value:t.webhookData.url,callback:function(e){t.$set(t.webhookData,"url",e)},expression:"webhookData.url"}})],1),t._v(" "),e("div",{staticClass:"webhook-attributes"},[e("label",[t._v(t._s(t.$t("formbuilder.webhook.secretKey")))]),t._v(" "),e("i-text",{attrs:{value:t.secret},on:{input:t.onInputSecret}})],1),t._v(" "),e("div",{staticClass:"text-center"},[e("i-button",{staticClass:"add-update-button",attrs:{loading:t.loading},on:{click:t.createOrUpdateWebhook}},[t._v(t._s(t.$t("formbuilder.webhook.save")))])],1)])],1)});o._withStripped=!0;var r=i("V/Or"),l=i("oCYn"),c=i("mSNy"),d=i("iKgg"),g=Object(d.a)("webhook");function p(){l.default.prototype.$swal({title:c.default.t("popups.mustLogin.title"),text:c.default.t("popups.mustRegisterOrLOginPopup.text"),type:"warning"})}var u,f={getWebhookByForm:t=>a()((function*(){if(l.default.prototype.$auth.isAuthenticated()){var e=yield g.get(t);return 200===e.status?e.data:[]}p()}))(),createWebhookByForm:(t,e)=>a()((function*(){if(l.default.prototype.$auth.isAuthenticated()){var i=yield g.post(t,e);return 200===i.status?i.data:null}p()}))(),updateWebhook:(t,e)=>a()((function*(){if(l.default.prototype.$auth.isAuthenticated()){var i=yield g.put(t,e);return 200===i.status?i.data:null}p()}))(),toggleEnableWebhook:(t,e)=>a()((function*(){if(l.default.prototype.$auth.isAuthenticated()){var i=yield g.put(t+"/"+e);return 200===i.status||204===i.status}p()}))(),removeWebhook:t=>a()((function*(){if(l.default.prototype.$auth.isAuthenticated()){var e=yield g.delete(t);return 200===e.status||204===e.status}p()}))(),getHistories(t){var e=arguments;return a()((function*(){var i=e.length>1&&void 0!==e[1]?e[1]:0;if(l.default.prototype.$auth.isAuthenticated()){var n=yield g.get("histories/"+t+"/"+i);return 200===n.status?n.data:null}p()}))()}},m=i("luLf"),h={name:"WebhookDetailPopup",props:{form:Object},components:{ExternalUrlInput:r.a},data:function(){return{isRedirectUrlValid:!1,webhookData:{},showPopup:!1,errors:[],loading:!1}},methods:{show:function(t){t?(this.webhookData=JSON.parse(JSON.stringify(t)),this.isRedirectUrlValid=!0):this.webhookData={},this.errors=[],this.loading=!1,this.showPopup=!0},close:function(){this.showPopup=!1},createOrUpdateWebhook:(u=a()((function*(){if(this.errors=[],this.isRedirectUrlValid){this.loading=!0;var t={};t=this.webhookData._id?yield f.updateWebhook(this.webhookData._id,this.webhookData):yield f.createWebhookByForm(this.form._id,this.webhookData),this.loading=!1,t.errors?t.errors.forEach(t=>{this.errors.push(Object(m.a)("webhook."+t.errorCode,t))}):(this.webhookData._id||this.$eventTrigger.fireFormsappAnalyticsEvent({eventName:"form_actions",category:"form_integrations",label:"webhook"}),this.webhookData=t,this.$emit("update",this.webhookData),this.close())}})),function(){return u.apply(this,arguments)}),onInputRedirectUrl:function(t,e,i){this.isRedirectUrlValid=e&&!i},onInputSecret:function(t){var e={secret:t};this.webhookData.headers=JSON.stringify(e)}},computed:{secret:function(){return this.webhookData&&this.webhookData.headers?JSON.parse(this.webhookData.headers).secret:""}}},v=(i("XSEq"),i("KHd+")),b=Object(v.a)(h,o,[],!1,null,"46a815bf",null).exports,S=function(){var t=this,e=t._self._c;return e("i-popup",{ref:"loaderContent",attrs:{"close-button":""},model:{value:t.showPopup,callback:function(e){t.showPopup=e},expression:"showPopup"}},[e("div",{staticClass:"header"},[e("h3",[t._v(t._s(t.$t("formbuilder.webhook.recentDeliveries")))])]),t._v(" "),e("div",{staticClass:"history-list-content"},[t._l(t.histories,(function(i,n){return e("i-accordion",{key:"wh-"+n,attrs:{freeAccordion:"",greenDot:!1},scopedSlots:t._u([{key:"head",fn:function(){return[e("div",{staticClass:"history-header-wrapper"},[e("div",{staticClass:"history-header"},[t.getRequestStatus(i)?e("i-icon",{staticClass:"delivery-ok",attrs:{icon:"check"}}):e("i-icon",{staticClass:"delivery-error",attrs:{icon:"times"}}),t._v(" "),e("div",{staticClass:"history-date"},[e("i-icon",{attrs:{icon:"clock"}}),t._v(" "),e("span",[t._v(t._s(t.getHistoryDateTime(i)[1]))])],1),t._v(" "),e("div",{staticClass:"history-date"},[e("i-icon",{attrs:{icon:"calendar"}}),t._v(" "),e("span",[t._v(t._s(t.getHistoryDateTime(i)[0]))])],1)],1),t._v(" "),e("i-icon",{staticClass:"caret-icon",attrs:{icon:"chevron-down"}})],1)]},proxy:!0}],null,!0)},[t._v(" "),i.requestBody?e("div",{staticClass:"payload"},[e("div",[e("h5",[t._v("Payload")]),t._v(" "),e("span",{class:"delivery-"+(t.getRequestStatus(i)?"ok":"error")},[t._v("("+t._s(i.statusCode)+")")])]),t._v(" "),e("span",[t._v(t._s(t.convertBeautifyPayload(i.requestBody)))])]):t._e()])})),t._v(" "),t.loading?e("i-preloader",{staticClass:"loading",attrs:{center:""}}):t._e()],2)])};S._withStripped=!0;var y,_,k={name:"WebhookDeliveriesPopup",components:{IAccordion:i("IWQq").a},data:function(){return{webhook:{},histories:[],loading:!1,page:0,hasNoLoadData:!1,showPopup:!1}},beforeDestroy:function(){this.popup&&this.popup.removeEventListener("scroll",this.loadMore)},methods:{getHistories:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;0===t&&(this.histories=[]),this.page=t,this.loading=!0,f.getHistories(this.webhook._id,t).then(t=>{if(this.loading=!1,t&&t.length>0){if(this.histories=this.histories.concat(t),t.length<10)return void(this.hasNoLoadData=!0);this.popup&&this.$nextTick(()=>{this.loadMore(this.popup)})}else this.hasNoLoadData=!0}).catch(()=>{this.hasNoLoadData=!0,this.loading=!1})},show:function(t){this.webhook=t,this.hasNoLoadData=!1,this.page=0,this.showPopup=!0,this.getHistories(),this.$nextTick(()=>{this.popup&&this.popup.addEventListener("scroll",t=>this.loadMore(t.target))})},close:function(){this.showPopup=!1},getRequestStatus:function(t){return t.statusCode>=200&&t.statusCode<300},getHistoryDateTime:function(t){var e=new Date(t.createDate),i=this.$root.user.info.timezone.utc[0];return e.toLocaleString(this.$root.user.info.culture.name,{timeZone:i}).split(" ")},convertBeautifyPayload:function(t){if(t)return JSON.stringify(JSON.parse(t),null,4)},loadMore:function(t){var e=t.scrollHeight-(t.scrollTop+t.clientHeight);!this.hasNoLoadData&&e<=100&&!this.loading&&this.getHistories(this.page+1)}},computed:{popup:function(){var t=document.getElementsByClassName("popup-content");if(t&&t.length>0)return t[0]}}},w=(i("jnT7"),{name:"WebhookList",components:{WebhookDetailPopup:b,WebhookDeliveriesPopup:Object(v.a)(k,S,[],!1,null,"66c3f968",null).exports},props:{form:Object},data:function(){return{loading:!0,webhooks:[]}},mounted:function(){this.loading=!0,this.$auth.isAuthenticated()&&this.$can("integration-edit")&&f.getWebhookByForm(this.form._id).then(t=>{this.webhooks=t||[]}).catch(()=>{}).finally(()=>{this.loading=!1})},methods:{updateWebhook:function(t){var e=this.webhooks.findIndex(e=>e._id===t._id);e>-1?this.$set(this.webhooks,e,t):this.webhooks.push(t),this.setWebhookTrigger(e>-1?"E":"A")},removeWebhook:(_=a()((function*(t){var e,i=this;this.$swal({title:this.$t("areYouSure"),text:this.$t("popups.deleteWebhookPopup.text"),icon:"warning",showCancelButton:!0,cancelButtonText:this.$t("cancel"),confirmButtonText:this.$t("popups.deleteFormPopup.okButtonText"),showLoaderOnConfirm:!0,preConfirm:(e=a()((function*(){var e=i.webhooks.findIndex(e=>e._id===t);(yield f.removeWebhook(t))&&i.webhooks.splice(e,1),i.setWebhookTrigger("D")})),function(){return e.apply(this,arguments)})})})),function(t){return _.apply(this,arguments)}),toggleEnableWebhook:(y=a()((function*(t,e){var i=this.webhooks.findIndex(e=>e._id===t);(yield f.toggleEnableWebhook(t,e?1:0))&&(this.webhooks[i].isEnabled=e),this.setWebhookTrigger("E")})),function(t,e){return y.apply(this,arguments)}),setWebhookTrigger:function(t){if(this.webhooks&&this.webhooks.length>0&&this.webhooks.find(t=>t.isEnabled))return this.form.hasWebhookTrigger=!0,void this.$emit("onChangeSettings",{webhooks:this.webhooks,changelogs:[{path:"formModel.integrations",action:t,value:"Webhook"}]});this.form.hasWebhookTrigger=!1,this.$emit("onChangeSettings",{webhooks:[]})}}}),C=(i("O93X"),Object(v.a)(w,n,[],!1,null,"3e541de6",null));e.a=C.exports},O93X:function(t,e,i){"use strict";i("84q2")},PQvI:function(t,e,i){"use strict";i("Qndc")},Qndc:function(t,e,i){var n=i("LboF"),s=i("V6lf");"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[t.i,s,""]]);var a={insert:"head",singleton:!1};n(s,a);t.exports=s.locals||{}},Rzgw:function(t,e,i){var n=i("LboF"),s=i("tDpY");"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[t.i,s,""]]);var a={insert:"head",singleton:!1};n(s,a);t.exports=s.locals||{}},T1E6:function(t,e,i){},V6lf:function(t,e,i){},"VZ+S":function(t,e,i){},WQEA:function(t,e,i){},XMHH:function(t,e,i){var n=i("LboF"),s=i("rL9C");"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[t.i,s,""]]);var a={insert:"head",singleton:!1};n(s,a);t.exports=s.locals||{}},XSEq:function(t,e,i){"use strict";i("ffV8")},buZ9:function(t,e,i){"use strict";i("HfzJ")},ckjQ:function(t,e,i){var n=i("LboF"),s=i("7pu/");"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[t.i,s,""]]);var a={insert:"head",singleton:!1};n(s,a);t.exports=s.locals||{}},dCVM:function(t,e,i){},dbA0:function(t,e,i){var n=i("LboF"),s=i("miGY");"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[t.i,s,""]]);var a={insert:"head",singleton:!1};n(s,a);t.exports=s.locals||{}},e1l1:function(t,e,i){"use strict";i("9lfq")},eboO:function(t,e,i){"use strict";i("ckjQ")},ffV8:function(t,e,i){var n=i("LboF"),s=i("WQEA");"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[t.i,s,""]]);var a={insert:"head",singleton:!1};n(s,a);t.exports=s.locals||{}},fiQv:function(t,e,i){var n=i("LboF"),s=i("VZ+S");"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[t.i,s,""]]);var a={insert:"head",singleton:!1};n(s,a);t.exports=s.locals||{}},fqr3:function(t,e,i){},fvAb:function(t,e,i){},hjK6:function(t,e,i){"use strict";i("dbA0")},jnT7:function(t,e,i){"use strict";i("o9ty")},lrFH:function(t,e,i){},mZQ3:function(t,e,i){},miGY:function(t,e,i){},"nn+H":function(t,e,i){"use strict";i("XMHH")},nyKx:function(t,e,i){var n=i("LboF"),s=i("IP/s");"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[t.i,s,""]]);var a={insert:"head",singleton:!1};n(s,a);t.exports=s.locals||{}},o9ty:function(t,e,i){var n=i("LboF"),s=i("6Wtb");"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[t.i,s,""]]);var a={insert:"head",singleton:!1};n(s,a);t.exports=s.locals||{}},qdd0:function(t,e,i){var n=i("LboF"),s=i("T1E6");"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[t.i,s,""]]);var a={insert:"head",singleton:!1};n(s,a);t.exports=s.locals||{}},qp4t:function(t,e,i){},rL9C:function(t,e,i){},sbI3:function(t,e,i){"use strict";i("qdd0")},tDpY:function(t,e,i){},tjed:function(t,e,i){"use strict";i("Rzgw")},u8GI:function(t,e,i){var n=i("LboF"),s=i("35S2");"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[t.i,s,""]]);var a={insert:"head",singleton:!1};n(s,a);t.exports=s.locals||{}},vdjZ:function(t,e,i){var n=i("LboF"),s=i("qp4t");"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[t.i,s,""]]);var a={insert:"head",singleton:!1};n(s,a);t.exports=s.locals||{}},w92j:function(t,e,i){},xMXQ:function(t,e,i){"use strict";i("6HAM")},"y1+3":function(t,e,i){"use strict";i("Ktew")},"yIN+":function(t,e,i){"use strict";i("nyKx")}}]);